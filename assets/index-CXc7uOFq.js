(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function n(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=n(c);fetch(c.href,d)}})();function Gm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Hl={exports:{}},mi={},Vl={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd;function Km(){if(Kd)return Ie;Kd=1;var i=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.iterator;function S(y){return y===null||typeof y!="object"?null:(y=N&&y[N]||y["@@iterator"],typeof y=="function"?y:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,C={};function P(y,L,ge){this.props=y,this.context=L,this.refs=C,this.updater=ge||O}P.prototype.isReactComponent={},P.prototype.setState=function(y,L){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,L,"setState")},P.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function F(){}F.prototype=P.prototype;function H(y,L,ge){this.props=y,this.context=L,this.refs=C,this.updater=ge||O}var B=H.prototype=new F;B.constructor=H,j(B,P.prototype),B.isPureReactComponent=!0;var X=Array.isArray,je=Object.prototype.hasOwnProperty,he={current:null},ie={key:!0,ref:!0,__self:!0,__source:!0};function q(y,L,ge){var _e,Ce={},oe=null,Te=null;if(L!=null)for(_e in L.ref!==void 0&&(Te=L.ref),L.key!==void 0&&(oe=""+L.key),L)je.call(L,_e)&&!ie.hasOwnProperty(_e)&&(Ce[_e]=L[_e]);var Oe=arguments.length-2;if(Oe===1)Ce.children=ge;else if(1<Oe){for(var Pe=Array(Oe),Ve=0;Ve<Oe;Ve++)Pe[Ve]=arguments[Ve+2];Ce.children=Pe}if(y&&y.defaultProps)for(_e in Oe=y.defaultProps,Oe)Ce[_e]===void 0&&(Ce[_e]=Oe[_e]);return{$$typeof:i,type:y,key:oe,ref:Te,props:Ce,_owner:he.current}}function ae(y,L){return{$$typeof:i,type:y.type,key:L,ref:y.ref,props:y.props,_owner:y._owner}}function Ae(y){return typeof y=="object"&&y!==null&&y.$$typeof===i}function We(y){var L={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(ge){return L[ge]})}var Le=/\/+/g;function Re(y,L){return typeof y=="object"&&y!==null&&y.key!=null?We(""+y.key):L.toString(36)}function dt(y,L,ge,_e,Ce){var oe=typeof y;(oe==="undefined"||oe==="boolean")&&(y=null);var Te=!1;if(y===null)Te=!0;else switch(oe){case"string":case"number":Te=!0;break;case"object":switch(y.$$typeof){case i:case r:Te=!0}}if(Te)return Te=y,Ce=Ce(Te),y=_e===""?"."+Re(Te,0):_e,X(Ce)?(ge="",y!=null&&(ge=y.replace(Le,"$&/")+"/"),dt(Ce,L,ge,"",function(Ve){return Ve})):Ce!=null&&(Ae(Ce)&&(Ce=ae(Ce,ge+(!Ce.key||Te&&Te.key===Ce.key?"":(""+Ce.key).replace(Le,"$&/")+"/")+y)),L.push(Ce)),1;if(Te=0,_e=_e===""?".":_e+":",X(y))for(var Oe=0;Oe<y.length;Oe++){oe=y[Oe];var Pe=_e+Re(oe,Oe);Te+=dt(oe,L,ge,Pe,Ce)}else if(Pe=S(y),typeof Pe=="function")for(y=Pe.call(y),Oe=0;!(oe=y.next()).done;)oe=oe.value,Pe=_e+Re(oe,Oe++),Te+=dt(oe,L,ge,Pe,Ce);else if(oe==="object")throw L=String(y),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Te}function et(y,L,ge){if(y==null)return y;var _e=[],Ce=0;return dt(y,_e,"","",function(oe){return L.call(ge,oe,Ce++)}),_e}function ze(y){if(y._status===-1){var L=y._result;L=L(),L.then(function(ge){(y._status===0||y._status===-1)&&(y._status=1,y._result=ge)},function(ge){(y._status===0||y._status===-1)&&(y._status=2,y._result=ge)}),y._status===-1&&(y._status=0,y._result=L)}if(y._status===1)return y._result.default;throw y._result}var De={current:null},J={transition:null},fe={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:J,ReactCurrentOwner:he};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Ie.Children={map:et,forEach:function(y,L,ge){et(y,function(){L.apply(this,arguments)},ge)},count:function(y){var L=0;return et(y,function(){L++}),L},toArray:function(y){return et(y,function(L){return L})||[]},only:function(y){if(!Ae(y))throw Error("React.Children.only expected to receive a single React element child.");return y}},Ie.Component=P,Ie.Fragment=n,Ie.Profiler=c,Ie.PureComponent=H,Ie.StrictMode=o,Ie.Suspense=p,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Ie.act=Y,Ie.cloneElement=function(y,L,ge){if(y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+y+".");var _e=j({},y.props),Ce=y.key,oe=y.ref,Te=y._owner;if(L!=null){if(L.ref!==void 0&&(oe=L.ref,Te=he.current),L.key!==void 0&&(Ce=""+L.key),y.type&&y.type.defaultProps)var Oe=y.type.defaultProps;for(Pe in L)je.call(L,Pe)&&!ie.hasOwnProperty(Pe)&&(_e[Pe]=L[Pe]===void 0&&Oe!==void 0?Oe[Pe]:L[Pe])}var Pe=arguments.length-2;if(Pe===1)_e.children=ge;else if(1<Pe){Oe=Array(Pe);for(var Ve=0;Ve<Pe;Ve++)Oe[Ve]=arguments[Ve+2];_e.children=Oe}return{$$typeof:i,type:y.type,key:Ce,ref:oe,props:_e,_owner:Te}},Ie.createContext=function(y){return y={$$typeof:f,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},y.Provider={$$typeof:d,_context:y},y.Consumer=y},Ie.createElement=q,Ie.createFactory=function(y){var L=q.bind(null,y);return L.type=y,L},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(y){return{$$typeof:m,render:y}},Ie.isValidElement=Ae,Ie.lazy=function(y){return{$$typeof:b,_payload:{_status:-1,_result:y},_init:ze}},Ie.memo=function(y,L){return{$$typeof:x,type:y,compare:L===void 0?null:L}},Ie.startTransition=function(y){var L=J.transition;J.transition={};try{y()}finally{J.transition=L}},Ie.unstable_act=Y,Ie.useCallback=function(y,L){return De.current.useCallback(y,L)},Ie.useContext=function(y){return De.current.useContext(y)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(y){return De.current.useDeferredValue(y)},Ie.useEffect=function(y,L){return De.current.useEffect(y,L)},Ie.useId=function(){return De.current.useId()},Ie.useImperativeHandle=function(y,L,ge){return De.current.useImperativeHandle(y,L,ge)},Ie.useInsertionEffect=function(y,L){return De.current.useInsertionEffect(y,L)},Ie.useLayoutEffect=function(y,L){return De.current.useLayoutEffect(y,L)},Ie.useMemo=function(y,L){return De.current.useMemo(y,L)},Ie.useReducer=function(y,L,ge){return De.current.useReducer(y,L,ge)},Ie.useRef=function(y){return De.current.useRef(y)},Ie.useState=function(y){return De.current.useState(y)},Ie.useSyncExternalStore=function(y,L,ge){return De.current.useSyncExternalStore(y,L,ge)},Ie.useTransition=function(){return De.current.useTransition()},Ie.version="18.3.1",Ie}var Yd;function vc(){return Yd||(Yd=1,Vl.exports=Km()),Vl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jd;function Ym(){if(Jd)return mi;Jd=1;var i=vc(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function f(m,p,x){var b,N={},S=null,O=null;x!==void 0&&(S=""+x),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(O=p.ref);for(b in p)o.call(p,b)&&!d.hasOwnProperty(b)&&(N[b]=p[b]);if(m&&m.defaultProps)for(b in p=m.defaultProps,p)N[b]===void 0&&(N[b]=p[b]);return{$$typeof:r,type:m,key:S,ref:O,props:N,_owner:c.current}}return mi.Fragment=n,mi.jsx=f,mi.jsxs=f,mi}var Qd;function Jm(){return Qd||(Qd=1,Hl.exports=Ym()),Hl.exports}var s=Jm(),I=vc();const kt=Gm(I);var Ua={},ql={exports:{}},Vt={},Gl={exports:{}},Kl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xd;function Qm(){return Xd||(Xd=1,(function(i){function r(J,fe){var Y=J.length;J.push(fe);e:for(;0<Y;){var y=Y-1>>>1,L=J[y];if(0<c(L,fe))J[y]=fe,J[Y]=L,Y=y;else break e}}function n(J){return J.length===0?null:J[0]}function o(J){if(J.length===0)return null;var fe=J[0],Y=J.pop();if(Y!==fe){J[0]=Y;e:for(var y=0,L=J.length,ge=L>>>1;y<ge;){var _e=2*(y+1)-1,Ce=J[_e],oe=_e+1,Te=J[oe];if(0>c(Ce,Y))oe<L&&0>c(Te,Ce)?(J[y]=Te,J[oe]=Y,y=oe):(J[y]=Ce,J[_e]=Y,y=_e);else if(oe<L&&0>c(Te,Y))J[y]=Te,J[oe]=Y,y=oe;else break e}}return fe}function c(J,fe){var Y=J.sortIndex-fe.sortIndex;return Y!==0?Y:J.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var p=[],x=[],b=1,N=null,S=3,O=!1,j=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(J){for(var fe=n(x);fe!==null;){if(fe.callback===null)o(x);else if(fe.startTime<=J)o(x),fe.sortIndex=fe.expirationTime,r(p,fe);else break;fe=n(x)}}function X(J){if(C=!1,B(J),!j)if(n(p)!==null)j=!0,ze(je);else{var fe=n(x);fe!==null&&De(X,fe.startTime-J)}}function je(J,fe){j=!1,C&&(C=!1,F(q),q=-1),O=!0;var Y=S;try{for(B(fe),N=n(p);N!==null&&(!(N.expirationTime>fe)||J&&!We());){var y=N.callback;if(typeof y=="function"){N.callback=null,S=N.priorityLevel;var L=y(N.expirationTime<=fe);fe=i.unstable_now(),typeof L=="function"?N.callback=L:N===n(p)&&o(p),B(fe)}else o(p);N=n(p)}if(N!==null)var ge=!0;else{var _e=n(x);_e!==null&&De(X,_e.startTime-fe),ge=!1}return ge}finally{N=null,S=Y,O=!1}}var he=!1,ie=null,q=-1,ae=5,Ae=-1;function We(){return!(i.unstable_now()-Ae<ae)}function Le(){if(ie!==null){var J=i.unstable_now();Ae=J;var fe=!0;try{fe=ie(!0,J)}finally{fe?Re():(he=!1,ie=null)}}else he=!1}var Re;if(typeof H=="function")Re=function(){H(Le)};else if(typeof MessageChannel<"u"){var dt=new MessageChannel,et=dt.port2;dt.port1.onmessage=Le,Re=function(){et.postMessage(null)}}else Re=function(){P(Le,0)};function ze(J){ie=J,he||(he=!0,Re())}function De(J,fe){q=P(function(){J(i.unstable_now())},fe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){j||O||(j=!0,ze(je))},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_getFirstCallbackNode=function(){return n(p)},i.unstable_next=function(J){switch(S){case 1:case 2:case 3:var fe=3;break;default:fe=S}var Y=S;S=fe;try{return J()}finally{S=Y}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(J,fe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Y=S;S=J;try{return fe()}finally{S=Y}},i.unstable_scheduleCallback=function(J,fe,Y){var y=i.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?y+Y:y):Y=y,J){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Y+L,J={id:b++,callback:fe,priorityLevel:J,startTime:Y,expirationTime:L,sortIndex:-1},Y>y?(J.sortIndex=Y,r(x,J),n(p)===null&&J===n(x)&&(C?(F(q),q=-1):C=!0,De(X,Y-y))):(J.sortIndex=L,r(p,J),j||O||(j=!0,ze(je))),J},i.unstable_shouldYield=We,i.unstable_wrapCallback=function(J){var fe=S;return function(){var Y=S;S=fe;try{return J.apply(this,arguments)}finally{S=Y}}}})(Kl)),Kl}var Zd;function Xm(){return Zd||(Zd=1,Gl.exports=Qm()),Gl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eh;function Zm(){if(eh)return Vt;eh=1;var i=vc(),r=Xm();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,c={};function d(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(c[e]=t,e=0;e<t.length;e++)o.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},N={};function S(e){return p.call(N,e)?!0:p.call(b,e)?!1:x.test(e)?N[e]=!0:(b[e]=!0,!1)}function O(e,t,a,l){if(a!==null&&a.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function j(e,t,a,l){if(t===null||typeof t>"u"||O(e,t,a,l))return!0;if(l)return!1;if(a!==null)switch(a.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function C(e,t,a,l,u,h,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=u,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=g}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){P[e]=new C(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];P[t]=new C(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){P[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){P[e]=new C(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){P[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){P[e]=new C(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){P[e]=new C(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){P[e]=new C(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){P[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function H(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(F,H);P[t]=new C(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(F,H);P[t]=new C(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(F,H);P[t]=new C(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){P[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)}),P.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){P[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)});function B(e,t,a,l){var u=P.hasOwnProperty(t)?P[t]:null;(u!==null?u.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(j(t,a,u,l)&&(a=null),l||u===null?S(t)&&(a===null?e.removeAttribute(t):e.setAttribute(t,""+a)):u.mustUseProperty?e[u.propertyName]=a===null?u.type===3?!1:"":a:(t=u.attributeName,l=u.attributeNamespace,a===null?e.removeAttribute(t):(u=u.type,a=u===3||u===4&&a===!0?"":""+a,l?e.setAttributeNS(l,t,a):e.setAttribute(t,a))))}var X=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,je=Symbol.for("react.element"),he=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),Ae=Symbol.for("react.provider"),We=Symbol.for("react.context"),Le=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),dt=Symbol.for("react.suspense_list"),et=Symbol.for("react.memo"),ze=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),J=Symbol.iterator;function fe(e){return e===null||typeof e!="object"?null:(e=J&&e[J]||e["@@iterator"],typeof e=="function"?e:null)}var Y=Object.assign,y;function L(e){if(y===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);y=t&&t[1]||""}return`
`+y+e}var ge=!1;function _e(e,t){if(!e||ge)return"";ge=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(R){var l=R}Reflect.construct(e,[],t)}else{try{t.call()}catch(R){l=R}e.call(t.prototype)}else{try{throw Error()}catch(R){l=R}e()}}catch(R){if(R&&l&&typeof R.stack=="string"){for(var u=R.stack.split(`
`),h=l.stack.split(`
`),g=u.length-1,v=h.length-1;1<=g&&0<=v&&u[g]!==h[v];)v--;for(;1<=g&&0<=v;g--,v--)if(u[g]!==h[v]){if(g!==1||v!==1)do if(g--,v--,0>v||u[g]!==h[v]){var _=`
`+u[g].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=g&&0<=v);break}}}finally{ge=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?L(e):""}function Ce(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=_e(e.type,!1),e;case 11:return e=_e(e.type.render,!1),e;case 1:return e=_e(e.type,!0),e;default:return""}}function oe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ie:return"Fragment";case he:return"Portal";case ae:return"Profiler";case q:return"StrictMode";case Re:return"Suspense";case dt:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case We:return(e.displayName||"Context")+".Consumer";case Ae:return(e._context.displayName||"Context")+".Provider";case Le:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case et:return t=e.displayName||null,t!==null?t:oe(e.type)||"Memo";case ze:t=e._payload,e=e._init;try{return oe(e(t))}catch{}}return null}function Te(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(t);case 8:return t===q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Oe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ve(e){var t=Pe(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var u=a.get,h=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(g){l=""+g,h.call(this,g)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bt(e){e._valueTracker||(e._valueTracker=Ve(e))}function jr(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=Pe(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function xt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nr(e,t){var a=t.checked;return Y({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function hr(e,t){var a=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;a=Oe(t.value!=null?t.value:a),e._wrapperState={initialChecked:l,initialValue:a,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function M(e,t){t=t.checked,t!=null&&B(e,"checked",t,!1)}function Q(e,t){M(e,t);var a=Oe(t.value),l=t.type;if(a!=null)l==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?me(e,t.type,a):t.hasOwnProperty("defaultValue")&&me(e,t.type,Oe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function me(e,t,a){(t!=="number"||xt(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var ke=Array.isArray;function pe(e,t,a,l){if(e=e.options,t){t={};for(var u=0;u<a.length;u++)t["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=t.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Oe(a),t=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function Fe(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(n(91));return Y({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ge(e,t){var a=t.value;if(a==null){if(a=t.children,t=t.defaultValue,a!=null){if(t!=null)throw Error(n(92));if(ke(a)){if(1<a.length)throw Error(n(93));a=a[0]}t=a}t==null&&(t=""),a=t}e._wrapperState={initialValue:Oe(a)}}function Je(e,t){var a=Oe(t.value),l=Oe(t.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),t.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),l!=null&&(e.defaultValue=""+l)}function qt(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Qe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function He(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Qe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rt,ht=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,a,l,u){MSApp.execUnsafeLocalFunction(function(){return e(t,a,l,u)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(rt=rt||document.createElement("div"),rt.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function V(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var le={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},te=["Webkit","ms","Moz","O"];Object.keys(le).forEach(function(e){te.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),le[t]=le[e]})});function Ee(e,t,a){return t==null||typeof t=="boolean"||t===""?"":a||typeof t!="number"||t===0||le.hasOwnProperty(e)&&le[e]?(""+t).trim():t+"px"}function qe(e,t){e=e.style;for(var a in t)if(t.hasOwnProperty(a)){var l=a.indexOf("--")===0,u=Ee(a,t[a],l);a==="float"&&(a="cssFloat"),l?e.setProperty(a,u):e[a]=u}}var Gt=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mt(e,t){if(t){if(Gt[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(n(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(n(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(t.style!=null&&typeof t.style!="object")throw Error(n(62))}}function ot(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Un=null;function Ut(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fr=null,_r=null,Nr=null;function Ci(e){if(e=Zs(e)){if(typeof Fr!="function")throw Error(n(280));var t=e.stateNode;t&&(t=ea(t),Fr(e.stateNode,e.type,t))}}function Ts(e){_r?Nr?Nr.push(e):Nr=[e]:_r=e}function Os(){if(_r){var e=_r,t=Nr;if(Nr=_r=null,Ci(e),t)for(e=0;e<t.length;e++)Ci(t[e])}}function Ti(e,t){return e(t)}function Oi(){}var zn=!1;function Rs(e,t,a){if(zn)return e(t,a);zn=!0;try{return Ti(e,t,a)}finally{zn=!1,(_r!==null||Nr!==null)&&(Oi(),Os())}}function gn(e,t){var a=e.stateNode;if(a===null)return null;var l=ea(a);if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(n(231,t,typeof a));return a}var Is=!1;if(m)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){Is=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{Is=!1}function Ri(e,t,a,l,u,h,g,v,_){var R=Array.prototype.slice.call(arguments,3);try{t.apply(a,R)}catch(z){this.onError(z)}}var yn=!1,Fn=null,Bn=!1,As=null,so={onError:function(e){yn=!0,Fn=e}};function Br(e,t,a,l,u,h,g,v,_){yn=!1,Fn=null,Ri.apply(so,arguments)}function io(e,t,a,l,u,h,g,v,_){if(Br.apply(this,arguments),yn){if(yn){var R=Fn;yn=!1,Fn=null}else throw Error(n(198));Bn||(Bn=!0,As=R)}}function Tr(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function Ii(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ai(e){if(Tr(e)!==e)throw Error(n(188))}function ao(e){var t=e.alternate;if(!t){if(t=Tr(e),t===null)throw Error(n(188));return t!==e?null:e}for(var a=e,l=t;;){var u=a.return;if(u===null)break;var h=u.alternate;if(h===null){if(l=u.return,l!==null){a=l;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===a)return Ai(u),e;if(h===l)return Ai(u),t;h=h.sibling}throw Error(n(188))}if(a.return!==l.return)a=u,l=h;else{for(var g=!1,v=u.child;v;){if(v===a){g=!0,a=u,l=h;break}if(v===l){g=!0,l=u,a=h;break}v=v.sibling}if(!g){for(v=h.child;v;){if(v===a){g=!0,a=h,l=u;break}if(v===l){g=!0,l=h,a=u;break}v=v.sibling}if(!g)throw Error(n(189))}}if(a.alternate!==l)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?e:t}function Pi(e){return e=ao(e),e!==null?Di(e):null}function Di(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Di(e);if(t!==null)return t;e=e.sibling}return null}var Li=r.unstable_scheduleCallback,Ps=r.unstable_cancelCallback,$i=r.unstable_shouldYield,oo=r.unstable_requestPaint,nt=r.unstable_now,lo=r.unstable_getCurrentPriorityLevel,Wn=r.unstable_ImmediatePriority,Ds=r.unstable_UserBlockingPriority,Hn=r.unstable_NormalPriority,co=r.unstable_LowPriority,Ls=r.unstable_IdlePriority,vn=null,sr=null;function uo(e){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(vn,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:Mi,ho=Math.log,fo=Math.LN2;function Mi(e){return e>>>=0,e===0?32:31-(ho(e)/fo|0)|0}var Vn=64,Wr=4194304;function Hr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function w(e,t){var a=e.pendingLanes;if(a===0)return 0;var l=0,u=e.suspendedLanes,h=e.pingedLanes,g=a&268435455;if(g!==0){var v=g&~u;v!==0?l=Hr(v):(h&=g,h!==0&&(l=Hr(h)))}else g=a&~u,g!==0?l=Hr(g):h!==0&&(l=Hr(h));if(l===0)return 0;if(t!==0&&t!==l&&(t&u)===0&&(u=l&-l,h=t&-t,u>=h||u===16&&(h&4194240)!==0))return t;if((l&4)!==0&&(l|=a&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)a=31-Kt(t),u=1<<a,l|=e[a],t&=~u;return l}function A(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,h=e.pendingLanes;0<h;){var g=31-Kt(h),v=1<<g,_=u[g];_===-1?((v&a)===0||(v&l)!==0)&&(u[g]=A(v,t)):_<=t&&(e.expiredLanes|=v),h&=~v}}function $(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ve(){var e=Vn;return Vn<<=1,(Vn&4194240)===0&&(Vn=64),e}function ue(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function $e(e,t,a){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=a}function St(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<a;){var u=31-Kt(a),h=1<<u;t[u]=0,l[u]=-1,e[u]=-1,a&=~h}}function Yt(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-Kt(a),u=1<<l;u&t|e[l]&t&&(e[l]|=t),a&=~u}}var Be=0;function qn(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ec,mo,Cc,Tc,Oc,po=!1,Ui=[],Vr=null,qr=null,Gr=null,$s=new Map,Ms=new Map,Kr=[],pf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rc(e,t){switch(e){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":$s.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ms.delete(t.pointerId)}}function Us(e,t,a,l,u,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:h,targetContainers:[u]},t!==null&&(t=Zs(t),t!==null&&mo(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function gf(e,t,a,l,u){switch(t){case"focusin":return Vr=Us(Vr,e,t,a,l,u),!0;case"dragenter":return qr=Us(qr,e,t,a,l,u),!0;case"mouseover":return Gr=Us(Gr,e,t,a,l,u),!0;case"pointerover":var h=u.pointerId;return $s.set(h,Us($s.get(h)||null,e,t,a,l,u)),!0;case"gotpointercapture":return h=u.pointerId,Ms.set(h,Us(Ms.get(h)||null,e,t,a,l,u)),!0}return!1}function Ic(e){var t=wn(e.target);if(t!==null){var a=Tr(t);if(a!==null){if(t=a.tag,t===13){if(t=Ii(a),t!==null){e.blockedOn=t,Oc(e.priority,function(){Cc(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=xo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Un=l,a.target.dispatchEvent(l),Un=null}else return t=Zs(a),t!==null&&mo(t),e.blockedOn=a,!1;t.shift()}return!0}function Ac(e,t,a){zi(e)&&a.delete(t)}function xf(){po=!1,Vr!==null&&zi(Vr)&&(Vr=null),qr!==null&&zi(qr)&&(qr=null),Gr!==null&&zi(Gr)&&(Gr=null),$s.forEach(Ac),Ms.forEach(Ac)}function zs(e,t){e.blockedOn===t&&(e.blockedOn=null,po||(po=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,xf)))}function Fs(e){function t(u){return zs(u,e)}if(0<Ui.length){zs(Ui[0],e);for(var a=1;a<Ui.length;a++){var l=Ui[a];l.blockedOn===e&&(l.blockedOn=null)}}for(Vr!==null&&zs(Vr,e),qr!==null&&zs(qr,e),Gr!==null&&zs(Gr,e),$s.forEach(t),Ms.forEach(t),a=0;a<Kr.length;a++)l=Kr[a],l.blockedOn===e&&(l.blockedOn=null);for(;0<Kr.length&&(a=Kr[0],a.blockedOn===null);)Ic(a),a.blockedOn===null&&Kr.shift()}var Gn=X.ReactCurrentBatchConfig,Fi=!0;function yf(e,t,a,l){var u=Be,h=Gn.transition;Gn.transition=null;try{Be=1,go(e,t,a,l)}finally{Be=u,Gn.transition=h}}function vf(e,t,a,l){var u=Be,h=Gn.transition;Gn.transition=null;try{Be=4,go(e,t,a,l)}finally{Be=u,Gn.transition=h}}function go(e,t,a,l){if(Fi){var u=xo(e,t,a,l);if(u===null)Po(e,t,l,Bi,a),Rc(e,l);else if(gf(u,e,t,a,l))l.stopPropagation();else if(Rc(e,l),t&4&&-1<pf.indexOf(e)){for(;u!==null;){var h=Zs(u);if(h!==null&&Ec(h),h=xo(e,t,a,l),h===null&&Po(e,t,l,Bi,a),h===u)break;u=h}u!==null&&l.stopPropagation()}else Po(e,t,l,null,a)}}var Bi=null;function xo(e,t,a,l){if(Bi=null,e=Ut(l),e=wn(e),e!==null)if(t=Tr(e),t===null)e=null;else if(a=t.tag,a===13){if(e=Ii(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bi=e,null}function Pc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lo()){case Wn:return 1;case Ds:return 4;case Hn:case co:return 16;case Ls:return 536870912;default:return 16}default:return 16}}var Yr=null,yo=null,Wi=null;function Dc(){if(Wi)return Wi;var e,t=yo,a=t.length,l,u="value"in Yr?Yr.value:Yr.textContent,h=u.length;for(e=0;e<a&&t[e]===u[e];e++);var g=a-e;for(l=1;l<=g&&t[a-l]===u[h-l];l++);return Wi=u.slice(e,1<l?1-l:void 0)}function Hi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vi(){return!0}function Lc(){return!1}function Jt(e){function t(a,l,u,h,g){this._reactName=a,this._targetInst=u,this.type=l,this.nativeEvent=h,this.target=g,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(h):h[v]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Vi:Lc,this.isPropagationStopped=Lc,this}return Y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),t}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vo=Jt(Kn),Bs=Y({},Kn,{view:0,detail:0}),wf=Jt(Bs),wo,bo,Ws,qi=Y({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_o,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ws&&(Ws&&e.type==="mousemove"?(wo=e.screenX-Ws.screenX,bo=e.screenY-Ws.screenY):bo=wo=0,Ws=e),wo)},movementY:function(e){return"movementY"in e?e.movementY:bo}}),$c=Jt(qi),bf=Y({},qi,{dataTransfer:0}),jf=Jt(bf),_f=Y({},Bs,{relatedTarget:0}),jo=Jt(_f),Nf=Y({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),kf=Jt(Nf),Sf=Y({},Kn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ef=Jt(Sf),Cf=Y({},Kn,{data:0}),Mc=Jt(Cf),Tf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Of={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function If(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Rf[e])?!!t[e]:!1}function _o(){return If}var Af=Y({},Bs,{key:function(e){if(e.key){var t=Tf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Of[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_o,charCode:function(e){return e.type==="keypress"?Hi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pf=Jt(Af),Df=Y({},qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uc=Jt(Df),Lf=Y({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_o}),$f=Jt(Lf),Mf=Y({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uf=Jt(Mf),zf=Y({},qi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ff=Jt(zf),Bf=[9,13,27,32],No=m&&"CompositionEvent"in window,Hs=null;m&&"documentMode"in document&&(Hs=document.documentMode);var Wf=m&&"TextEvent"in window&&!Hs,zc=m&&(!No||Hs&&8<Hs&&11>=Hs),Fc=" ",Bc=!1;function Wc(e,t){switch(e){case"keyup":return Bf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yn=!1;function Hf(e,t){switch(e){case"compositionend":return Hc(t);case"keypress":return t.which!==32?null:(Bc=!0,Fc);case"textInput":return e=t.data,e===Fc&&Bc?null:e;default:return null}}function Vf(e,t){if(Yn)return e==="compositionend"||!No&&Wc(e,t)?(e=Dc(),Wi=yo=Yr=null,Yn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zc&&t.locale!=="ko"?null:t.data;default:return null}}var qf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qf[e.type]:t==="textarea"}function qc(e,t,a,l){Ts(l),t=Qi(t,"onChange"),0<t.length&&(a=new vo("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var Vs=null,qs=null;function Gf(e){uu(e,0)}function Gi(e){var t=es(e);if(jr(t))return e}function Kf(e,t){if(e==="change")return t}var Gc=!1;if(m){var ko;if(m){var So="oninput"in document;if(!So){var Kc=document.createElement("div");Kc.setAttribute("oninput","return;"),So=typeof Kc.oninput=="function"}ko=So}else ko=!1;Gc=ko&&(!document.documentMode||9<document.documentMode)}function Yc(){Vs&&(Vs.detachEvent("onpropertychange",Jc),qs=Vs=null)}function Jc(e){if(e.propertyName==="value"&&Gi(qs)){var t=[];qc(t,qs,e,Ut(e)),Rs(Gf,t)}}function Yf(e,t,a){e==="focusin"?(Yc(),Vs=t,qs=a,Vs.attachEvent("onpropertychange",Jc)):e==="focusout"&&Yc()}function Jf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gi(qs)}function Qf(e,t){if(e==="click")return Gi(t)}function Xf(e,t){if(e==="input"||e==="change")return Gi(t)}function Zf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fr=typeof Object.is=="function"?Object.is:Zf;function Gs(e,t){if(fr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var u=a[l];if(!p.call(t,u)||!fr(e[u],t[u]))return!1}return!0}function Qc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xc(e,t){var a=Qc(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Qc(a)}}function Zc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eu(){for(var e=window,t=xt();t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=xt(e.document)}return t}function Eo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function em(e){var t=eu(),a=e.focusedElem,l=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&Zc(a.ownerDocument.documentElement,a)){if(l!==null&&Eo(a)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if(e=(t=a.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=a.textContent.length,h=Math.min(l.start,u);l=l.end===void 0?h:Math.min(l.end,u),!e.extend&&h>l&&(u=l,l=h,h=u),u=Xc(a,h);var g=Xc(a,l);u&&g&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),h>l?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=a;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)e=t[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tm=m&&"documentMode"in document&&11>=document.documentMode,Jn=null,Co=null,Ks=null,To=!1;function tu(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;To||Jn==null||Jn!==xt(l)||(l=Jn,"selectionStart"in l&&Eo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ks&&Gs(Ks,l)||(Ks=l,l=Qi(Co,"onSelect"),0<l.length&&(t=new vo("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=Jn)))}function Ki(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Qn={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionend:Ki("Transition","TransitionEnd")},Oo={},ru={};m&&(ru=document.createElement("div").style,"AnimationEvent"in window||(delete Qn.animationend.animation,delete Qn.animationiteration.animation,delete Qn.animationstart.animation),"TransitionEvent"in window||delete Qn.transitionend.transition);function Yi(e){if(Oo[e])return Oo[e];if(!Qn[e])return e;var t=Qn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in ru)return Oo[e]=t[a];return e}var nu=Yi("animationend"),su=Yi("animationiteration"),iu=Yi("animationstart"),au=Yi("transitionend"),ou=new Map,lu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(e,t){ou.set(e,t),d(t,[e])}for(var Ro=0;Ro<lu.length;Ro++){var Io=lu[Ro],rm=Io.toLowerCase(),nm=Io[0].toUpperCase()+Io.slice(1);Jr(rm,"on"+nm)}Jr(nu,"onAnimationEnd"),Jr(su,"onAnimationIteration"),Jr(iu,"onAnimationStart"),Jr("dblclick","onDoubleClick"),Jr("focusin","onFocus"),Jr("focusout","onBlur"),Jr(au,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ys));function cu(e,t,a){var l=e.type||"unknown-event";e.currentTarget=a,io(l,t,void 0,e),e.currentTarget=null}function uu(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],u=l.event;l=l.listeners;e:{var h=void 0;if(t)for(var g=l.length-1;0<=g;g--){var v=l[g],_=v.instance,R=v.currentTarget;if(v=v.listener,_!==h&&u.isPropagationStopped())break e;cu(u,v,R),h=_}else for(g=0;g<l.length;g++){if(v=l[g],_=v.instance,R=v.currentTarget,v=v.listener,_!==h&&u.isPropagationStopped())break e;cu(u,v,R),h=_}}}if(Bn)throw e=As,Bn=!1,As=null,e}function Xe(e,t){var a=t[zo];a===void 0&&(a=t[zo]=new Set);var l=e+"__bubble";a.has(l)||(du(t,e,2,!1),a.add(l))}function Ao(e,t,a){var l=0;t&&(l|=4),du(a,e,l,t)}var Ji="_reactListening"+Math.random().toString(36).slice(2);function Js(e){if(!e[Ji]){e[Ji]=!0,o.forEach(function(a){a!=="selectionchange"&&(sm.has(a)||Ao(a,!1,e),Ao(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ji]||(t[Ji]=!0,Ao("selectionchange",!1,t))}}function du(e,t,a,l){switch(Pc(t)){case 1:var u=yf;break;case 4:u=vf;break;default:u=go}a=u.bind(null,t,a,e),u=void 0,!Is||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(t,a,{capture:!0,passive:u}):e.addEventListener(t,a,!0):u!==void 0?e.addEventListener(t,a,{passive:u}):e.addEventListener(t,a,!1)}function Po(e,t,a,l,u){var h=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var v=l.stateNode.containerInfo;if(v===u||v.nodeType===8&&v.parentNode===u)break;if(g===4)for(g=l.return;g!==null;){var _=g.tag;if((_===3||_===4)&&(_=g.stateNode.containerInfo,_===u||_.nodeType===8&&_.parentNode===u))return;g=g.return}for(;v!==null;){if(g=wn(v),g===null)return;if(_=g.tag,_===5||_===6){l=h=g;continue e}v=v.parentNode}}l=l.return}Rs(function(){var R=h,z=Ut(a),W=[];e:{var U=ou.get(e);if(U!==void 0){var ee=vo,ne=e;switch(e){case"keypress":if(Hi(a)===0)break e;case"keydown":case"keyup":ee=Pf;break;case"focusin":ne="focus",ee=jo;break;case"focusout":ne="blur",ee=jo;break;case"beforeblur":case"afterblur":ee=jo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=$c;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=jf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=$f;break;case nu:case su:case iu:ee=kf;break;case au:ee=Uf;break;case"scroll":ee=wf;break;case"wheel":ee=Ff;break;case"copy":case"cut":case"paste":ee=Ef;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Uc}var se=(t&4)!==0,ft=!se&&e==="scroll",E=se?U!==null?U+"Capture":null:U;se=[];for(var k=R,T;k!==null;){T=k;var K=T.stateNode;if(T.tag===5&&K!==null&&(T=K,E!==null&&(K=gn(k,E),K!=null&&se.push(Qs(k,K,T)))),ft)break;k=k.return}0<se.length&&(U=new ee(U,ne,null,a,z),W.push({event:U,listeners:se}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",ee=e==="mouseout"||e==="pointerout",U&&a!==Un&&(ne=a.relatedTarget||a.fromElement)&&(wn(ne)||ne[Or]))break e;if((ee||U)&&(U=z.window===z?z:(U=z.ownerDocument)?U.defaultView||U.parentWindow:window,ee?(ne=a.relatedTarget||a.toElement,ee=R,ne=ne?wn(ne):null,ne!==null&&(ft=Tr(ne),ne!==ft||ne.tag!==5&&ne.tag!==6)&&(ne=null)):(ee=null,ne=R),ee!==ne)){if(se=$c,K="onMouseLeave",E="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(se=Uc,K="onPointerLeave",E="onPointerEnter",k="pointer"),ft=ee==null?U:es(ee),T=ne==null?U:es(ne),U=new se(K,k+"leave",ee,a,z),U.target=ft,U.relatedTarget=T,K=null,wn(z)===R&&(se=new se(E,k+"enter",ne,a,z),se.target=T,se.relatedTarget=ft,K=se),ft=K,ee&&ne)t:{for(se=ee,E=ne,k=0,T=se;T;T=Xn(T))k++;for(T=0,K=E;K;K=Xn(K))T++;for(;0<k-T;)se=Xn(se),k--;for(;0<T-k;)E=Xn(E),T--;for(;k--;){if(se===E||E!==null&&se===E.alternate)break t;se=Xn(se),E=Xn(E)}se=null}else se=null;ee!==null&&hu(W,U,ee,se,!1),ne!==null&&ft!==null&&hu(W,ft,ne,se,!0)}}e:{if(U=R?es(R):window,ee=U.nodeName&&U.nodeName.toLowerCase(),ee==="select"||ee==="input"&&U.type==="file")var ce=Kf;else if(Vc(U))if(Gc)ce=Xf;else{ce=Jf;var xe=Yf}else(ee=U.nodeName)&&ee.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(ce=Qf);if(ce&&(ce=ce(e,R))){qc(W,ce,a,z);break e}xe&&xe(e,U,R),e==="focusout"&&(xe=U._wrapperState)&&xe.controlled&&U.type==="number"&&me(U,"number",U.value)}switch(xe=R?es(R):window,e){case"focusin":(Vc(xe)||xe.contentEditable==="true")&&(Jn=xe,Co=R,Ks=null);break;case"focusout":Ks=Co=Jn=null;break;case"mousedown":To=!0;break;case"contextmenu":case"mouseup":case"dragend":To=!1,tu(W,a,z);break;case"selectionchange":if(tm)break;case"keydown":case"keyup":tu(W,a,z)}var ye;if(No)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Yn?Wc(e,a)&&(Se="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(zc&&a.locale!=="ko"&&(Yn||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Yn&&(ye=Dc()):(Yr=z,yo="value"in Yr?Yr.value:Yr.textContent,Yn=!0)),xe=Qi(R,Se),0<xe.length&&(Se=new Mc(Se,e,null,a,z),W.push({event:Se,listeners:xe}),ye?Se.data=ye:(ye=Hc(a),ye!==null&&(Se.data=ye)))),(ye=Wf?Hf(e,a):Vf(e,a))&&(R=Qi(R,"onBeforeInput"),0<R.length&&(z=new Mc("onBeforeInput","beforeinput",null,a,z),W.push({event:z,listeners:R}),z.data=ye))}uu(W,t)})}function Qs(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Qi(e,t){for(var a=t+"Capture",l=[];e!==null;){var u=e,h=u.stateNode;u.tag===5&&h!==null&&(u=h,h=gn(e,a),h!=null&&l.unshift(Qs(e,h,u)),h=gn(e,t),h!=null&&l.push(Qs(e,h,u))),e=e.return}return l}function Xn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hu(e,t,a,l,u){for(var h=t._reactName,g=[];a!==null&&a!==l;){var v=a,_=v.alternate,R=v.stateNode;if(_!==null&&_===l)break;v.tag===5&&R!==null&&(v=R,u?(_=gn(a,h),_!=null&&g.unshift(Qs(a,_,v))):u||(_=gn(a,h),_!=null&&g.push(Qs(a,_,v)))),a=a.return}g.length!==0&&e.push({event:t,listeners:g})}var im=/\r\n?/g,am=/\u0000|\uFFFD/g;function fu(e){return(typeof e=="string"?e:""+e).replace(im,`
`).replace(am,"")}function Xi(e,t,a){if(t=fu(t),fu(e)!==t&&a)throw Error(n(425))}function Zi(){}var Do=null,Lo=null;function $o(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mo=typeof setTimeout=="function"?setTimeout:void 0,om=typeof clearTimeout=="function"?clearTimeout:void 0,mu=typeof Promise=="function"?Promise:void 0,lm=typeof queueMicrotask=="function"?queueMicrotask:typeof mu<"u"?function(e){return mu.resolve(null).then(e).catch(cm)}:Mo;function cm(e){setTimeout(function(){throw e})}function Uo(e,t){var a=t,l=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(l===0){e.removeChild(u),Fs(t);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=u}while(a);Fs(t)}function Qr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function pu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}var Zn=Math.random().toString(36).slice(2),kr="__reactFiber$"+Zn,Xs="__reactProps$"+Zn,Or="__reactContainer$"+Zn,zo="__reactEvents$"+Zn,um="__reactListeners$"+Zn,dm="__reactHandles$"+Zn;function wn(e){var t=e[kr];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Or]||a[kr]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=pu(e);e!==null;){if(a=e[kr])return a;e=pu(e)}return t}e=a,a=e.parentNode}return null}function Zs(e){return e=e[kr]||e[Or],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function es(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(n(33))}function ea(e){return e[Xs]||null}var Fo=[],ts=-1;function Xr(e){return{current:e}}function Ze(e){0>ts||(e.current=Fo[ts],Fo[ts]=null,ts--)}function Ke(e,t){ts++,Fo[ts]=e.current,e.current=t}var Zr={},It=Xr(Zr),zt=Xr(!1),bn=Zr;function rs(e,t){var a=e.type.contextTypes;if(!a)return Zr;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var u={},h;for(h in a)u[h]=t[h];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function Ft(e){return e=e.childContextTypes,e!=null}function ta(){Ze(zt),Ze(It)}function gu(e,t,a){if(It.current!==Zr)throw Error(n(168));Ke(It,t),Ke(zt,a)}function xu(e,t,a){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return a;l=l.getChildContext();for(var u in l)if(!(u in t))throw Error(n(108,Te(e)||"Unknown",u));return Y({},a,l)}function ra(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zr,bn=It.current,Ke(It,e),Ke(zt,zt.current),!0}function yu(e,t,a){var l=e.stateNode;if(!l)throw Error(n(169));a?(e=xu(e,t,bn),l.__reactInternalMemoizedMergedChildContext=e,Ze(zt),Ze(It),Ke(It,e)):Ze(zt),Ke(zt,a)}var Rr=null,na=!1,Bo=!1;function vu(e){Rr===null?Rr=[e]:Rr.push(e)}function hm(e){na=!0,vu(e)}function en(){if(!Bo&&Rr!==null){Bo=!0;var e=0,t=Be;try{var a=Rr;for(Be=1;e<a.length;e++){var l=a[e];do l=l(!0);while(l!==null)}Rr=null,na=!1}catch(u){throw Rr!==null&&(Rr=Rr.slice(e+1)),Li(Wn,en),u}finally{Be=t,Bo=!1}}return null}var ns=[],ss=0,sa=null,ia=0,ir=[],ar=0,jn=null,Ir=1,Ar="";function _n(e,t){ns[ss++]=ia,ns[ss++]=sa,sa=e,ia=t}function wu(e,t,a){ir[ar++]=Ir,ir[ar++]=Ar,ir[ar++]=jn,jn=e;var l=Ir;e=Ar;var u=32-Kt(l)-1;l&=~(1<<u),a+=1;var h=32-Kt(t)+u;if(30<h){var g=u-u%5;h=(l&(1<<g)-1).toString(32),l>>=g,u-=g,Ir=1<<32-Kt(t)+u|a<<u|l,Ar=h+e}else Ir=1<<h|a<<u|l,Ar=e}function Wo(e){e.return!==null&&(_n(e,1),wu(e,1,0))}function Ho(e){for(;e===sa;)sa=ns[--ss],ns[ss]=null,ia=ns[--ss],ns[ss]=null;for(;e===jn;)jn=ir[--ar],ir[ar]=null,Ar=ir[--ar],ir[ar]=null,Ir=ir[--ar],ir[ar]=null}var Qt=null,Xt=null,tt=!1,mr=null;function bu(e,t){var a=ur(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,t=e.deletions,t===null?(e.deletions=[a],e.flags|=16):t.push(a)}function ju(e,t){switch(e.tag){case 5:var a=e.type;return t=t.nodeType!==1||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qt=e,Xt=Qr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qt=e,Xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(a=jn!==null?{id:Ir,overflow:Ar}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},a=ur(18,null,null,0),a.stateNode=t,a.return=e,e.child=a,Qt=e,Xt=null,!0):!1;default:return!1}}function Vo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qo(e){if(tt){var t=Xt;if(t){var a=t;if(!ju(e,t)){if(Vo(e))throw Error(n(418));t=Qr(a.nextSibling);var l=Qt;t&&ju(e,t)?bu(l,a):(e.flags=e.flags&-4097|2,tt=!1,Qt=e)}}else{if(Vo(e))throw Error(n(418));e.flags=e.flags&-4097|2,tt=!1,Qt=e}}}function _u(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qt=e}function aa(e){if(e!==Qt)return!1;if(!tt)return _u(e),tt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$o(e.type,e.memoizedProps)),t&&(t=Xt)){if(Vo(e))throw Nu(),Error(n(418));for(;t;)bu(e,t),t=Qr(t.nextSibling)}if(_u(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(t===0){Xt=Qr(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++}e=e.nextSibling}Xt=null}}else Xt=Qt?Qr(e.stateNode.nextSibling):null;return!0}function Nu(){for(var e=Xt;e;)e=Qr(e.nextSibling)}function is(){Xt=Qt=null,tt=!1}function Go(e){mr===null?mr=[e]:mr.push(e)}var fm=X.ReactCurrentBatchConfig;function ei(e,t,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(n(309));var l=a.stateNode}if(!l)throw Error(n(147,e));var u=l,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(g){var v=u.refs;g===null?delete v[h]:v[h]=g},t._stringRef=h,t)}if(typeof e!="string")throw Error(n(284));if(!a._owner)throw Error(n(290,e))}return e}function oa(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ku(e){var t=e._init;return t(e._payload)}function Su(e){function t(E,k){if(e){var T=E.deletions;T===null?(E.deletions=[k],E.flags|=16):T.push(k)}}function a(E,k){if(!e)return null;for(;k!==null;)t(E,k),k=k.sibling;return null}function l(E,k){for(E=new Map;k!==null;)k.key!==null?E.set(k.key,k):E.set(k.index,k),k=k.sibling;return E}function u(E,k){return E=cn(E,k),E.index=0,E.sibling=null,E}function h(E,k,T){return E.index=T,e?(T=E.alternate,T!==null?(T=T.index,T<k?(E.flags|=2,k):T):(E.flags|=2,k)):(E.flags|=1048576,k)}function g(E){return e&&E.alternate===null&&(E.flags|=2),E}function v(E,k,T,K){return k===null||k.tag!==6?(k=Ml(T,E.mode,K),k.return=E,k):(k=u(k,T),k.return=E,k)}function _(E,k,T,K){var ce=T.type;return ce===ie?z(E,k,T.props.children,K,T.key):k!==null&&(k.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===ze&&ku(ce)===k.type)?(K=u(k,T.props),K.ref=ei(E,k,T),K.return=E,K):(K=Ra(T.type,T.key,T.props,null,E.mode,K),K.ref=ei(E,k,T),K.return=E,K)}function R(E,k,T,K){return k===null||k.tag!==4||k.stateNode.containerInfo!==T.containerInfo||k.stateNode.implementation!==T.implementation?(k=Ul(T,E.mode,K),k.return=E,k):(k=u(k,T.children||[]),k.return=E,k)}function z(E,k,T,K,ce){return k===null||k.tag!==7?(k=Rn(T,E.mode,K,ce),k.return=E,k):(k=u(k,T),k.return=E,k)}function W(E,k,T){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Ml(""+k,E.mode,T),k.return=E,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case je:return T=Ra(k.type,k.key,k.props,null,E.mode,T),T.ref=ei(E,null,k),T.return=E,T;case he:return k=Ul(k,E.mode,T),k.return=E,k;case ze:var K=k._init;return W(E,K(k._payload),T)}if(ke(k)||fe(k))return k=Rn(k,E.mode,T,null),k.return=E,k;oa(E,k)}return null}function U(E,k,T,K){var ce=k!==null?k.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return ce!==null?null:v(E,k,""+T,K);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case je:return T.key===ce?_(E,k,T,K):null;case he:return T.key===ce?R(E,k,T,K):null;case ze:return ce=T._init,U(E,k,ce(T._payload),K)}if(ke(T)||fe(T))return ce!==null?null:z(E,k,T,K,null);oa(E,T)}return null}function ee(E,k,T,K,ce){if(typeof K=="string"&&K!==""||typeof K=="number")return E=E.get(T)||null,v(k,E,""+K,ce);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case je:return E=E.get(K.key===null?T:K.key)||null,_(k,E,K,ce);case he:return E=E.get(K.key===null?T:K.key)||null,R(k,E,K,ce);case ze:var xe=K._init;return ee(E,k,T,xe(K._payload),ce)}if(ke(K)||fe(K))return E=E.get(T)||null,z(k,E,K,ce,null);oa(k,K)}return null}function ne(E,k,T,K){for(var ce=null,xe=null,ye=k,Se=k=0,Nt=null;ye!==null&&Se<T.length;Se++){ye.index>Se?(Nt=ye,ye=null):Nt=ye.sibling;var Ue=U(E,ye,T[Se],K);if(Ue===null){ye===null&&(ye=Nt);break}e&&ye&&Ue.alternate===null&&t(E,ye),k=h(Ue,k,Se),xe===null?ce=Ue:xe.sibling=Ue,xe=Ue,ye=Nt}if(Se===T.length)return a(E,ye),tt&&_n(E,Se),ce;if(ye===null){for(;Se<T.length;Se++)ye=W(E,T[Se],K),ye!==null&&(k=h(ye,k,Se),xe===null?ce=ye:xe.sibling=ye,xe=ye);return tt&&_n(E,Se),ce}for(ye=l(E,ye);Se<T.length;Se++)Nt=ee(ye,E,Se,T[Se],K),Nt!==null&&(e&&Nt.alternate!==null&&ye.delete(Nt.key===null?Se:Nt.key),k=h(Nt,k,Se),xe===null?ce=Nt:xe.sibling=Nt,xe=Nt);return e&&ye.forEach(function(un){return t(E,un)}),tt&&_n(E,Se),ce}function se(E,k,T,K){var ce=fe(T);if(typeof ce!="function")throw Error(n(150));if(T=ce.call(T),T==null)throw Error(n(151));for(var xe=ce=null,ye=k,Se=k=0,Nt=null,Ue=T.next();ye!==null&&!Ue.done;Se++,Ue=T.next()){ye.index>Se?(Nt=ye,ye=null):Nt=ye.sibling;var un=U(E,ye,Ue.value,K);if(un===null){ye===null&&(ye=Nt);break}e&&ye&&un.alternate===null&&t(E,ye),k=h(un,k,Se),xe===null?ce=un:xe.sibling=un,xe=un,ye=Nt}if(Ue.done)return a(E,ye),tt&&_n(E,Se),ce;if(ye===null){for(;!Ue.done;Se++,Ue=T.next())Ue=W(E,Ue.value,K),Ue!==null&&(k=h(Ue,k,Se),xe===null?ce=Ue:xe.sibling=Ue,xe=Ue);return tt&&_n(E,Se),ce}for(ye=l(E,ye);!Ue.done;Se++,Ue=T.next())Ue=ee(ye,E,Se,Ue.value,K),Ue!==null&&(e&&Ue.alternate!==null&&ye.delete(Ue.key===null?Se:Ue.key),k=h(Ue,k,Se),xe===null?ce=Ue:xe.sibling=Ue,xe=Ue);return e&&ye.forEach(function(qm){return t(E,qm)}),tt&&_n(E,Se),ce}function ft(E,k,T,K){if(typeof T=="object"&&T!==null&&T.type===ie&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case je:e:{for(var ce=T.key,xe=k;xe!==null;){if(xe.key===ce){if(ce=T.type,ce===ie){if(xe.tag===7){a(E,xe.sibling),k=u(xe,T.props.children),k.return=E,E=k;break e}}else if(xe.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===ze&&ku(ce)===xe.type){a(E,xe.sibling),k=u(xe,T.props),k.ref=ei(E,xe,T),k.return=E,E=k;break e}a(E,xe);break}else t(E,xe);xe=xe.sibling}T.type===ie?(k=Rn(T.props.children,E.mode,K,T.key),k.return=E,E=k):(K=Ra(T.type,T.key,T.props,null,E.mode,K),K.ref=ei(E,k,T),K.return=E,E=K)}return g(E);case he:e:{for(xe=T.key;k!==null;){if(k.key===xe)if(k.tag===4&&k.stateNode.containerInfo===T.containerInfo&&k.stateNode.implementation===T.implementation){a(E,k.sibling),k=u(k,T.children||[]),k.return=E,E=k;break e}else{a(E,k);break}else t(E,k);k=k.sibling}k=Ul(T,E.mode,K),k.return=E,E=k}return g(E);case ze:return xe=T._init,ft(E,k,xe(T._payload),K)}if(ke(T))return ne(E,k,T,K);if(fe(T))return se(E,k,T,K);oa(E,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,k!==null&&k.tag===6?(a(E,k.sibling),k=u(k,T),k.return=E,E=k):(a(E,k),k=Ml(T,E.mode,K),k.return=E,E=k),g(E)):a(E,k)}return ft}var as=Su(!0),Eu=Su(!1),la=Xr(null),ca=null,os=null,Ko=null;function Yo(){Ko=os=ca=null}function Jo(e){var t=la.current;Ze(la),e._currentValue=t}function Qo(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function ls(e,t){ca=e,Ko=os=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Bt=!0),e.firstContext=null)}function or(e){var t=e._currentValue;if(Ko!==e)if(e={context:e,memoizedValue:t,next:null},os===null){if(ca===null)throw Error(n(308));os=e,ca.dependencies={lanes:0,firstContext:e}}else os=os.next=e;return t}var Nn=null;function Xo(e){Nn===null?Nn=[e]:Nn.push(e)}function Cu(e,t,a,l){var u=t.interleaved;return u===null?(a.next=a,Xo(t)):(a.next=u.next,u.next=a),t.interleaved=a,Pr(e,l)}function Pr(e,t){e.lanes|=t;var a=e.alternate;for(a!==null&&(a.lanes|=t),a=e,e=e.return;e!==null;)e.childLanes|=t,a=e.alternate,a!==null&&(a.childLanes|=t),a=e,e=e.return;return a.tag===3?a.stateNode:null}var tn=!1;function Zo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rn(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Me&2)!==0){var u=l.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),l.pending=t,Pr(e,a)}return u=l.interleaved,u===null?(t.next=t,Xo(l)):(t.next=u.next,u.next=t),l.interleaved=t,Pr(e,a)}function ua(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Yt(e,a)}}function Ou(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var u=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var g={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};h===null?u=h=g:h=h.next=g,a=a.next}while(a!==null);h===null?u=h=t:h=h.next=t}else u=h=t;a={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:l.shared,effects:l.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function da(e,t,a,l){var u=e.updateQueue;tn=!1;var h=u.firstBaseUpdate,g=u.lastBaseUpdate,v=u.shared.pending;if(v!==null){u.shared.pending=null;var _=v,R=_.next;_.next=null,g===null?h=R:g.next=R,g=_;var z=e.alternate;z!==null&&(z=z.updateQueue,v=z.lastBaseUpdate,v!==g&&(v===null?z.firstBaseUpdate=R:v.next=R,z.lastBaseUpdate=_))}if(h!==null){var W=u.baseState;g=0,z=R=_=null,v=h;do{var U=v.lane,ee=v.eventTime;if((l&U)===U){z!==null&&(z=z.next={eventTime:ee,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var ne=e,se=v;switch(U=t,ee=a,se.tag){case 1:if(ne=se.payload,typeof ne=="function"){W=ne.call(ee,W,U);break e}W=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=se.payload,U=typeof ne=="function"?ne.call(ee,W,U):ne,U==null)break e;W=Y({},W,U);break e;case 2:tn=!0}}v.callback!==null&&v.lane!==0&&(e.flags|=64,U=u.effects,U===null?u.effects=[v]:U.push(v))}else ee={eventTime:ee,lane:U,tag:v.tag,payload:v.payload,callback:v.callback,next:null},z===null?(R=z=ee,_=W):z=z.next=ee,g|=U;if(v=v.next,v===null){if(v=u.shared.pending,v===null)break;U=v,v=U.next,U.next=null,u.lastBaseUpdate=U,u.shared.pending=null}}while(!0);if(z===null&&(_=W),u.baseState=_,u.firstBaseUpdate=R,u.lastBaseUpdate=z,t=u.shared.interleaved,t!==null){u=t;do g|=u.lane,u=u.next;while(u!==t)}else h===null&&(u.shared.lanes=0);En|=g,e.lanes=g,e.memoizedState=W}}function Ru(e,t,a){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],u=l.callback;if(u!==null){if(l.callback=null,l=a,typeof u!="function")throw Error(n(191,u));u.call(l)}}}var ti={},Sr=Xr(ti),ri=Xr(ti),ni=Xr(ti);function kn(e){if(e===ti)throw Error(n(174));return e}function el(e,t){switch(Ke(ni,t),Ke(ri,e),Ke(Sr,ti),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:He(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=He(t,e)}Ze(Sr),Ke(Sr,t)}function cs(){Ze(Sr),Ze(ri),Ze(ni)}function Iu(e){kn(ni.current);var t=kn(Sr.current),a=He(t,e.type);t!==a&&(Ke(ri,e),Ke(Sr,a))}function tl(e){ri.current===e&&(Ze(Sr),Ze(ri))}var st=Xr(0);function ha(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rl=[];function nl(){for(var e=0;e<rl.length;e++)rl[e]._workInProgressVersionPrimary=null;rl.length=0}var fa=X.ReactCurrentDispatcher,sl=X.ReactCurrentBatchConfig,Sn=0,it=null,yt=null,jt=null,ma=!1,si=!1,ii=0,mm=0;function At(){throw Error(n(321))}function il(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!fr(e[a],t[a]))return!1;return!0}function al(e,t,a,l,u,h){if(Sn=h,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fa.current=e===null||e.memoizedState===null?ym:vm,e=a(l,u),si){h=0;do{if(si=!1,ii=0,25<=h)throw Error(n(301));h+=1,jt=yt=null,t.updateQueue=null,fa.current=wm,e=a(l,u)}while(si)}if(fa.current=xa,t=yt!==null&&yt.next!==null,Sn=0,jt=yt=it=null,ma=!1,t)throw Error(n(300));return e}function ol(){var e=ii!==0;return ii=0,e}function Er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?it.memoizedState=jt=e:jt=jt.next=e,jt}function lr(){if(yt===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=yt.next;var t=jt===null?it.memoizedState:jt.next;if(t!==null)jt=t,yt=e;else{if(e===null)throw Error(n(310));yt=e,e={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},jt===null?it.memoizedState=jt=e:jt=jt.next=e}return jt}function ai(e,t){return typeof t=="function"?t(e):t}function ll(e){var t=lr(),a=t.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=e;var l=yt,u=l.baseQueue,h=a.pending;if(h!==null){if(u!==null){var g=u.next;u.next=h.next,h.next=g}l.baseQueue=u=h,a.pending=null}if(u!==null){h=u.next,l=l.baseState;var v=g=null,_=null,R=h;do{var z=R.lane;if((Sn&z)===z)_!==null&&(_=_.next={lane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),l=R.hasEagerState?R.eagerState:e(l,R.action);else{var W={lane:z,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null};_===null?(v=_=W,g=l):_=_.next=W,it.lanes|=z,En|=z}R=R.next}while(R!==null&&R!==h);_===null?g=l:_.next=v,fr(l,t.memoizedState)||(Bt=!0),t.memoizedState=l,t.baseState=g,t.baseQueue=_,a.lastRenderedState=l}if(e=a.interleaved,e!==null){u=e;do h=u.lane,it.lanes|=h,En|=h,u=u.next;while(u!==e)}else u===null&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function cl(e){var t=lr(),a=t.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=e;var l=a.dispatch,u=a.pending,h=t.memoizedState;if(u!==null){a.pending=null;var g=u=u.next;do h=e(h,g.action),g=g.next;while(g!==u);fr(h,t.memoizedState)||(Bt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),a.lastRenderedState=h}return[h,l]}function Au(){}function Pu(e,t){var a=it,l=lr(),u=t(),h=!fr(l.memoizedState,u);if(h&&(l.memoizedState=u,Bt=!0),l=l.queue,ul($u.bind(null,a,l,e),[e]),l.getSnapshot!==t||h||jt!==null&&jt.memoizedState.tag&1){if(a.flags|=2048,oi(9,Lu.bind(null,a,l,u,t),void 0,null),_t===null)throw Error(n(349));(Sn&30)!==0||Du(a,t,u)}return u}function Du(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=it.updateQueue,t===null?(t={lastEffect:null,stores:null},it.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Lu(e,t,a,l){t.value=a,t.getSnapshot=l,Mu(t)&&Uu(e)}function $u(e,t,a){return a(function(){Mu(t)&&Uu(e)})}function Mu(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!fr(e,a)}catch{return!0}}function Uu(e){var t=Pr(e,1);t!==null&&yr(t,e,1,-1)}function zu(e){var t=Er();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:e},t.queue=e,e=e.dispatch=xm.bind(null,it,e),[t.memoizedState,e]}function oi(e,t,a,l){return e={tag:e,create:t,destroy:a,deps:l,next:null},t=it.updateQueue,t===null?(t={lastEffect:null,stores:null},it.updateQueue=t,t.lastEffect=e.next=e):(a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e)),e}function Fu(){return lr().memoizedState}function pa(e,t,a,l){var u=Er();it.flags|=e,u.memoizedState=oi(1|t,a,void 0,l===void 0?null:l)}function ga(e,t,a,l){var u=lr();l=l===void 0?null:l;var h=void 0;if(yt!==null){var g=yt.memoizedState;if(h=g.destroy,l!==null&&il(l,g.deps)){u.memoizedState=oi(t,a,h,l);return}}it.flags|=e,u.memoizedState=oi(1|t,a,h,l)}function Bu(e,t){return pa(8390656,8,e,t)}function ul(e,t){return ga(2048,8,e,t)}function Wu(e,t){return ga(4,2,e,t)}function Hu(e,t){return ga(4,4,e,t)}function Vu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qu(e,t,a){return a=a!=null?a.concat([e]):null,ga(4,4,Vu.bind(null,t,e),a)}function dl(){}function Gu(e,t){var a=lr();t=t===void 0?null:t;var l=a.memoizedState;return l!==null&&t!==null&&il(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function Ku(e,t){var a=lr();t=t===void 0?null:t;var l=a.memoizedState;return l!==null&&t!==null&&il(t,l[1])?l[0]:(e=e(),a.memoizedState=[e,t],e)}function Yu(e,t,a){return(Sn&21)===0?(e.baseState&&(e.baseState=!1,Bt=!0),e.memoizedState=a):(fr(a,t)||(a=ve(),it.lanes|=a,En|=a,e.baseState=!0),t)}function pm(e,t){var a=Be;Be=a!==0&&4>a?a:4,e(!0);var l=sl.transition;sl.transition={};try{e(!1),t()}finally{Be=a,sl.transition=l}}function Ju(){return lr().memoizedState}function gm(e,t,a){var l=on(e);if(a={lane:l,action:a,hasEagerState:!1,eagerState:null,next:null},Qu(e))Xu(t,a);else if(a=Cu(e,t,a,l),a!==null){var u=$t();yr(a,e,l,u),Zu(a,t,l)}}function xm(e,t,a){var l=on(e),u={lane:l,action:a,hasEagerState:!1,eagerState:null,next:null};if(Qu(e))Xu(t,u);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var g=t.lastRenderedState,v=h(g,a);if(u.hasEagerState=!0,u.eagerState=v,fr(v,g)){var _=t.interleaved;_===null?(u.next=u,Xo(t)):(u.next=_.next,_.next=u),t.interleaved=u;return}}catch{}finally{}a=Cu(e,t,u,l),a!==null&&(u=$t(),yr(a,e,l,u),Zu(a,t,l))}}function Qu(e){var t=e.alternate;return e===it||t!==null&&t===it}function Xu(e,t){si=ma=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Zu(e,t,a){if((a&4194240)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Yt(e,a)}}var xa={readContext:or,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},ym={readContext:or,useCallback:function(e,t){return Er().memoizedState=[e,t===void 0?null:t],e},useContext:or,useEffect:Bu,useImperativeHandle:function(e,t,a){return a=a!=null?a.concat([e]):null,pa(4194308,4,Vu.bind(null,t,e),a)},useLayoutEffect:function(e,t){return pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return pa(4,2,e,t)},useMemo:function(e,t){var a=Er();return t=t===void 0?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var l=Er();return t=a!==void 0?a(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=gm.bind(null,it,e),[l.memoizedState,e]},useRef:function(e){var t=Er();return e={current:e},t.memoizedState=e},useState:zu,useDebugValue:dl,useDeferredValue:function(e){return Er().memoizedState=e},useTransition:function(){var e=zu(!1),t=e[0];return e=pm.bind(null,e[1]),Er().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var l=it,u=Er();if(tt){if(a===void 0)throw Error(n(407));a=a()}else{if(a=t(),_t===null)throw Error(n(349));(Sn&30)!==0||Du(l,t,a)}u.memoizedState=a;var h={value:a,getSnapshot:t};return u.queue=h,Bu($u.bind(null,l,h,e),[e]),l.flags|=2048,oi(9,Lu.bind(null,l,h,a,t),void 0,null),a},useId:function(){var e=Er(),t=_t.identifierPrefix;if(tt){var a=Ar,l=Ir;a=(l&~(1<<32-Kt(l)-1)).toString(32)+a,t=":"+t+"R"+a,a=ii++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=mm++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vm={readContext:or,useCallback:Gu,useContext:or,useEffect:ul,useImperativeHandle:qu,useInsertionEffect:Wu,useLayoutEffect:Hu,useMemo:Ku,useReducer:ll,useRef:Fu,useState:function(){return ll(ai)},useDebugValue:dl,useDeferredValue:function(e){var t=lr();return Yu(t,yt.memoizedState,e)},useTransition:function(){var e=ll(ai)[0],t=lr().memoizedState;return[e,t]},useMutableSource:Au,useSyncExternalStore:Pu,useId:Ju,unstable_isNewReconciler:!1},wm={readContext:or,useCallback:Gu,useContext:or,useEffect:ul,useImperativeHandle:qu,useInsertionEffect:Wu,useLayoutEffect:Hu,useMemo:Ku,useReducer:cl,useRef:Fu,useState:function(){return cl(ai)},useDebugValue:dl,useDeferredValue:function(e){var t=lr();return yt===null?t.memoizedState=e:Yu(t,yt.memoizedState,e)},useTransition:function(){var e=cl(ai)[0],t=lr().memoizedState;return[e,t]},useMutableSource:Au,useSyncExternalStore:Pu,useId:Ju,unstable_isNewReconciler:!1};function pr(e,t){if(e&&e.defaultProps){t=Y({},t),e=e.defaultProps;for(var a in e)t[a]===void 0&&(t[a]=e[a]);return t}return t}function hl(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:Y({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ya={isMounted:function(e){return(e=e._reactInternals)?Tr(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var l=$t(),u=on(e),h=Dr(l,u);h.payload=t,a!=null&&(h.callback=a),t=rn(e,h,u),t!==null&&(yr(t,e,u,l),ua(t,e,u))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=$t(),u=on(e),h=Dr(l,u);h.tag=1,h.payload=t,a!=null&&(h.callback=a),t=rn(e,h,u),t!==null&&(yr(t,e,u,l),ua(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=$t(),l=on(e),u=Dr(a,l);u.tag=2,t!=null&&(u.callback=t),t=rn(e,u,l),t!==null&&(yr(t,e,l,a),ua(t,e,l))}};function ed(e,t,a,l,u,h,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,g):t.prototype&&t.prototype.isPureReactComponent?!Gs(a,l)||!Gs(u,h):!0}function td(e,t,a){var l=!1,u=Zr,h=t.contextType;return typeof h=="object"&&h!==null?h=or(h):(u=Ft(t)?bn:It.current,l=t.contextTypes,h=(l=l!=null)?rs(e,u):Zr),t=new t(a,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=h),t}function rd(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function fl(e,t,a,l){var u=e.stateNode;u.props=a,u.state=e.memoizedState,u.refs={},Zo(e);var h=t.contextType;typeof h=="object"&&h!==null?u.context=or(h):(h=Ft(t)?bn:It.current,u.context=rs(e,h)),u.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(hl(e,t,h,a),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&ya.enqueueReplaceState(u,u.state,null),da(e,a,u,l),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function us(e,t){try{var a="",l=t;do a+=Ce(l),l=l.return;while(l);var u=a}catch(h){u=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:u,digest:null}}function ml(e,t,a){return{value:e,source:null,stack:a??null,digest:t??null}}function pl(e,t){try{console.error(t.value)}catch(a){setTimeout(function(){throw a})}}var bm=typeof WeakMap=="function"?WeakMap:Map;function nd(e,t,a){a=Dr(-1,a),a.tag=3,a.payload={element:null};var l=t.value;return a.callback=function(){ka||(ka=!0,Ol=l),pl(e,t)},a}function sd(e,t,a){a=Dr(-1,a),a.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var u=t.value;a.payload=function(){return l(u)},a.callback=function(){pl(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(a.callback=function(){pl(e,t),typeof l!="function"&&(sn===null?sn=new Set([this]):sn.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),a}function id(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new bm;var u=new Set;l.set(t,u)}else u=l.get(t),u===void 0&&(u=new Set,l.set(t,u));u.has(a)||(u.add(a),e=Dm.bind(null,e,t,a),t.then(e,e))}function ad(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function od(e,t,a,l,u){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(t=Dr(-1,1),t.tag=2,rn(a,t,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var jm=X.ReactCurrentOwner,Bt=!1;function Lt(e,t,a,l){t.child=e===null?Eu(t,null,a,l):as(t,e.child,a,l)}function ld(e,t,a,l,u){a=a.render;var h=t.ref;return ls(t,u),l=al(e,t,a,l,h,u),a=ol(),e!==null&&!Bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Lr(e,t,u)):(tt&&a&&Wo(t),t.flags|=1,Lt(e,t,l,u),t.child)}function cd(e,t,a,l,u){if(e===null){var h=a.type;return typeof h=="function"&&!$l(h)&&h.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(t.tag=15,t.type=h,ud(e,t,h,l,u)):(e=Ra(a.type,null,l,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&u)===0){var g=h.memoizedProps;if(a=a.compare,a=a!==null?a:Gs,a(g,l)&&e.ref===t.ref)return Lr(e,t,u)}return t.flags|=1,e=cn(h,l),e.ref=t.ref,e.return=t,t.child=e}function ud(e,t,a,l,u){if(e!==null){var h=e.memoizedProps;if(Gs(h,l)&&e.ref===t.ref)if(Bt=!1,t.pendingProps=l=h,(e.lanes&u)!==0)(e.flags&131072)!==0&&(Bt=!0);else return t.lanes=e.lanes,Lr(e,t,u)}return gl(e,t,a,l,u)}function dd(e,t,a){var l=t.pendingProps,u=l.children,h=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(hs,Zt),Zt|=a;else{if((a&1073741824)===0)return e=h!==null?h.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ke(hs,Zt),Zt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=h!==null?h.baseLanes:a,Ke(hs,Zt),Zt|=l}else h!==null?(l=h.baseLanes|a,t.memoizedState=null):l=a,Ke(hs,Zt),Zt|=l;return Lt(e,t,u,a),t.child}function hd(e,t){var a=t.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function gl(e,t,a,l,u){var h=Ft(a)?bn:It.current;return h=rs(t,h),ls(t,u),a=al(e,t,a,l,h,u),l=ol(),e!==null&&!Bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Lr(e,t,u)):(tt&&l&&Wo(t),t.flags|=1,Lt(e,t,a,u),t.child)}function fd(e,t,a,l,u){if(Ft(a)){var h=!0;ra(t)}else h=!1;if(ls(t,u),t.stateNode===null)wa(e,t),td(t,a,l),fl(t,a,l,u),l=!0;else if(e===null){var g=t.stateNode,v=t.memoizedProps;g.props=v;var _=g.context,R=a.contextType;typeof R=="object"&&R!==null?R=or(R):(R=Ft(a)?bn:It.current,R=rs(t,R));var z=a.getDerivedStateFromProps,W=typeof z=="function"||typeof g.getSnapshotBeforeUpdate=="function";W||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(v!==l||_!==R)&&rd(t,g,l,R),tn=!1;var U=t.memoizedState;g.state=U,da(t,l,g,u),_=t.memoizedState,v!==l||U!==_||zt.current||tn?(typeof z=="function"&&(hl(t,a,z,l),_=t.memoizedState),(v=tn||ed(t,a,v,l,U,_,R))?(W||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=_),g.props=l,g.state=_,g.context=R,l=v):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{g=t.stateNode,Tu(e,t),v=t.memoizedProps,R=t.type===t.elementType?v:pr(t.type,v),g.props=R,W=t.pendingProps,U=g.context,_=a.contextType,typeof _=="object"&&_!==null?_=or(_):(_=Ft(a)?bn:It.current,_=rs(t,_));var ee=a.getDerivedStateFromProps;(z=typeof ee=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(v!==W||U!==_)&&rd(t,g,l,_),tn=!1,U=t.memoizedState,g.state=U,da(t,l,g,u);var ne=t.memoizedState;v!==W||U!==ne||zt.current||tn?(typeof ee=="function"&&(hl(t,a,ee,l),ne=t.memoizedState),(R=tn||ed(t,a,R,l,U,ne,_)||!1)?(z||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,ne,_),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,ne,_)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=ne),g.props=l,g.state=ne,g.context=_,l=R):(typeof g.componentDidUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),l=!1)}return xl(e,t,a,l,h,u)}function xl(e,t,a,l,u,h){hd(e,t);var g=(t.flags&128)!==0;if(!l&&!g)return u&&yu(t,a,!1),Lr(e,t,h);l=t.stateNode,jm.current=t;var v=g&&typeof a.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&g?(t.child=as(t,e.child,null,h),t.child=as(t,null,v,h)):Lt(e,t,v,h),t.memoizedState=l.state,u&&yu(t,a,!0),t.child}function md(e){var t=e.stateNode;t.pendingContext?gu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gu(e,t.context,!1),el(e,t.containerInfo)}function pd(e,t,a,l,u){return is(),Go(u),t.flags|=256,Lt(e,t,a,l),t.child}var yl={dehydrated:null,treeContext:null,retryLane:0};function vl(e){return{baseLanes:e,cachePool:null,transitions:null}}function gd(e,t,a){var l=t.pendingProps,u=st.current,h=!1,g=(t.flags&128)!==0,v;if((v=g)||(v=e!==null&&e.memoizedState===null?!1:(u&2)!==0),v?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),Ke(st,u&1),e===null)return qo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=l.children,e=l.fallback,h?(l=t.mode,h=t.child,g={mode:"hidden",children:g},(l&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=g):h=Ia(g,l,0,null),e=Rn(e,l,a,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=vl(a),t.memoizedState=yl,e):wl(t,g));if(u=e.memoizedState,u!==null&&(v=u.dehydrated,v!==null))return _m(e,t,g,l,v,u,a);if(h){h=l.fallback,g=t.mode,u=e.child,v=u.sibling;var _={mode:"hidden",children:l.children};return(g&1)===0&&t.child!==u?(l=t.child,l.childLanes=0,l.pendingProps=_,t.deletions=null):(l=cn(u,_),l.subtreeFlags=u.subtreeFlags&14680064),v!==null?h=cn(v,h):(h=Rn(h,g,a,null),h.flags|=2),h.return=t,l.return=t,l.sibling=h,t.child=l,l=h,h=t.child,g=e.child.memoizedState,g=g===null?vl(a):{baseLanes:g.baseLanes|a,cachePool:null,transitions:g.transitions},h.memoizedState=g,h.childLanes=e.childLanes&~a,t.memoizedState=yl,l}return h=e.child,e=h.sibling,l=cn(h,{mode:"visible",children:l.children}),(t.mode&1)===0&&(l.lanes=a),l.return=t,l.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=l,t.memoizedState=null,l}function wl(e,t){return t=Ia({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function va(e,t,a,l){return l!==null&&Go(l),as(t,e.child,null,a),e=wl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _m(e,t,a,l,u,h,g){if(a)return t.flags&256?(t.flags&=-257,l=ml(Error(n(422))),va(e,t,g,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=l.fallback,u=t.mode,l=Ia({mode:"visible",children:l.children},u,0,null),h=Rn(h,u,g,null),h.flags|=2,l.return=t,h.return=t,l.sibling=h,t.child=l,(t.mode&1)!==0&&as(t,e.child,null,g),t.child.memoizedState=vl(g),t.memoizedState=yl,h);if((t.mode&1)===0)return va(e,t,g,null);if(u.data==="$!"){if(l=u.nextSibling&&u.nextSibling.dataset,l)var v=l.dgst;return l=v,h=Error(n(419)),l=ml(h,l,void 0),va(e,t,g,l)}if(v=(g&e.childLanes)!==0,Bt||v){if(l=_t,l!==null){switch(g&-g){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(l.suspendedLanes|g))!==0?0:u,u!==0&&u!==h.retryLane&&(h.retryLane=u,Pr(e,u),yr(l,e,u,-1))}return Ll(),l=ml(Error(n(421))),va(e,t,g,l)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=Lm.bind(null,e),u._reactRetry=t,null):(e=h.treeContext,Xt=Qr(u.nextSibling),Qt=t,tt=!0,mr=null,e!==null&&(ir[ar++]=Ir,ir[ar++]=Ar,ir[ar++]=jn,Ir=e.id,Ar=e.overflow,jn=t),t=wl(t,l.children),t.flags|=4096,t)}function xd(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Qo(e.return,t,a)}function bl(e,t,a,l,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:u}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=a,h.tailMode=u)}function yd(e,t,a){var l=t.pendingProps,u=l.revealOrder,h=l.tail;if(Lt(e,t,l.children,a),l=st.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xd(e,a,t);else if(e.tag===19)xd(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ke(st,l),(t.mode&1)===0)t.memoizedState=null;else switch(u){case"forwards":for(a=t.child,u=null;a!==null;)e=a.alternate,e!==null&&ha(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=t.child,t.child=null):(u=a.sibling,a.sibling=null),bl(t,!1,u,a,h);break;case"backwards":for(a=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&ha(e)===null){t.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}bl(t,!0,a,null,h);break;case"together":bl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wa(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Lr(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),En|=t.lanes,(a&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(n(153));if(t.child!==null){for(e=t.child,a=cn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=cn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Nm(e,t,a){switch(t.tag){case 3:md(t),is();break;case 5:Iu(t);break;case 1:Ft(t.type)&&ra(t);break;case 4:el(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,u=t.memoizedProps.value;Ke(la,l._currentValue),l._currentValue=u;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Ke(st,st.current&1),t.flags|=128,null):(a&t.child.childLanes)!==0?gd(e,t,a):(Ke(st,st.current&1),e=Lr(e,t,a),e!==null?e.sibling:null);Ke(st,st.current&1);break;case 19:if(l=(a&t.childLanes)!==0,(e.flags&128)!==0){if(l)return yd(e,t,a);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Ke(st,st.current),l)break;return null;case 22:case 23:return t.lanes=0,dd(e,t,a)}return Lr(e,t,a)}var vd,jl,wd,bd;vd=function(e,t){for(var a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},jl=function(){},wd=function(e,t,a,l){var u=e.memoizedProps;if(u!==l){e=t.stateNode,kn(Sr.current);var h=null;switch(a){case"input":u=nr(e,u),l=nr(e,l),h=[];break;case"select":u=Y({},u,{value:void 0}),l=Y({},l,{value:void 0}),h=[];break;case"textarea":u=Fe(e,u),l=Fe(e,l),h=[];break;default:typeof u.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Zi)}mt(a,l);var g;a=null;for(R in u)if(!l.hasOwnProperty(R)&&u.hasOwnProperty(R)&&u[R]!=null)if(R==="style"){var v=u[R];for(g in v)v.hasOwnProperty(g)&&(a||(a={}),a[g]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(c.hasOwnProperty(R)?h||(h=[]):(h=h||[]).push(R,null));for(R in l){var _=l[R];if(v=u!=null?u[R]:void 0,l.hasOwnProperty(R)&&_!==v&&(_!=null||v!=null))if(R==="style")if(v){for(g in v)!v.hasOwnProperty(g)||_&&_.hasOwnProperty(g)||(a||(a={}),a[g]="");for(g in _)_.hasOwnProperty(g)&&v[g]!==_[g]&&(a||(a={}),a[g]=_[g])}else a||(h||(h=[]),h.push(R,a)),a=_;else R==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,v=v?v.__html:void 0,_!=null&&v!==_&&(h=h||[]).push(R,_)):R==="children"?typeof _!="string"&&typeof _!="number"||(h=h||[]).push(R,""+_):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(c.hasOwnProperty(R)?(_!=null&&R==="onScroll"&&Xe("scroll",e),h||v===_||(h=[])):(h=h||[]).push(R,_))}a&&(h=h||[]).push("style",a);var R=h;(t.updateQueue=R)&&(t.flags|=4)}},bd=function(e,t,a,l){a!==l&&(t.flags|=4)};function li(e,t){if(!tt)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags&14680064,l|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function km(e,t,a){var l=t.pendingProps;switch(Ho(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(t),null;case 1:return Ft(t.type)&&ta(),Pt(t),null;case 3:return l=t.stateNode,cs(),Ze(zt),Ze(It),nl(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(aa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,mr!==null&&(Al(mr),mr=null))),jl(e,t),Pt(t),null;case 5:tl(t);var u=kn(ni.current);if(a=t.type,e!==null&&t.stateNode!=null)wd(e,t,a,l,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(n(166));return Pt(t),null}if(e=kn(Sr.current),aa(t)){l=t.stateNode,a=t.type;var h=t.memoizedProps;switch(l[kr]=t,l[Xs]=h,e=(t.mode&1)!==0,a){case"dialog":Xe("cancel",l),Xe("close",l);break;case"iframe":case"object":case"embed":Xe("load",l);break;case"video":case"audio":for(u=0;u<Ys.length;u++)Xe(Ys[u],l);break;case"source":Xe("error",l);break;case"img":case"image":case"link":Xe("error",l),Xe("load",l);break;case"details":Xe("toggle",l);break;case"input":hr(l,h),Xe("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!h.multiple},Xe("invalid",l);break;case"textarea":Ge(l,h),Xe("invalid",l)}mt(a,h),u=null;for(var g in h)if(h.hasOwnProperty(g)){var v=h[g];g==="children"?typeof v=="string"?l.textContent!==v&&(h.suppressHydrationWarning!==!0&&Xi(l.textContent,v,e),u=["children",v]):typeof v=="number"&&l.textContent!==""+v&&(h.suppressHydrationWarning!==!0&&Xi(l.textContent,v,e),u=["children",""+v]):c.hasOwnProperty(g)&&v!=null&&g==="onScroll"&&Xe("scroll",l)}switch(a){case"input":bt(l),Z(l,h,!0);break;case"textarea":bt(l),qt(l);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(l.onclick=Zi)}l=u,t.updateQueue=l,l!==null&&(t.flags|=4)}else{g=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qe(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=g.createElement(a,{is:l.is}):(e=g.createElement(a),a==="select"&&(g=e,l.multiple?g.multiple=!0:l.size&&(g.size=l.size))):e=g.createElementNS(e,a),e[kr]=t,e[Xs]=l,vd(e,t,!1,!1),t.stateNode=e;e:{switch(g=ot(a,l),a){case"dialog":Xe("cancel",e),Xe("close",e),u=l;break;case"iframe":case"object":case"embed":Xe("load",e),u=l;break;case"video":case"audio":for(u=0;u<Ys.length;u++)Xe(Ys[u],e);u=l;break;case"source":Xe("error",e),u=l;break;case"img":case"image":case"link":Xe("error",e),Xe("load",e),u=l;break;case"details":Xe("toggle",e),u=l;break;case"input":hr(e,l),u=nr(e,l),Xe("invalid",e);break;case"option":u=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},u=Y({},l,{value:void 0}),Xe("invalid",e);break;case"textarea":Ge(e,l),u=Fe(e,l),Xe("invalid",e);break;default:u=l}mt(a,u),v=u;for(h in v)if(v.hasOwnProperty(h)){var _=v[h];h==="style"?qe(e,_):h==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&ht(e,_)):h==="children"?typeof _=="string"?(a!=="textarea"||_!=="")&&V(e,_):typeof _=="number"&&V(e,""+_):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(c.hasOwnProperty(h)?_!=null&&h==="onScroll"&&Xe("scroll",e):_!=null&&B(e,h,_,g))}switch(a){case"input":bt(e),Z(e,l,!1);break;case"textarea":bt(e),qt(e);break;case"option":l.value!=null&&e.setAttribute("value",""+Oe(l.value));break;case"select":e.multiple=!!l.multiple,h=l.value,h!=null?pe(e,!!l.multiple,h,!1):l.defaultValue!=null&&pe(e,!!l.multiple,l.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Zi)}switch(a){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Pt(t),null;case 6:if(e&&t.stateNode!=null)bd(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(n(166));if(a=kn(ni.current),kn(Sr.current),aa(t)){if(l=t.stateNode,a=t.memoizedProps,l[kr]=t,(h=l.nodeValue!==a)&&(e=Qt,e!==null))switch(e.tag){case 3:Xi(l.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xi(l.nodeValue,a,(e.mode&1)!==0)}h&&(t.flags|=4)}else l=(a.nodeType===9?a:a.ownerDocument).createTextNode(l),l[kr]=t,t.stateNode=l}return Pt(t),null;case 13:if(Ze(st),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tt&&Xt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Nu(),is(),t.flags|=98560,h=!1;else if(h=aa(t),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(n(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));h[kr]=t}else is(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Pt(t),h=!1}else mr!==null&&(Al(mr),mr=null),h=!0;if(!h)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=a,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(st.current&1)!==0?vt===0&&(vt=3):Ll())),t.updateQueue!==null&&(t.flags|=4),Pt(t),null);case 4:return cs(),jl(e,t),e===null&&Js(t.stateNode.containerInfo),Pt(t),null;case 10:return Jo(t.type._context),Pt(t),null;case 17:return Ft(t.type)&&ta(),Pt(t),null;case 19:if(Ze(st),h=t.memoizedState,h===null)return Pt(t),null;if(l=(t.flags&128)!==0,g=h.rendering,g===null)if(l)li(h,!1);else{if(vt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=ha(e),g!==null){for(t.flags|=128,li(h,!1),l=g.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=a,a=t.child;a!==null;)h=a,e=l,h.flags&=14680066,g=h.alternate,g===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=g.childLanes,h.lanes=g.lanes,h.child=g.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=g.memoizedProps,h.memoizedState=g.memoizedState,h.updateQueue=g.updateQueue,h.type=g.type,e=g.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Ke(st,st.current&1|2),t.child}e=e.sibling}h.tail!==null&&nt()>fs&&(t.flags|=128,l=!0,li(h,!1),t.lanes=4194304)}else{if(!l)if(e=ha(g),e!==null){if(t.flags|=128,l=!0,a=e.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),li(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!tt)return Pt(t),null}else 2*nt()-h.renderingStartTime>fs&&a!==1073741824&&(t.flags|=128,l=!0,li(h,!1),t.lanes=4194304);h.isBackwards?(g.sibling=t.child,t.child=g):(a=h.last,a!==null?a.sibling=g:t.child=g,h.last=g)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=nt(),t.sibling=null,a=st.current,Ke(st,l?a&1|2:a&1),t):(Pt(t),null);case 22:case 23:return Dl(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&(t.mode&1)!==0?(Zt&1073741824)!==0&&(Pt(t),t.subtreeFlags&6&&(t.flags|=8192)):Pt(t),null;case 24:return null;case 25:return null}throw Error(n(156,t.tag))}function Sm(e,t){switch(Ho(t),t.tag){case 1:return Ft(t.type)&&ta(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return cs(),Ze(zt),Ze(It),nl(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return tl(t),null;case 13:if(Ze(st),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(n(340));is()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ze(st),null;case 4:return cs(),null;case 10:return Jo(t.type._context),null;case 22:case 23:return Dl(),null;case 24:return null;default:return null}}var ba=!1,Dt=!1,Em=typeof WeakSet=="function"?WeakSet:Set,re=null;function ds(e,t){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(l){lt(e,t,l)}else a.current=null}function _l(e,t,a){try{a()}catch(l){lt(e,t,l)}}var jd=!1;function Cm(e,t){if(Do=Fi,e=eu(),Eo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var u=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var g=0,v=-1,_=-1,R=0,z=0,W=e,U=null;t:for(;;){for(var ee;W!==a||u!==0&&W.nodeType!==3||(v=g+u),W!==h||l!==0&&W.nodeType!==3||(_=g+l),W.nodeType===3&&(g+=W.nodeValue.length),(ee=W.firstChild)!==null;)U=W,W=ee;for(;;){if(W===e)break t;if(U===a&&++R===u&&(v=g),U===h&&++z===l&&(_=g),(ee=W.nextSibling)!==null)break;W=U,U=W.parentNode}W=ee}a=v===-1||_===-1?null:{start:v,end:_}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lo={focusedElem:e,selectionRange:a},Fi=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var ne=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ne!==null){var se=ne.memoizedProps,ft=ne.memoizedState,E=t.stateNode,k=E.getSnapshotBeforeUpdate(t.elementType===t.type?se:pr(t.type,se),ft);E.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var T=t.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(K){lt(t,t.return,K)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return ne=jd,jd=!1,ne}function ci(e,t,a){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var u=l=l.next;do{if((u.tag&e)===e){var h=u.destroy;u.destroy=void 0,h!==void 0&&_l(t,a,h)}u=u.next}while(u!==l)}}function ja(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var a=t=t.next;do{if((a.tag&e)===e){var l=a.create;a.destroy=l()}a=a.next}while(a!==t)}}function Nl(e){var t=e.ref;if(t!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof t=="function"?t(e):t.current=e}}function _d(e){var t=e.alternate;t!==null&&(e.alternate=null,_d(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[kr],delete t[Xs],delete t[zo],delete t[um],delete t[dm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Nd(e){return e.tag===5||e.tag===3||e.tag===4}function kd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kl(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.nodeType===8?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(a.nodeType===8?(t=a.parentNode,t.insertBefore(e,a)):(t=a,t.appendChild(e)),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Zi));else if(l!==4&&(e=e.child,e!==null))for(kl(e,t,a),e=e.sibling;e!==null;)kl(e,t,a),e=e.sibling}function Sl(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Sl(e,t,a),e=e.sibling;e!==null;)Sl(e,t,a),e=e.sibling}var Et=null,gr=!1;function nn(e,t,a){for(a=a.child;a!==null;)Sd(e,t,a),a=a.sibling}function Sd(e,t,a){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(vn,a)}catch{}switch(a.tag){case 5:Dt||ds(a,t);case 6:var l=Et,u=gr;Et=null,nn(e,t,a),Et=l,gr=u,Et!==null&&(gr?(e=Et,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):Et.removeChild(a.stateNode));break;case 18:Et!==null&&(gr?(e=Et,a=a.stateNode,e.nodeType===8?Uo(e.parentNode,a):e.nodeType===1&&Uo(e,a),Fs(e)):Uo(Et,a.stateNode));break;case 4:l=Et,u=gr,Et=a.stateNode.containerInfo,gr=!0,nn(e,t,a),Et=l,gr=u;break;case 0:case 11:case 14:case 15:if(!Dt&&(l=a.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){u=l=l.next;do{var h=u,g=h.destroy;h=h.tag,g!==void 0&&((h&2)!==0||(h&4)!==0)&&_l(a,t,g),u=u.next}while(u!==l)}nn(e,t,a);break;case 1:if(!Dt&&(ds(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=a.memoizedProps,l.state=a.memoizedState,l.componentWillUnmount()}catch(v){lt(a,t,v)}nn(e,t,a);break;case 21:nn(e,t,a);break;case 22:a.mode&1?(Dt=(l=Dt)||a.memoizedState!==null,nn(e,t,a),Dt=l):nn(e,t,a);break;default:nn(e,t,a)}}function Ed(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Em),t.forEach(function(l){var u=$m.bind(null,e,l);a.has(l)||(a.add(l),l.then(u,u))})}}function xr(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];try{var h=e,g=t,v=g;e:for(;v!==null;){switch(v.tag){case 5:Et=v.stateNode,gr=!1;break e;case 3:Et=v.stateNode.containerInfo,gr=!0;break e;case 4:Et=v.stateNode.containerInfo,gr=!0;break e}v=v.return}if(Et===null)throw Error(n(160));Sd(h,g,u),Et=null,gr=!1;var _=u.alternate;_!==null&&(_.return=null),u.return=null}catch(R){lt(u,t,R)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Cd(t,e),t=t.sibling}function Cd(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xr(t,e),Cr(e),l&4){try{ci(3,e,e.return),ja(3,e)}catch(se){lt(e,e.return,se)}try{ci(5,e,e.return)}catch(se){lt(e,e.return,se)}}break;case 1:xr(t,e),Cr(e),l&512&&a!==null&&ds(a,a.return);break;case 5:if(xr(t,e),Cr(e),l&512&&a!==null&&ds(a,a.return),e.flags&32){var u=e.stateNode;try{V(u,"")}catch(se){lt(e,e.return,se)}}if(l&4&&(u=e.stateNode,u!=null)){var h=e.memoizedProps,g=a!==null?a.memoizedProps:h,v=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{v==="input"&&h.type==="radio"&&h.name!=null&&M(u,h),ot(v,g);var R=ot(v,h);for(g=0;g<_.length;g+=2){var z=_[g],W=_[g+1];z==="style"?qe(u,W):z==="dangerouslySetInnerHTML"?ht(u,W):z==="children"?V(u,W):B(u,z,W,R)}switch(v){case"input":Q(u,h);break;case"textarea":Je(u,h);break;case"select":var U=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!h.multiple;var ee=h.value;ee!=null?pe(u,!!h.multiple,ee,!1):U!==!!h.multiple&&(h.defaultValue!=null?pe(u,!!h.multiple,h.defaultValue,!0):pe(u,!!h.multiple,h.multiple?[]:"",!1))}u[Xs]=h}catch(se){lt(e,e.return,se)}}break;case 6:if(xr(t,e),Cr(e),l&4){if(e.stateNode===null)throw Error(n(162));u=e.stateNode,h=e.memoizedProps;try{u.nodeValue=h}catch(se){lt(e,e.return,se)}}break;case 3:if(xr(t,e),Cr(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Fs(t.containerInfo)}catch(se){lt(e,e.return,se)}break;case 4:xr(t,e),Cr(e);break;case 13:xr(t,e),Cr(e),u=e.child,u.flags&8192&&(h=u.memoizedState!==null,u.stateNode.isHidden=h,!h||u.alternate!==null&&u.alternate.memoizedState!==null||(Tl=nt())),l&4&&Ed(e);break;case 22:if(z=a!==null&&a.memoizedState!==null,e.mode&1?(Dt=(R=Dt)||z,xr(t,e),Dt=R):xr(t,e),Cr(e),l&8192){if(R=e.memoizedState!==null,(e.stateNode.isHidden=R)&&!z&&(e.mode&1)!==0)for(re=e,z=e.child;z!==null;){for(W=re=z;re!==null;){switch(U=re,ee=U.child,U.tag){case 0:case 11:case 14:case 15:ci(4,U,U.return);break;case 1:ds(U,U.return);var ne=U.stateNode;if(typeof ne.componentWillUnmount=="function"){l=U,a=U.return;try{t=l,ne.props=t.memoizedProps,ne.state=t.memoizedState,ne.componentWillUnmount()}catch(se){lt(l,a,se)}}break;case 5:ds(U,U.return);break;case 22:if(U.memoizedState!==null){Rd(W);continue}}ee!==null?(ee.return=U,re=ee):Rd(W)}z=z.sibling}e:for(z=null,W=e;;){if(W.tag===5){if(z===null){z=W;try{u=W.stateNode,R?(h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(v=W.stateNode,_=W.memoizedProps.style,g=_!=null&&_.hasOwnProperty("display")?_.display:null,v.style.display=Ee("display",g))}catch(se){lt(e,e.return,se)}}}else if(W.tag===6){if(z===null)try{W.stateNode.nodeValue=R?"":W.memoizedProps}catch(se){lt(e,e.return,se)}}else if((W.tag!==22&&W.tag!==23||W.memoizedState===null||W===e)&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===e)break e;for(;W.sibling===null;){if(W.return===null||W.return===e)break e;z===W&&(z=null),W=W.return}z===W&&(z=null),W.sibling.return=W.return,W=W.sibling}}break;case 19:xr(t,e),Cr(e),l&4&&Ed(e);break;case 21:break;default:xr(t,e),Cr(e)}}function Cr(e){var t=e.flags;if(t&2){try{e:{for(var a=e.return;a!==null;){if(Nd(a)){var l=a;break e}a=a.return}throw Error(n(160))}switch(l.tag){case 5:var u=l.stateNode;l.flags&32&&(V(u,""),l.flags&=-33);var h=kd(e);Sl(e,h,u);break;case 3:case 4:var g=l.stateNode.containerInfo,v=kd(e);kl(e,v,g);break;default:throw Error(n(161))}}catch(_){lt(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Tm(e,t,a){re=e,Td(e)}function Td(e,t,a){for(var l=(e.mode&1)!==0;re!==null;){var u=re,h=u.child;if(u.tag===22&&l){var g=u.memoizedState!==null||ba;if(!g){var v=u.alternate,_=v!==null&&v.memoizedState!==null||Dt;v=ba;var R=Dt;if(ba=g,(Dt=_)&&!R)for(re=u;re!==null;)g=re,_=g.child,g.tag===22&&g.memoizedState!==null?Id(u):_!==null?(_.return=g,re=_):Id(u);for(;h!==null;)re=h,Td(h),h=h.sibling;re=u,ba=v,Dt=R}Od(e)}else(u.subtreeFlags&8772)!==0&&h!==null?(h.return=u,re=h):Od(e)}}function Od(e){for(;re!==null;){var t=re;if((t.flags&8772)!==0){var a=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Dt||ja(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!Dt)if(a===null)l.componentDidMount();else{var u=t.elementType===t.type?a.memoizedProps:pr(t.type,a.memoizedProps);l.componentDidUpdate(u,a.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&Ru(t,h,l);break;case 3:var g=t.updateQueue;if(g!==null){if(a=null,t.child!==null)switch(t.child.tag){case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}Ru(t,g,a)}break;case 5:var v=t.stateNode;if(a===null&&t.flags&4){a=v;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&a.focus();break;case"img":_.src&&(a.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var R=t.alternate;if(R!==null){var z=R.memoizedState;if(z!==null){var W=z.dehydrated;W!==null&&Fs(W)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Dt||t.flags&512&&Nl(t)}catch(U){lt(t,t.return,U)}}if(t===e){re=null;break}if(a=t.sibling,a!==null){a.return=t.return,re=a;break}re=t.return}}function Rd(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var a=t.sibling;if(a!==null){a.return=t.return,re=a;break}re=t.return}}function Id(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{ja(4,t)}catch(_){lt(t,a,_)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var u=t.return;try{l.componentDidMount()}catch(_){lt(t,u,_)}}var h=t.return;try{Nl(t)}catch(_){lt(t,h,_)}break;case 5:var g=t.return;try{Nl(t)}catch(_){lt(t,g,_)}}}catch(_){lt(t,t.return,_)}if(t===e){re=null;break}var v=t.sibling;if(v!==null){v.return=t.return,re=v;break}re=t.return}}var Om=Math.ceil,_a=X.ReactCurrentDispatcher,El=X.ReactCurrentOwner,cr=X.ReactCurrentBatchConfig,Me=0,_t=null,pt=null,Ct=0,Zt=0,hs=Xr(0),vt=0,ui=null,En=0,Na=0,Cl=0,di=null,Wt=null,Tl=0,fs=1/0,$r=null,ka=!1,Ol=null,sn=null,Sa=!1,an=null,Ea=0,hi=0,Rl=null,Ca=-1,Ta=0;function $t(){return(Me&6)!==0?nt():Ca!==-1?Ca:Ca=nt()}function on(e){return(e.mode&1)===0?1:(Me&2)!==0&&Ct!==0?Ct&-Ct:fm.transition!==null?(Ta===0&&(Ta=ve()),Ta):(e=Be,e!==0||(e=window.event,e=e===void 0?16:Pc(e.type)),e)}function yr(e,t,a,l){if(50<hi)throw hi=0,Rl=null,Error(n(185));$e(e,a,l),((Me&2)===0||e!==_t)&&(e===_t&&((Me&2)===0&&(Na|=a),vt===4&&ln(e,Ct)),Ht(e,l),a===1&&Me===0&&(t.mode&1)===0&&(fs=nt()+500,na&&en()))}function Ht(e,t){var a=e.callbackNode;D(e,t);var l=w(e,e===_t?Ct:0);if(l===0)a!==null&&Ps(a),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(a!=null&&Ps(a),t===1)e.tag===0?hm(Pd.bind(null,e)):vu(Pd.bind(null,e)),lm(function(){(Me&6)===0&&en()}),a=null;else{switch(qn(l)){case 1:a=Wn;break;case 4:a=Ds;break;case 16:a=Hn;break;case 536870912:a=Ls;break;default:a=Hn}a=Bd(a,Ad.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function Ad(e,t){if(Ca=-1,Ta=0,(Me&6)!==0)throw Error(n(327));var a=e.callbackNode;if(ms()&&e.callbackNode!==a)return null;var l=w(e,e===_t?Ct:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||t)t=Oa(e,l);else{t=l;var u=Me;Me|=2;var h=Ld();(_t!==e||Ct!==t)&&($r=null,fs=nt()+500,Tn(e,t));do try{Am();break}catch(v){Dd(e,v)}while(!0);Yo(),_a.current=h,Me=u,pt!==null?t=0:(_t=null,Ct=0,t=vt)}if(t!==0){if(t===2&&(u=$(e),u!==0&&(l=u,t=Il(e,u))),t===1)throw a=ui,Tn(e,0),ln(e,l),Ht(e,nt()),a;if(t===6)ln(e,l);else{if(u=e.current.alternate,(l&30)===0&&!Rm(u)&&(t=Oa(e,l),t===2&&(h=$(e),h!==0&&(l=h,t=Il(e,h))),t===1))throw a=ui,Tn(e,0),ln(e,l),Ht(e,nt()),a;switch(e.finishedWork=u,e.finishedLanes=l,t){case 0:case 1:throw Error(n(345));case 2:On(e,Wt,$r);break;case 3:if(ln(e,l),(l&130023424)===l&&(t=Tl+500-nt(),10<t)){if(w(e,0)!==0)break;if(u=e.suspendedLanes,(u&l)!==l){$t(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=Mo(On.bind(null,e,Wt,$r),t);break}On(e,Wt,$r);break;case 4:if(ln(e,l),(l&4194240)===l)break;for(t=e.eventTimes,u=-1;0<l;){var g=31-Kt(l);h=1<<g,g=t[g],g>u&&(u=g),l&=~h}if(l=u,l=nt()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Om(l/1960))-l,10<l){e.timeoutHandle=Mo(On.bind(null,e,Wt,$r),l);break}On(e,Wt,$r);break;case 5:On(e,Wt,$r);break;default:throw Error(n(329))}}}return Ht(e,nt()),e.callbackNode===a?Ad.bind(null,e):null}function Il(e,t){var a=di;return e.current.memoizedState.isDehydrated&&(Tn(e,t).flags|=256),e=Oa(e,t),e!==2&&(t=Wt,Wt=a,t!==null&&Al(t)),e}function Al(e){Wt===null?Wt=e:Wt.push.apply(Wt,e)}function Rm(e){for(var t=e;;){if(t.flags&16384){var a=t.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var l=0;l<a.length;l++){var u=a[l],h=u.getSnapshot;u=u.value;try{if(!fr(h(),u))return!1}catch{return!1}}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ln(e,t){for(t&=~Cl,t&=~Na,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-Kt(t),l=1<<a;e[a]=-1,t&=~l}}function Pd(e){if((Me&6)!==0)throw Error(n(327));ms();var t=w(e,0);if((t&1)===0)return Ht(e,nt()),null;var a=Oa(e,t);if(e.tag!==0&&a===2){var l=$(e);l!==0&&(t=l,a=Il(e,l))}if(a===1)throw a=ui,Tn(e,0),ln(e,t),Ht(e,nt()),a;if(a===6)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,On(e,Wt,$r),Ht(e,nt()),null}function Pl(e,t){var a=Me;Me|=1;try{return e(t)}finally{Me=a,Me===0&&(fs=nt()+500,na&&en())}}function Cn(e){an!==null&&an.tag===0&&(Me&6)===0&&ms();var t=Me;Me|=1;var a=cr.transition,l=Be;try{if(cr.transition=null,Be=1,e)return e()}finally{Be=l,cr.transition=a,Me=t,(Me&6)===0&&en()}}function Dl(){Zt=hs.current,Ze(hs)}function Tn(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,om(a)),pt!==null)for(a=pt.return;a!==null;){var l=a;switch(Ho(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ta();break;case 3:cs(),Ze(zt),Ze(It),nl();break;case 5:tl(l);break;case 4:cs();break;case 13:Ze(st);break;case 19:Ze(st);break;case 10:Jo(l.type._context);break;case 22:case 23:Dl()}a=a.return}if(_t=e,pt=e=cn(e.current,null),Ct=Zt=t,vt=0,ui=null,Cl=Na=En=0,Wt=di=null,Nn!==null){for(t=0;t<Nn.length;t++)if(a=Nn[t],l=a.interleaved,l!==null){a.interleaved=null;var u=l.next,h=a.pending;if(h!==null){var g=h.next;h.next=u,l.next=g}a.pending=l}Nn=null}return e}function Dd(e,t){do{var a=pt;try{if(Yo(),fa.current=xa,ma){for(var l=it.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}ma=!1}if(Sn=0,jt=yt=it=null,si=!1,ii=0,El.current=null,a===null||a.return===null){vt=1,ui=t,pt=null;break}e:{var h=e,g=a.return,v=a,_=t;if(t=Ct,v.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var R=_,z=v,W=z.tag;if((z.mode&1)===0&&(W===0||W===11||W===15)){var U=z.alternate;U?(z.updateQueue=U.updateQueue,z.memoizedState=U.memoizedState,z.lanes=U.lanes):(z.updateQueue=null,z.memoizedState=null)}var ee=ad(g);if(ee!==null){ee.flags&=-257,od(ee,g,v,h,t),ee.mode&1&&id(h,R,t),t=ee,_=R;var ne=t.updateQueue;if(ne===null){var se=new Set;se.add(_),t.updateQueue=se}else ne.add(_);break e}else{if((t&1)===0){id(h,R,t),Ll();break e}_=Error(n(426))}}else if(tt&&v.mode&1){var ft=ad(g);if(ft!==null){(ft.flags&65536)===0&&(ft.flags|=256),od(ft,g,v,h,t),Go(us(_,v));break e}}h=_=us(_,v),vt!==4&&(vt=2),di===null?di=[h]:di.push(h),h=g;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var E=nd(h,_,t);Ou(h,E);break e;case 1:v=_;var k=h.type,T=h.stateNode;if((h.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(sn===null||!sn.has(T)))){h.flags|=65536,t&=-t,h.lanes|=t;var K=sd(h,v,t);Ou(h,K);break e}}h=h.return}while(h!==null)}Md(a)}catch(ce){t=ce,pt===a&&a!==null&&(pt=a=a.return);continue}break}while(!0)}function Ld(){var e=_a.current;return _a.current=xa,e===null?xa:e}function Ll(){(vt===0||vt===3||vt===2)&&(vt=4),_t===null||(En&268435455)===0&&(Na&268435455)===0||ln(_t,Ct)}function Oa(e,t){var a=Me;Me|=2;var l=Ld();(_t!==e||Ct!==t)&&($r=null,Tn(e,t));do try{Im();break}catch(u){Dd(e,u)}while(!0);if(Yo(),Me=a,_a.current=l,pt!==null)throw Error(n(261));return _t=null,Ct=0,vt}function Im(){for(;pt!==null;)$d(pt)}function Am(){for(;pt!==null&&!$i();)$d(pt)}function $d(e){var t=Fd(e.alternate,e,Zt);e.memoizedProps=e.pendingProps,t===null?Md(e):pt=t,El.current=null}function Md(e){var t=e;do{var a=t.alternate;if(e=t.return,(t.flags&32768)===0){if(a=km(a,t,Zt),a!==null){pt=a;return}}else{if(a=Sm(a,t),a!==null){a.flags&=32767,pt=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{vt=6,pt=null;return}}if(t=t.sibling,t!==null){pt=t;return}pt=t=e}while(t!==null);vt===0&&(vt=5)}function On(e,t,a){var l=Be,u=cr.transition;try{cr.transition=null,Be=1,Pm(e,t,a,l)}finally{cr.transition=u,Be=l}return null}function Pm(e,t,a,l){do ms();while(an!==null);if((Me&6)!==0)throw Error(n(327));a=e.finishedWork;var u=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var h=a.lanes|a.childLanes;if(St(e,h),e===_t&&(pt=_t=null,Ct=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Sa||(Sa=!0,Bd(Hn,function(){return ms(),null})),h=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||h){h=cr.transition,cr.transition=null;var g=Be;Be=1;var v=Me;Me|=4,El.current=null,Cm(e,a),Cd(a,e),em(Lo),Fi=!!Do,Lo=Do=null,e.current=a,Tm(a),oo(),Me=v,Be=g,cr.transition=h}else e.current=a;if(Sa&&(Sa=!1,an=e,Ea=u),h=e.pendingLanes,h===0&&(sn=null),uo(a.stateNode),Ht(e,nt()),t!==null)for(l=e.onRecoverableError,a=0;a<t.length;a++)u=t[a],l(u.value,{componentStack:u.stack,digest:u.digest});if(ka)throw ka=!1,e=Ol,Ol=null,e;return(Ea&1)!==0&&e.tag!==0&&ms(),h=e.pendingLanes,(h&1)!==0?e===Rl?hi++:(hi=0,Rl=e):hi=0,en(),null}function ms(){if(an!==null){var e=qn(Ea),t=cr.transition,a=Be;try{if(cr.transition=null,Be=16>e?16:e,an===null)var l=!1;else{if(e=an,an=null,Ea=0,(Me&6)!==0)throw Error(n(331));var u=Me;for(Me|=4,re=e.current;re!==null;){var h=re,g=h.child;if((re.flags&16)!==0){var v=h.deletions;if(v!==null){for(var _=0;_<v.length;_++){var R=v[_];for(re=R;re!==null;){var z=re;switch(z.tag){case 0:case 11:case 15:ci(8,z,h)}var W=z.child;if(W!==null)W.return=z,re=W;else for(;re!==null;){z=re;var U=z.sibling,ee=z.return;if(_d(z),z===R){re=null;break}if(U!==null){U.return=ee,re=U;break}re=ee}}}var ne=h.alternate;if(ne!==null){var se=ne.child;if(se!==null){ne.child=null;do{var ft=se.sibling;se.sibling=null,se=ft}while(se!==null)}}re=h}}if((h.subtreeFlags&2064)!==0&&g!==null)g.return=h,re=g;else e:for(;re!==null;){if(h=re,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:ci(9,h,h.return)}var E=h.sibling;if(E!==null){E.return=h.return,re=E;break e}re=h.return}}var k=e.current;for(re=k;re!==null;){g=re;var T=g.child;if((g.subtreeFlags&2064)!==0&&T!==null)T.return=g,re=T;else e:for(g=k;re!==null;){if(v=re,(v.flags&2048)!==0)try{switch(v.tag){case 0:case 11:case 15:ja(9,v)}}catch(ce){lt(v,v.return,ce)}if(v===g){re=null;break e}var K=v.sibling;if(K!==null){K.return=v.return,re=K;break e}re=v.return}}if(Me=u,en(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(vn,e)}catch{}l=!0}return l}finally{Be=a,cr.transition=t}}return!1}function Ud(e,t,a){t=us(a,t),t=nd(e,t,1),e=rn(e,t,1),t=$t(),e!==null&&($e(e,1,t),Ht(e,t))}function lt(e,t,a){if(e.tag===3)Ud(e,e,a);else for(;t!==null;){if(t.tag===3){Ud(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(sn===null||!sn.has(l))){e=us(a,e),e=sd(t,e,1),t=rn(t,e,1),e=$t(),t!==null&&($e(t,1,e),Ht(t,e));break}}t=t.return}}function Dm(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),t=$t(),e.pingedLanes|=e.suspendedLanes&a,_t===e&&(Ct&a)===a&&(vt===4||vt===3&&(Ct&130023424)===Ct&&500>nt()-Tl?Tn(e,0):Cl|=a),Ht(e,t)}function zd(e,t){t===0&&((e.mode&1)===0?t=1:(t=Wr,Wr<<=1,(Wr&130023424)===0&&(Wr=4194304)));var a=$t();e=Pr(e,t),e!==null&&($e(e,t,a),Ht(e,a))}function Lm(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),zd(e,a)}function $m(e,t){var a=0;switch(e.tag){case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(n(314))}l!==null&&l.delete(t),zd(e,a)}var Fd;Fd=function(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps||zt.current)Bt=!0;else{if((e.lanes&a)===0&&(t.flags&128)===0)return Bt=!1,Nm(e,t,a);Bt=(e.flags&131072)!==0}else Bt=!1,tt&&(t.flags&1048576)!==0&&wu(t,ia,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;wa(e,t),e=t.pendingProps;var u=rs(t,It.current);ls(t,a),u=al(null,t,l,e,u,a);var h=ol();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ft(l)?(h=!0,ra(t)):h=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,Zo(t),u.updater=ya,t.stateNode=u,u._reactInternals=t,fl(t,l,e,a),t=xl(null,t,l,!0,h,a)):(t.tag=0,tt&&h&&Wo(t),Lt(null,t,u,a),t=t.child),t;case 16:l=t.elementType;e:{switch(wa(e,t),e=t.pendingProps,u=l._init,l=u(l._payload),t.type=l,u=t.tag=Um(l),e=pr(l,e),u){case 0:t=gl(null,t,l,e,a);break e;case 1:t=fd(null,t,l,e,a);break e;case 11:t=ld(null,t,l,e,a);break e;case 14:t=cd(null,t,l,pr(l.type,e),a);break e}throw Error(n(306,l,""))}return t;case 0:return l=t.type,u=t.pendingProps,u=t.elementType===l?u:pr(l,u),gl(e,t,l,u,a);case 1:return l=t.type,u=t.pendingProps,u=t.elementType===l?u:pr(l,u),fd(e,t,l,u,a);case 3:e:{if(md(t),e===null)throw Error(n(387));l=t.pendingProps,h=t.memoizedState,u=h.element,Tu(e,t),da(t,l,null,a);var g=t.memoizedState;if(l=g.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){u=us(Error(n(423)),t),t=pd(e,t,l,a,u);break e}else if(l!==u){u=us(Error(n(424)),t),t=pd(e,t,l,a,u);break e}else for(Xt=Qr(t.stateNode.containerInfo.firstChild),Qt=t,tt=!0,mr=null,a=Eu(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(is(),l===u){t=Lr(e,t,a);break e}Lt(e,t,l,a)}t=t.child}return t;case 5:return Iu(t),e===null&&qo(t),l=t.type,u=t.pendingProps,h=e!==null?e.memoizedProps:null,g=u.children,$o(l,u)?g=null:h!==null&&$o(l,h)&&(t.flags|=32),hd(e,t),Lt(e,t,g,a),t.child;case 6:return e===null&&qo(t),null;case 13:return gd(e,t,a);case 4:return el(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=as(t,null,l,a):Lt(e,t,l,a),t.child;case 11:return l=t.type,u=t.pendingProps,u=t.elementType===l?u:pr(l,u),ld(e,t,l,u,a);case 7:return Lt(e,t,t.pendingProps,a),t.child;case 8:return Lt(e,t,t.pendingProps.children,a),t.child;case 12:return Lt(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(l=t.type._context,u=t.pendingProps,h=t.memoizedProps,g=u.value,Ke(la,l._currentValue),l._currentValue=g,h!==null)if(fr(h.value,g)){if(h.children===u.children&&!zt.current){t=Lr(e,t,a);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var v=h.dependencies;if(v!==null){g=h.child;for(var _=v.firstContext;_!==null;){if(_.context===l){if(h.tag===1){_=Dr(-1,a&-a),_.tag=2;var R=h.updateQueue;if(R!==null){R=R.shared;var z=R.pending;z===null?_.next=_:(_.next=z.next,z.next=_),R.pending=_}}h.lanes|=a,_=h.alternate,_!==null&&(_.lanes|=a),Qo(h.return,a,t),v.lanes|=a;break}_=_.next}}else if(h.tag===10)g=h.type===t.type?null:h.child;else if(h.tag===18){if(g=h.return,g===null)throw Error(n(341));g.lanes|=a,v=g.alternate,v!==null&&(v.lanes|=a),Qo(g,a,t),g=h.sibling}else g=h.child;if(g!==null)g.return=h;else for(g=h;g!==null;){if(g===t){g=null;break}if(h=g.sibling,h!==null){h.return=g.return,g=h;break}g=g.return}h=g}Lt(e,t,u.children,a),t=t.child}return t;case 9:return u=t.type,l=t.pendingProps.children,ls(t,a),u=or(u),l=l(u),t.flags|=1,Lt(e,t,l,a),t.child;case 14:return l=t.type,u=pr(l,t.pendingProps),u=pr(l.type,u),cd(e,t,l,u,a);case 15:return ud(e,t,t.type,t.pendingProps,a);case 17:return l=t.type,u=t.pendingProps,u=t.elementType===l?u:pr(l,u),wa(e,t),t.tag=1,Ft(l)?(e=!0,ra(t)):e=!1,ls(t,a),td(t,l,u),fl(t,l,u,a),xl(null,t,l,!0,e,a);case 19:return yd(e,t,a);case 22:return dd(e,t,a)}throw Error(n(156,t.tag))};function Bd(e,t){return Li(e,t)}function Mm(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(e,t,a,l){return new Mm(e,t,a,l)}function $l(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Um(e){if(typeof e=="function")return $l(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Le)return 11;if(e===et)return 14}return 2}function cn(e,t){var a=e.alternate;return a===null?(a=ur(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Ra(e,t,a,l,u,h){var g=2;if(l=e,typeof e=="function")$l(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case ie:return Rn(a.children,u,h,t);case q:g=8,u|=8;break;case ae:return e=ur(12,a,t,u|2),e.elementType=ae,e.lanes=h,e;case Re:return e=ur(13,a,t,u),e.elementType=Re,e.lanes=h,e;case dt:return e=ur(19,a,t,u),e.elementType=dt,e.lanes=h,e;case De:return Ia(a,u,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ae:g=10;break e;case We:g=9;break e;case Le:g=11;break e;case et:g=14;break e;case ze:g=16,l=null;break e}throw Error(n(130,e==null?e:typeof e,""))}return t=ur(g,a,t,u),t.elementType=e,t.type=l,t.lanes=h,t}function Rn(e,t,a,l){return e=ur(7,e,l,t),e.lanes=a,e}function Ia(e,t,a,l){return e=ur(22,e,l,t),e.elementType=De,e.lanes=a,e.stateNode={isHidden:!1},e}function Ml(e,t,a){return e=ur(6,e,null,t),e.lanes=a,e}function Ul(e,t,a){return t=ur(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zm(e,t,a,l,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ue(0),this.expirationTimes=ue(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ue(0),this.identifierPrefix=l,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function zl(e,t,a,l,u,h,g,v,_){return e=new zm(e,t,a,v,_),t===1?(t=1,h===!0&&(t|=8)):t=0,h=ur(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:l,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zo(h),e}function Fm(e,t,a){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:l==null?null:""+l,children:e,containerInfo:t,implementation:a}}function Wd(e){if(!e)return Zr;e=e._reactInternals;e:{if(Tr(e)!==e||e.tag!==1)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(n(171))}if(e.tag===1){var a=e.type;if(Ft(a))return xu(e,a,t)}return t}function Hd(e,t,a,l,u,h,g,v,_){return e=zl(a,l,!0,e,u,h,g,v,_),e.context=Wd(null),a=e.current,l=$t(),u=on(a),h=Dr(l,u),h.callback=t??null,rn(a,h,u),e.current.lanes=u,$e(e,u,l),Ht(e,l),e}function Aa(e,t,a,l){var u=t.current,h=$t(),g=on(u);return a=Wd(a),t.context===null?t.context=a:t.pendingContext=a,t=Dr(h,g),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=rn(u,t,g),e!==null&&(yr(e,u,g,h),ua(e,u,g)),g}function Pa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Fl(e,t){Vd(e,t),(e=e.alternate)&&Vd(e,t)}function Bm(){return null}var qd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Bl(e){this._internalRoot=e}Da.prototype.render=Bl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(n(409));Aa(e,t,null,null)},Da.prototype.unmount=Bl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cn(function(){Aa(null,e,null,null)}),t[Or]=null}};function Da(e){this._internalRoot=e}Da.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Kr.length&&t!==0&&t<Kr[a].priority;a++);Kr.splice(a,0,e),a===0&&Ic(e)}};function Wl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function La(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gd(){}function Wm(e,t,a,l,u){if(u){if(typeof l=="function"){var h=l;l=function(){var R=Pa(g);h.call(R)}}var g=Hd(t,l,e,0,null,!1,!1,"",Gd);return e._reactRootContainer=g,e[Or]=g.current,Js(e.nodeType===8?e.parentNode:e),Cn(),g}for(;u=e.lastChild;)e.removeChild(u);if(typeof l=="function"){var v=l;l=function(){var R=Pa(_);v.call(R)}}var _=zl(e,0,!1,null,null,!1,!1,"",Gd);return e._reactRootContainer=_,e[Or]=_.current,Js(e.nodeType===8?e.parentNode:e),Cn(function(){Aa(t,_,a,l)}),_}function $a(e,t,a,l,u){var h=a._reactRootContainer;if(h){var g=h;if(typeof u=="function"){var v=u;u=function(){var _=Pa(g);v.call(_)}}Aa(t,g,e,u)}else g=Wm(a,t,e,u,l);return Pa(g)}Ec=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=Hr(t.pendingLanes);a!==0&&(Yt(t,a|1),Ht(t,nt()),(Me&6)===0&&(fs=nt()+500,en()))}break;case 13:Cn(function(){var l=Pr(e,1);if(l!==null){var u=$t();yr(l,e,1,u)}}),Fl(e,1)}},mo=function(e){if(e.tag===13){var t=Pr(e,134217728);if(t!==null){var a=$t();yr(t,e,134217728,a)}Fl(e,134217728)}},Cc=function(e){if(e.tag===13){var t=on(e),a=Pr(e,t);if(a!==null){var l=$t();yr(a,e,t,l)}Fl(e,t)}},Tc=function(){return Be},Oc=function(e,t){var a=Be;try{return Be=e,t()}finally{Be=a}},Fr=function(e,t,a){switch(t){case"input":if(Q(e,a),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var u=ea(l);if(!u)throw Error(n(90));jr(l),Q(l,u)}}}break;case"textarea":Je(e,a);break;case"select":t=a.value,t!=null&&pe(e,!!a.multiple,t,!1)}},Ti=Pl,Oi=Cn;var Hm={usingClientEntryPoint:!1,Events:[Zs,es,ea,Ts,Os,Pl]},fi={findFiberByHostInstance:wn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vm={bundleType:fi.bundleType,version:fi.version,rendererPackageName:fi.rendererPackageName,rendererConfig:fi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Pi(e),e===null?null:e.stateNode},findFiberByHostInstance:fi.findFiberByHostInstance||Bm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ma.isDisabled&&Ma.supportsFiber)try{vn=Ma.inject(Vm),sr=Ma}catch{}}return Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hm,Vt.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wl(t))throw Error(n(200));return Fm(e,t,null,a)},Vt.createRoot=function(e,t){if(!Wl(e))throw Error(n(299));var a=!1,l="",u=qd;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=zl(e,1,!1,null,null,a,!1,l,u),e[Or]=t.current,Js(e.nodeType===8?e.parentNode:e),new Bl(t)},Vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=Pi(t),e=e===null?null:e.stateNode,e},Vt.flushSync=function(e){return Cn(e)},Vt.hydrate=function(e,t,a){if(!La(t))throw Error(n(200));return $a(null,e,t,!0,a)},Vt.hydrateRoot=function(e,t,a){if(!Wl(e))throw Error(n(405));var l=a!=null&&a.hydratedSources||null,u=!1,h="",g=qd;if(a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),t=Hd(t,null,e,1,a??null,u,!1,h,g),e[Or]=t.current,Js(e),l)for(e=0;e<l.length;e++)a=l[e],u=a._getVersion,u=u(a._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[a,u]:t.mutableSourceEagerHydrationData.push(a,u);return new Da(t)},Vt.render=function(e,t,a){if(!La(t))throw Error(n(200));return $a(null,e,t,!1,a)},Vt.unmountComponentAtNode=function(e){if(!La(e))throw Error(n(40));return e._reactRootContainer?(Cn(function(){$a(null,null,e,!1,function(){e._reactRootContainer=null,e[Or]=null})}),!0):!1},Vt.unstable_batchedUpdates=Pl,Vt.unstable_renderSubtreeIntoContainer=function(e,t,a,l){if(!La(a))throw Error(n(200));if(e==null||e._reactInternals===void 0)throw Error(n(38));return $a(e,t,a,!1,l)},Vt.version="18.3.1-next-f1338f8080-20240426",Vt}var th;function ep(){if(th)return ql.exports;th=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(r){console.error(r)}}return i(),ql.exports=Zm(),ql.exports}var rh;function tp(){if(rh)return Ua;rh=1;var i=ep();return Ua.createRoot=i.createRoot,Ua.hydrateRoot=i.hydrateRoot,Ua}var rp=tp(),ct=(i=>(i.MENU="MENU",i.SET_DETAIL="SET_DETAIL",i.PLAYING="PLAYING",i.WIN="WIN",i.DOCUMENTATION="DOCUMENTATION",i))(ct||{});const np=i=>{const r=Math.floor(i/1e3);return String(Math.floor(r/3600)).padStart(2,"0")+":"+String(Math.floor(r%3600/60)).padStart(2,"0")+":"+String(r%60).padStart(2,"0")},Uh=(i,r)=>{const n=i.toLowerCase(),o=r.toLowerCase(),c=new Array(o.length+1);for(let d=0;d<=o.length;d++)c[d]=d;for(let d=1;d<=n.length;d++){let f=d-1;c[0]=d;for(let m=1;m<=o.length;m++){const p=c[m];c[m]=Math.min(c[m]+1,c[m-1]+1,f+(n[d-1]===o[m-1]?0:1)),f=p}}return c[o.length]},sp=(i,r,n,o,c=!1)=>{const d=j=>{let C=j.replace(/<h=[^>]+>/g,"").replace(/<\/h>/g,"").replace(/\*\*\*/g,"").replace(/\*\*/g,"").replace(/\*/g,"").replace(/__/g,"").replace(/`/g,"").replace(/<u>/g,"").replace(/<\/u>/g,"");return C=C.normalize("NFD").replace(/[\u0300-\u036f]/g,""),C.toLowerCase().replace(/^(the|la|el)\s+/i,"").trim()},f=d(i);let m=1/0,p="";for(const j of o.term){const C=Uh(f,d(j));C<m&&(m=C,p=j)}const b=m<=(c?0:2);let N=!0;o.year&&(N=d(r)===d(o.year));let S=!0;const O={};if(o.customFields)for(const j of o.customFields){const C=n[j.name]||"",P=d(C)===d(j.value);O[j.name]=P,P||(S=!1)}return{isMatch:b&&N&&S,isTermMatch:b,isYearMatch:N,isCustomMatch:S,customResults:O,bestTerm:p,bestDist:m}},ip=(i,r,n,o,c=!1)=>{const d=j=>{let C=j.replace(/<h=[^>]+>/g,"").replace(/<\/h>/g,"").replace(/\*\*\*/g,"").replace(/\*\*/g,"").replace(/\*/g,"").replace(/__/g,"").replace(/`/g,"").replace(/<u>/g,"").replace(/<\/u>/g,"").replace(/<p>/gi," ").replace(/- /g," ");return C=C.normalize("NFD").replace(/[\u0300-\u036f]/g,""),C.toLowerCase().replace(/^(the|la|el)\s+/i,"").trim()},f=d(i),m=d(o.content),p=Uh(f,m),x=c?0:Math.max(2,Math.floor(m.length*.05)),b=p<=x;let N=!0;o.year&&(N=d(r)===d(o.year));let S=!0;const O={};if(o.customFields)for(const j of o.customFields){const C=n[j.name]||"",P=d(C)===d(j.value);O[j.name]=P,P||(S=!1)}return{isMatch:b&&N&&S,isDefinitionMatch:b,isYearMatch:N,isCustomMatch:S,customResults:O,bestDist:p}},za=i=>{var r;if(!i.trim())return[];try{const n=JSON.parse(i);return(n.cards?n.cards:Array.isArray(n)?(r=n[0])!=null&&r.cards?n[0].cards:n:[n]).map(c=>({term:Array.isArray(c.term)?c.term:[String(c.term||"Untitled")],content:Array.isArray(c.content)?c.content.join(`
`):String(c.content||""),year:c.year?String(c.year):void 0,image:c.image?String(c.image):void 0,tags:Array.isArray(c.tags)?c.tags:[],mastery:Number(c.mastery||0),star:!!c.star}))}catch{return i.split(/\n\s*&&&\s*\n/).map(c=>{var je,he;const f=c.trim().split("|||");let m=f[0].trim(),p,x=[];if(f.length>1){const ie=((je=f.pop())==null?void 0:je.trim())||"";m=f.join("|||").trim();const q=ie.indexOf(", (");let ae=ie,Ae="";q!==-1?(ae=ie.substring(0,q).trim(),Ae=ie.substring(q+1).trim()):ie.startsWith("(")&&ie.includes(")(")&&(ae=ie),p=ae||void 0;const We=/\((.*?)\)\((.*?)\)/g;let Le;for(;(Le=We.exec(Ae))!==null;)x.push({name:Le[1].trim(),value:Le[2].trim()})}let b=[];const N=m.split("%%TAGS%%");N.length>1&&(m=N[0].trim(),b=N[1].split("%%").map(q=>q.trim()).filter(Boolean));let S=!1;m.includes("%%STAR%%")&&(S=!0,m=m.replace("%%STAR%%","").trim());const O=m.split("///"),j=O[0].trim(),C=O[1]?O[1].trim():void 0,P=j.indexOf("/");let F="Untitled",H="";P!==-1?(F=j.substring(0,P).trim(),H=j.substring(P+1).trim()):F=j;const B=/^(\s*\([^)]+\)\s*)+/,X=F.match(B);if(X){const q=((he=X[0].match(/\(([^)]+)\)/g))==null?void 0:he.map(ae=>ae.slice(1,-1).trim()))||[];b=[...b,...q],F=F.replace(B,"").trim()}return!F&&!H?null:{term:[F],content:H,year:C,image:p,tags:b.length>0?b:void 0,customFields:x.length>0?x:void 0,mastery:0,star:S}}).filter(Boolean)}},Ot=()=>Math.random().toString(36).substr(2,9),qa=(i,r,n)=>{const o=n==="json"?"application/json":"text/plain",c=document.createElement("a"),d=new Blob([r],{type:o});c.href=URL.createObjectURL(d),c.download=i,document.body.appendChild(c),c.click(),document.body.removeChild(c)},Ss=(i,r,n=!1)=>i.split(/(<h=[^>]+>.*?<\/h>)|(`[^`]+`)|(\*\*\*[^*]+\*\*\*)|(\*\*[^*]+\*\*)|(\*[^*]+\*)|(__[^_]+__)|(<u>[^<]+<\/u>)/g).filter(c=>c!==void 0&&c!=="").map((c,d)=>{const f=`${r}-${d}`;if(c.startsWith("<h=")){const m=c.match(/<h=([^>]+)>(.*?)<\/h>/);if(m){const p=m[1].toLowerCase(),x=m[2];let b="bg-yellow/20 text-yellow";return p==="r"&&(b="bg-red/20 text-red"),p==="b"&&(b="bg-blue/20 text-blue"),p==="g"&&(b="bg-green/20 text-green"),p==="p"&&(b="bg-purple/20 text-purple"),p==="y"&&(b="bg-yellow/20 text-yellow"),kt.createElement("span",{key:f,className:`${b} px-1 rounded font-medium`},Ss(x,`${f}-inner`,!0))}}if(c.startsWith("`")&&c.endsWith("`"))return kt.createElement("code",{key:f,className:"bg-panel-2 border border-outline px-1.5 py-0.5 rounded text-[0.9em] font-mono text-accent"},c.slice(1,-1));if(c.startsWith("***")&&c.endsWith("***"))return kt.createElement("strong",{key:f,className:"font-bold text-accent italic"},c.slice(3,-3));if(c.startsWith("**")&&c.endsWith("**")){const m=`font-extrabold ${n?"text-current":"text-accent"}`;return kt.createElement("strong",{key:f,className:m},c.slice(2,-2))}if(c.startsWith("*")&&c.endsWith("*"))return kt.createElement("em",{key:f,className:"italic text-muted/90"},c.slice(1,-1));if(c.startsWith("__")&&c.endsWith("__")||c.startsWith("<u>")&&c.endsWith("</u>")){const m=c.startsWith("__")?c.slice(2,-2):c.slice(3,-4);return kt.createElement("u",{key:f,className:"underline decoration-accent underline-offset-4"},m)}return kt.createElement("span",{key:f},c)}),Ga=i=>{if(!i)return kt.createElement("div",{className:"text-muted italic opacity-50"},"No content");let r=null,n=i;const o=i.match(/^\((.*?)\)\s*(.*)/s);o&&(r=o[1],n=o[2]);const d=n.split(/<p>/i).map((m,p)=>{const x=m.split(`
`),b=[];let N=[];return x.forEach((S,O)=>{const j=S.trim();j.startsWith("-")?N.push(kt.createElement("li",{key:`li-${O}`,className:"list-disc marker:text-accent pl-1"},Ss(j.substring(1).trim(),`li-content-${p}-${O}`))):(N.length>0&&(b.push(kt.createElement("ul",{key:`ul-${p}-${O}`,className:"mb-2 pl-4 space-y-1"},[...N])),N=[]),j&&b.push(kt.createElement("div",{key:`txt-${p}-${O}`,className:"mb-1"},Ss(j,`txt-${p}-${O}`))))}),N.length>0&&b.push(kt.createElement("ul",{key:`ul-end-${p}`,className:"mb-2 pl-4 space-y-1"},[...N])),kt.createElement("div",{key:p,className:"mb-4 last:mb-0"},b)}),f=[];return r&&f.push(kt.createElement("div",{key:"cat",className:"text-xs font-bold uppercase tracking-widest text-accent mb-2 opacity-80"},r)),f.push(kt.createElement("div",{key:"body"},d)),kt.createElement(kt.Fragment,{},f)};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),op=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,n,o)=>o?o.toUpperCase():n.toLowerCase()),nh=i=>{const r=op(i);return r.charAt(0).toUpperCase()+r.slice(1)},zh=(...i)=>i.filter((r,n,o)=>!!r&&r.trim()!==""&&o.indexOf(r)===n).join(" ").trim(),lp=i=>{for(const r in i)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=I.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:f,...m},p)=>I.createElement("svg",{ref:p,...cp,width:r,height:r,stroke:i,strokeWidth:o?Number(n)*24/Number(r):n,className:zh("lucide",c),...!d&&!lp(m)&&{"aria-hidden":"true"},...m},[...f.map(([x,b])=>I.createElement(x,b)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(i,r)=>{const n=I.forwardRef(({className:o,...c},d)=>I.createElement(up,{ref:d,iconNode:r,className:zh(`lucide-${ap(nh(i))}`,`lucide-${i}`,o),...c}));return n.displayName=nh(i),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],hp=Ne("arrow-left-right",dp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yi=Ne("arrow-left",fp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Fh=Ne("book-open",mp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],gp=Ne("calendar",pp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],dn=Ne("check",xp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vp=Ne("chevron-down",yp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Mt=Ne("chevron-right",wp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Za=Ne("circle-alert",bp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_p=Ne("circle-play",jp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],sh=Ne("circle-question-mark",Np);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Sp=Ne("clock",kp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],eo=Ne("cloud",Ep);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],ih=Ne("code",Cp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=[["path",{d:"M14 3a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1",key:"1l7d7l"}],["path",{d:"M19 3a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1",key:"9955pe"}],["path",{d:"m7 15 3 3",key:"4hkfgk"}],["path",{d:"m7 21 3-3H5a2 2 0 0 1-2-2v-2",key:"1xljwe"}],["rect",{x:"14",y:"14",width:"7",height:"7",rx:"1",key:"1cdgtw"}],["rect",{x:"3",y:"3",width:"7",height:"7",rx:"1",key:"zi3rio"}]],Op=Ne("combine",Tp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ka=Ne("copy",Rp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],mn=Ne("download",Ip);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Pp=Ne("external-link",Ap);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Es=Ne("file-text",Dp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Mn=Ne("folder-open",Lp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],ah=Ne("github",$p);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Up=Ne("globe",Mp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Fp=Ne("heart",zp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Wp=Ne("image",Bp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],oc=Ne("layers",Hp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],Bh=Ne("layout-list",Vp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Gp=Ne("layout-grid",qp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Wh=Ne("log-in",Kp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Jp=Ne("lock",Yp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Xp=Ne("log-out",Qp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Yl=Ne("mail",Zp);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],tg=Ne("monitor",eg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],ng=Ne("palette",rg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],vi=Ne("pencil",sg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Jl=Ne("play",ig);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fa=Ne("plus",ag);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],lg=Ne("rotate-ccw",og);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],ug=Ne("rotate-cw",cg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hg=Ne("settings",dg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],mg=Ne("shield",fg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],gg=Ne("shuffle",pg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],yg=Ne("smartphone",xg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],oh=Ne("sparkles",vg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Hh=Ne("star",wg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],pn=Ne("trash-2",bg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],_g=Ne("type",jg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],wc=Ne("upload",Ng);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],lh=Ne("user",kg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ur=Ne("x",Sg);function Vh(i){var r,n,o="";if(typeof i=="string"||typeof i=="number")o+=i;else if(typeof i=="object")if(Array.isArray(i)){var c=i.length;for(r=0;r<c;r++)i[r]&&(n=Vh(i[r]))&&(o&&(o+=" "),o+=n)}else for(n in i)i[n]&&(o&&(o+=" "),o+=n);return o}function G(){for(var i,r,n=0,o="",c=arguments.length;n<c;n++)(i=arguments[n])&&(r=Vh(i))&&(o&&(o+=" "),o+=r);return o}const ch="flashcard-builder-rows",uh=["What are we learning next?","Who's excited to study?!","You got this!","Step 1 is studying.","Lock in.","One more set?","What's up?","All you.","Greatness incoming?","Hey, you're here.","Welcome... or welcome back.","Ready to study?","You're in the right place.","Onward.","Heyo.","Flashcards! Hurrah!","Flashcardsish!","'SET' it up. Haha, get it?","Practice makes... good.","Working hard... or hardly working?","What'll it be?"],Eg=({isOpen:i,onSave:r,onDiscard:n,onCancel:o})=>i?s.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:o,children:s.jsxs("div",{className:"bg-panel border border-outline rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-in zoom-in-95",onClick:c=>c.stopPropagation(),children:[s.jsx("h3",{className:"text-xl font-bold text-text mb-2",children:"Unsaved Changes"}),s.jsx("p",{className:"text-muted mb-6",children:"You have unsaved work in the builder. What would you like to do?"}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx("button",{onClick:r,className:"w-full py-3 bg-accent text-bg rounded-xl font-bold hover:scale-105 transition-transform",children:"Save to Library"}),s.jsx("button",{onClick:n,className:"w-full py-3 bg-panel-2 border border-outline text-red rounded-xl font-bold hover:bg-red/10 transition-colors",children:"Leave without Saving"}),s.jsx("button",{onClick:o,className:"w-full py-3 text-muted hover:text-text font-medium",children:"Cancel"})]})]})}):null,Cg=({isOpen:i,folderName:r,setCount:n,onClose:o,onConfirm:c})=>{const[d,f]=I.useState(0);if(!i)return null;const m=()=>{d<4?f(p=>p+1):c("delete")};return s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:o,children:s.jsxs("div",{className:"bg-panel border border-outline rounded-2xl p-6 w-full max-w-md shadow-2xl animate-in zoom-in-95",onClick:p=>p.stopPropagation(),children:[s.jsxs("h3",{className:"text-lg font-bold text-text mb-2",children:['Delete "',r,'"?']}),s.jsxs("p",{className:"text-muted mb-6",children:["This folder contains ",n," set",n===1?"":"s",". What would you like to do with them?"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>c("move"),className:"w-full py-3 bg-panel-2 border border-outline text-text rounded-xl font-bold hover:border-accent transition-colors flex flex-col items-center justify-center gap-1",children:[s.jsx("span",{children:"Delete Folder Only"}),s.jsx("span",{className:"text-[10px] text-muted font-normal uppercase tracking-wider",children:"Move sets to main Library"})]}),s.jsx("div",{className:"relative",children:s.jsxs("button",{onClick:m,className:G("w-full py-3 border rounded-xl font-bold transition-all flex flex-col items-center justify-center gap-1",d>0?"bg-red text-bg border-red":"bg-red/5 text-red border-red/20 hover:bg-red/10"),children:[s.jsx("span",{children:"Delete Folder & Sets"}),s.jsx("span",{className:G("text-[10px] font-normal uppercase tracking-wider",d>0?"text-bg/80":"text-red/60"),children:d===0?"Just get rid of everything":`${5-d} clicks remaining`})]})}),s.jsx("button",{onClick:o,className:"w-full py-2 text-muted hover:text-text font-medium text-sm mt-2",children:"Cancel"})]})]})})},Tg=({isOpen:i,onClose:r,onSave:n,initialValue:o})=>{const[c,d]=I.useState(o),[f,m]=I.useState(!1),p=I.useRef(null);I.useEffect(()=>{i&&d(o)},[i,o]);const x=N=>{if(!N.type.startsWith("image/"))return;const S=new FileReader;S.onloadend=()=>{typeof S.result=="string"&&(n(S.result),r())},S.readAsDataURL(N)},b=N=>{N.preventDefault(),N.stopPropagation(),m(!1),N.dataTransfer.files&&N.dataTransfer.files[0]&&x(N.dataTransfer.files[0])};return i?s.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:r,children:s.jsxs("div",{className:"bg-panel border border-outline rounded-2xl p-6 w-full max-w-md shadow-2xl animate-in zoom-in-95",onClick:N=>N.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-text",children:"Add Image"}),s.jsx("button",{onClick:r,children:s.jsx(Ur,{size:24,className:"text-muted hover:text-text"})})]}),s.jsxs("div",{className:G("border-2 border-dashed rounded-xl h-36 flex flex-col items-center justify-center cursor-pointer transition-colors",f?"border-accent bg-accent/10":"border-outline hover:border-accent hover:bg-panel-2"),onDragEnter:N=>{N.preventDefault(),m(!0)},onDragLeave:N=>{N.preventDefault(),m(!1)},onDragOver:N=>N.preventDefault(),onDrop:b,onClick:()=>{var N;return(N=p.current)==null?void 0:N.click()},children:[s.jsx("input",{type:"file",ref:p,className:"hidden",accept:"image/*",onChange:N=>N.target.files&&x(N.target.files[0])}),s.jsx(wc,{size:32,className:"text-muted mb-2"}),s.jsx("p",{className:"text-sm text-muted font-medium",children:"Drag & drop or click to upload"})]}),s.jsxs("div",{className:"flex items-center gap-4 my-5",children:[s.jsx("div",{className:"h-px bg-outline flex-1"}),s.jsx("span",{className:"text-muted text-xs font-bold uppercase tracking-wider opacity-60",children:"OR"}),s.jsx("div",{className:"h-px bg-outline flex-1"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{value:c,onChange:N=>d(N.target.value),placeholder:"Paste image link...",className:"flex-1 bg-panel-2 border border-outline rounded-xl px-4 py-3 focus:outline-none focus:border-accent transition-colors text-sm"}),s.jsx("button",{onClick:()=>{n(c),r()},className:"px-5 py-3 bg-panel-2 border border-outline hover:bg-accent hover:text-bg rounded-xl font-bold transition-all text-sm whitespace-nowrap",children:"Save"})]})]})}):null},dh=({isOpen:i,onClose:r})=>i?s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:r,children:s.jsxs("div",{className:"bg-panel border border-outline rounded-2xl p-8 w-full max-w-lg shadow-2xl animate-in zoom-in-95",onClick:n=>n.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"font-bold text-2xl text-text",children:"Formatting Guide"}),s.jsx("button",{onClick:r,children:s.jsx(Ur,{size:24,className:"text-muted hover:text-text"})})]}),s.jsxs("div",{className:"space-y-4 text-base",children:[s.jsxs("div",{className:"flex justify-between pb-2",children:[s.jsx("span",{className:"text-muted",children:"Italics"}),s.jsx("span",{className:"font-mono text-yellow",children:"*italic*"})]}),s.jsxs("div",{className:"flex justify-between pb-2",children:[s.jsx("span",{className:"text-muted",children:"Bold"}),s.jsx("span",{className:"font-mono text-yellow",children:"**bold**"})]}),s.jsxs("div",{className:"flex justify-between pb-2",children:[s.jsx("span",{className:"text-muted",children:"Bold & Italic"}),s.jsx("span",{className:"font-mono text-yellow",children:"***text***"})]}),s.jsxs("div",{className:"flex justify-between pb-2",children:[s.jsx("span",{className:"text-muted",children:"Underline"}),s.jsx("span",{className:"font-mono text-yellow",children:"__text__"})]}),s.jsxs("div",{className:"flex justify-between pb-2",children:[s.jsx("span",{className:"text-muted",children:"Code"}),s.jsx("span",{className:"font-mono text-yellow",children:"`code`"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 pb-2",children:[s.jsx("span",{className:"text-muted",children:"Bulleted List"}),s.jsxs("span",{className:"font-mono text-yellow text-right",children:["- Item 1",s.jsx("br",{}),"- Item 2"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("span",{className:"text-muted",children:"Exit List / New Para"}),s.jsx("span",{className:"font-mono text-yellow text-right",children:"<p>"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-outline/50",children:[s.jsx("span",{className:"text-muted font-bold text-accent",children:"Image Link"}),s.jsxs("span",{className:"font-mono text-yellow text-right",children:["**ADD TO RAW TEXT:** ",s.jsx("br",{})," `... ||| http://link/image.jpg`"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("span",{className:"text-muted font-bold text-accent",children:"Year"}),s.jsxs("span",{className:"font-mono text-yellow text-right",children:["**ADD TO RAW TEXT:** ",s.jsx("br",{})," `... /// Year`"]})]})]})]})}):null,Og=({isOpen:i,onClose:r,onConfirm:n,message:o})=>i?s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:r,children:s.jsxs("div",{className:"bg-panel border border-outline rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-in zoom-in-95",onClick:c=>c.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow",children:[s.jsx(Za,{size:24}),s.jsx("h3",{className:"text-lg font-bold text-text",children:"Warning"})]}),s.jsx("p",{className:"text-muted mb-6",children:o}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg text-muted hover:text-text hover:bg-panel-2 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:()=>{n(),r()},className:"px-4 py-2 rounded-lg bg-yellow text-bg font-bold hover:bg-yellow/90 transition-colors",children:"Confirm"})]})]})}):null,Rg=({isOpen:i,onClose:r})=>i?s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:r,children:s.jsxs("div",{className:"bg-panel border border-outline rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-in zoom-in-95",onClick:n=>n.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4 text-red",children:[s.jsx(Za,{size:24}),s.jsx("h3",{className:"text-lg font-bold text-text",children:"Invalid File"})]}),s.jsx("p",{className:"text-muted mb-6",children:"This file doesn't look like a valid flashcard set. Please check the file format and try again."}),s.jsx("div",{className:"flex justify-end gap-3",children:s.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg bg-panel-2 hover:bg-panel-3 text-text font-bold transition-colors",children:"Close"})})]})}):null,Ig=({isOpen:i,onClose:r,onDisableAndPlay:n})=>i?s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:r,children:s.jsxs("div",{className:"bg-panel border border-outline rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-in zoom-in-95",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow",children:[s.jsx(Za,{size:24}),s.jsx("h3",{className:"text-lg font-bold text-text",children:"No Starred Cards"})]}),s.jsx("p",{className:"text-muted mb-6",children:'You have "Study Starred Only" enabled, but this set has no starred cards.'}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx("button",{onClick:n,className:"w-full py-3 bg-accent text-bg rounded-xl font-bold hover:scale-105 transition-transform",children:"Disable Filter & Play"}),s.jsx("button",{onClick:r,className:"w-full py-3 text-muted hover:text-text font-medium",children:"Cancel"})]})]})}):null,Ag=kt.memo(({row:i,index:r,showYear:n,isDuplicate:o,isLast:c,customFieldNames:d,updateRow:f,removeRow:m,onAddNext:p,onOpenImageModal:x,onSwap:b})=>{const[N,S]=I.useState(!1),[O,j]=I.useState(!1),C=I.useRef(null),P=I.useRef(null),[F,H]=I.useState(null),[B,X]=I.useState(null),je=(q,ae)=>{const Ae=q.target;Ae.selectionStart!==Ae.selectionEnd?(X({start:Ae.selectionStart||0,end:Ae.selectionEnd||0}),H({x:q.clientX,y:q.clientY-50,field:ae})):(H(null),X(null))},he=q=>{if(!F||!B)return;const ae=F.field,Ae=ae==="term"?i.term:i.def,We=Ae.substring(0,B.start),Le=Ae.substring(B.start,B.end),Re=Ae.substring(B.end),dt=`${We}<h=${q}>${Le}</h>${Re}`;f(i.id,ae,dt),H(null),X(null)};I.useEffect(()=>{N&&C.current&&(C.current.focus(),C.current.style.height="auto",C.current.style.height=C.current.scrollHeight+"px")},[N]),I.useEffect(()=>{O&&P.current&&P.current.focus()},[O]);const ie=q=>{var ae,Ae,We;if(q.key==="Enter"){const Le=((ae=C.current)==null?void 0:ae.value)||"",Re=((Ae=C.current)==null?void 0:Ae.selectionStart)||0,dt=Le.lastIndexOf(`
`,Re-1);if(Le.substring(dt+1,Re).trim().startsWith("-")){q.preventDefault();const ze=`
- `,De=Le.substring(0,Re)+ze+Le.substring(((We=C.current)==null?void 0:We.selectionEnd)||Re);f(i.id,"def",De),requestAnimationFrame(()=>{C.current&&(C.current.selectionStart=Re+ze.length,C.current.selectionEnd=Re+ze.length,C.current.style.height="auto",C.current.style.height=C.current.scrollHeight+"px")})}}q.key==="Tab"&&!q.shiftKey&&c&&(q.preventDefault(),p())};return s.jsxs("div",{className:G("group relative w-full","p-3 mb-3 bg-panel-2/10 border border-outline rounded-xl"),style:{minHeight:"120px"},children:[F&&s.jsx("div",{className:"fixed z-[100] bg-panel border border-outline shadow-xl rounded-lg p-1.5 flex gap-1.5 animate-in fade-in zoom-in-95",style:{top:F.y,left:F.x,transform:"translateX(-50%)"},onMouseDown:q=>q.preventDefault(),children:[{name:"y",class:"bg-yellow border-yellow"},{name:"r",class:"bg-red border-red"},{name:"b",class:"bg-blue border-blue"},{name:"g",class:"bg-green border-green"},{name:"p",class:"bg-purple border-purple"}].map(q=>s.jsx("button",{onClick:ae=>{ae.preventDefault(),ae.stopPropagation(),he(q.name)},className:`w-6 h-6 rounded-full border ${q.class} hover:scale-110 transition-transform`,title:q.name==="r"?"Red":q.name==="b"?"Blue":q.name==="g"?"Green":q.name==="p"?"Purple":"Yellow"},q.name))}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[s.jsxs("div",{className:"w-full md:w-[35%] flex flex-col gap-2",children:[s.jsxs("div",{className:"relative",children:[O?s.jsx("div",{className:"bg-panel-2 border border-accent rounded-lg min-h-[42px] relative",children:s.jsx("input",{ref:P,id:`term-${i.id}`,value:i.term,onChange:q=>f(i.id,"term",q.target.value),onMouseUp:q=>je(q,"term"),onBlur:()=>j(!1),placeholder:"Term",className:G("w-full bg-transparent border-none focus:outline-none px-3 py-2.5 text-sm transition-all min-h-[42px]",o&&"text-red")})}):s.jsx("div",{tabIndex:0,onFocus:()=>j(!0),onClick:()=>j(!0),className:G("w-full min-h-[42px] px-3 py-2.5 text-sm bg-panel-2 border rounded-lg cursor-text hover:border-accent/50 transition-colors focus:outline-none focus:border-accent leading-relaxed flex items-center",o?"border-red":"border-outline",!i.term&&"text-muted italic"),children:i.term?s.jsx("span",{className:"whitespace-pre-wrap break-words",children:Ss(i.term,`term-view-${i.id}`)}):"Term"}),o&&!O&&s.jsx("div",{className:"absolute right-2 top-3 text-red",children:s.jsx(Za,{size:14})})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("button",{onClick:()=>x(i.id),tabIndex:-1,className:G("rounded-lg hover:bg-panel-2 transition-all shrink-0 flex items-center justify-center overflow-hidden border border-transparent",i.image?"w-[42px] h-[42px] p-0 border-outline bg-panel-2":"p-2.5 text-muted hover:text-text"),title:i.image?"Change Image":"Add Image",children:i.image?s.jsx("img",{src:i.image,alt:"preview",loading:"lazy",className:"w-full h-full object-cover"}):s.jsx(Wp,{size:16})}),s.jsx("button",{onClick:()=>f(i.id,"star",!i.star),tabIndex:-1,className:G("p-2.5 transition-all shrink-0",i.star?"text-yellow hover:text-yellow/80":"text-muted hover:text-yellow"),title:i.star?"Unstar Card":"Star Card",children:i.star?"":""}),s.jsx("button",{onClick:()=>b(i.id),tabIndex:-1,className:"p-2.5 text-muted hover:text-accent transition-all shrink-0",title:"Swap Term & Definition",children:s.jsx(hp,{size:16})}),s.jsx("button",{onClick:()=>m(i.id),tabIndex:-1,className:"p-2.5 text-muted hover:text-red transition-all shrink-0",title:"Delete Card",children:s.jsx(pn,{size:16})}),n&&s.jsx("input",{value:i.year,onChange:q=>f(i.id,"year",q.target.value),placeholder:"Year",className:"w-24 bg-panel-2 border border-outline rounded-lg px-2 py-2 text-sm focus:outline-none focus:border-accent transition-colors text-center placeholder:text-muted/50 h-[42px]"}),d.map(q=>{var Ae;const ae=((Ae=i.customFields.find(We=>We.name===q))==null?void 0:Ae.value)||"";return s.jsx("input",{value:ae,onChange:We=>{const Le=i.customFields.filter(Re=>Re.name!==q);We.target.value&&Le.push({name:q,value:We.target.value}),f(i.id,"customFields",Le)},placeholder:q,className:"w-24 bg-panel-2 border border-outline rounded-lg px-2 py-2 text-sm focus:outline-none focus:border-accent transition-colors text-center placeholder:text-muted/50 h-[42px]"},q)})]})]}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("div",{className:"w-full relative group/def",children:N?s.jsx("div",{className:"bg-panel-2 border border-accent rounded-lg min-h-[42px] relative",children:s.jsx("textarea",{ref:C,value:i.def,onChange:q=>f(i.id,"def",q.target.value),onMouseUp:q=>je(q,"def"),onBlur:()=>S(!1),onKeyDown:ie,placeholder:"Definition",rows:1,className:"w-full bg-transparent border-none focus:outline-none px-3 py-2.5 text-sm resize-none min-h-[40px] overflow-hidden block custom-scrollbar leading-relaxed",onInput:q=>{const ae=q.target;ae.style.height="auto",ae.style.height=ae.scrollHeight+"px"}})}):s.jsx("div",{tabIndex:0,onFocus:()=>S(!0),onClick:()=>S(!0),className:G("w-full min-h-[42px] px-3 py-2.5 text-sm bg-panel-2 border rounded-lg cursor-text hover:border-accent/50 transition-colors focus:outline-none focus:border-accent leading-relaxed break-words",i.def?"border-outline":"border-outline text-muted italic"),children:i.def?Ga(i.def):"Click to add definition..."})})})]}),s.jsx("div",{className:"absolute bottom-2 right-3 text-xs text-muted font-mono opacity-30 select-none pointer-events-none",children:r+1})]})}),Pg=({librarySets:i,onStartFromLibrary:r,onResumeSession:n,onSaveToLibrary:o,onDeleteLibrarySet:c,onDeleteSession:d,onOpenSet:f,settings:m,onUpdateSettings:p,lifetimeCorrect:x,onDuplicateLibrarySet:b,setLibrarySets:N,folders:S,setFolders:O,initialEditSetId:j,onClearEditRequest:C})=>{var Hr;const[P,F]=I.useState("menu"),[H,B]=I.useState("visual"),[X,je]=I.useState(!1),[he,ie]=I.useState(!1),[q,ae]=I.useState([]),[Ae,We]=I.useState(""),[Le,Re]=I.useState(!1),[dt,et]=I.useState(!1),[ze,De]=I.useState(!1),[J,fe]=I.useState(null),[Y,y]=I.useState(null),[L,ge]=I.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[_e,Ce]=I.useState(null),[oe,Te]=I.useState(()=>{const w=localStorage.getItem(ch);try{return w?JSON.parse(w):[{id:"1",term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1},{id:"2",term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1},{id:"3",term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1}]}catch{return[{id:"1",term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1},{id:"2",term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1},{id:"3",term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1}]}}),[Oe,Pe]=I.useState(""),[Ve,bt]=I.useState(""),[jr,xt]=I.useState(!1),nr=I.useRef(null);I.useEffect(()=>{const w=A=>{nr.current&&!nr.current.contains(A.target)&&xt(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const hr=I.useRef(oe.length);I.useEffect(()=>{if(oe.length>hr.current){const w=oe[oe.length-1],A=document.getElementById(`term-${w.id}`);A&&A.focus()}hr.current=oe.length},[oe.length]);const[M,Q]=I.useState(null),[Z,me]=I.useState(null),[ke,pe]=I.useState(new Set),[Fe,Ge]=I.useState(0),[Je,qt]=I.useState(null),[Qe,He]=I.useState(null),[rt,ht]=I.useState(null),[V,le]=I.useState(""),[te,Ee]=I.useState(null),[qe,Gt]=I.useState(""),[mt,ot]=I.useState("brown"),[Un,Ut]=I.useState(!1),[Fr,_r]=I.useState(!1);I.useEffect(()=>{if(P==="builder"&&H==="visual"){_r(!1);const w=setTimeout(()=>{_r(!0)},100);return()=>clearTimeout(w)}else _r(!0)},[P,H,Y]),I.useEffect(()=>{if(j&&C){const w=i.find(A=>A.id===j);w&&($i(w),C())}},[j]);const Nr=S.find(w=>w.id===Je),Ci=Je?i.filter(w=>w.folderId===Je):i.filter(w=>!w.isMultistudy&&!w.folderId),Ts=Je?[]:S;i.filter(w=>w.isMultistudy);const Os=i.filter(w=>w.isSessionActive).sort((w,A)=>(A.lastPlayed||0)-(w.lastPlayed||0)),Ti=w=>{const A=new Set(ke);A.has(w)?A.delete(w):A.add(w),pe(A),Ge(0)},Oi=()=>{ke.size!==0&&(ot("brown"),Ut(!0))},zn=(w="brown")=>{const A={id:Ot(),name:qe||"New Folder",color:w,setIds:Array.from(ke)};O(D=>[...D,A]),N(D=>D.map($=>ke.has($.id)?{...$,folderId:A.id}:$)),pe(new Set),Gt(""),Ut(!1)},Rs=(w,A)=>{N(D=>D.map($=>$.id===w?{...$,folderId:A}:$)),Ee(null)},gn=w=>{const A=i.filter(D=>D.folderId===w);if(A.length>0){const D=S.find($=>$.id===w);D&&He({id:w,name:D.name,count:A.length});return}O(D=>D.filter($=>$.id!==w)),Je===w&&qt(null)},Is=w=>{Qe&&(w==="move"?N(A=>A.map(D=>D.folderId===Qe.id?{...D,folderId:void 0}:D)):i.filter(D=>D.folderId===Qe.id).map(D=>D.id).forEach(D=>c(D)),O(A=>A.filter(D=>D.id!==Qe.id)),Je===Qe.id&&qt(null),He(null))},xn=w=>{ht(w.id),le(w.name)},Ri=()=>{rt&&V.trim()&&O(w=>w.map(A=>A.id===rt?{...A,name:V.trim()}:A)),ht(null),le("")},yn=w=>{var ue;const A=i.filter($e=>$e.folderId===w);if(A.length===0)return;const D=[];A.forEach($e=>{$e.cards.forEach(St=>{D.push({...St,originalSetId:$e.id,originalSetName:$e.name})})});const $={id:Ot(),name:`Folder Study: ${(ue=S.find($e=>$e.id===w))==null?void 0:ue.name}`,cards:D,lastPlayed:Date.now(),elapsedTime:0,topStreak:0,isSessionActive:!0,isMultistudy:!0,customFieldNames:[]},ve=new Set;A.forEach($e=>{var St;return(St=$e.customFieldNames)==null?void 0:St.forEach(Yt=>ve.add(Yt))}),$.customFieldNames=Array.from(ve),Wr($)},Fn=w=>{N(A=>A.map(D=>ke.has(D.id)?{...D,folderId:w}:D)),pe(new Set),Ee(null)},Bn=()=>{const w=i.filter(ve=>ke.has(ve.id));if(w.length<2){alert("Please select at least 2 sets for a Multistudy session.");return}const A=[];w.forEach(ve=>{ve.cards.forEach(ue=>{A.push({...ue,originalSetId:ve.id,originalSetName:ve.name})})});const D={id:Ot(),name:`Multistudy (${w.length} Sets)`,cards:A,lastPlayed:Date.now(),elapsedTime:0,topStreak:0,isSessionActive:!0,isMultistudy:!0,customFieldNames:[]},$=new Set;w.forEach(ve=>{var ue;return(ue=ve.customFieldNames)==null?void 0:ue.forEach($e=>$.add($e))}),D.customFieldNames=Array.from($),Wr(D),pe(new Set)},As=()=>{const w=i.filter(ve=>ke.has(ve.id));if(w.length===0)return;const A=[];w.forEach(ve=>{ve.cards.forEach(ue=>{A.push({...ue,id:Ot(),originalSetId:ve.id,originalSetName:ve.name,mastery:0})})});const D=new Set;w.forEach(ve=>{var ue;return(ue=ve.customFieldNames)==null?void 0:ue.forEach($e=>D.add($e))});const $={id:Ot(),name:`Combined (${w.length} Sets)`,cards:A,lastPlayed:Date.now(),elapsedTime:0,topStreak:0,isSessionActive:!1,isMultistudy:!1,customFieldNames:Array.from(D)};o($),pe(new Set)},so=()=>{Fe<2?Ge(w=>w+1):(ke.forEach(w=>Mi(w)),ke.forEach(w=>c(w)),pe(new Set),Ge(0))},Br=I.useRef(null),io=I.useMemo(()=>uh[Math.floor(Math.random()*uh.length)],[]),Tr=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});I.useEffect(()=>{H==="visual"&&localStorage.setItem(ch,JSON.stringify(oe))},[oe,H]);const Ii=()=>{bt(""),y(null),ae([]),Te([{id:"1",term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1},{id:"2",term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1},{id:"3",term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1}]);const w="New Set "+new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}).replace(",","");bt(w),F("builder")},Ai=()=>{let w=!1;H==="raw"?w=!!Oe.trim():w=oe.some(A=>A.term.trim()||A.def.trim()),w?Re(!0):F("menu")},ao=()=>{Re(!1),F("menu"),bt(""),Te([])},Pi=()=>{Ds(),Re(!1)},Di=()=>{const w=oe.filter(A=>A.term.trim()||A.def.trim()).map(A=>{let D=`${A.term.trim()} / ${A.def.trim()}`;return A.year.trim()&&(D+=` /// ${A.year.trim()}`),A.image.trim()&&(D+=` ||| ${A.image.trim()}`),A.customFields.length>0&&(A.image.trim()||(D+=" ||| "),D+=" , ",A.customFields.forEach($=>{D+=`(${$.name})(${$.value})`})),A.star&&(D+=" %%STAR%%"),D}).join(`

&&&

`);Pe(w)},Li=()=>{const A=za(Oe).map(($,ve)=>{var $e;let ue=(($e=$.term)==null?void 0:$e[0])||"";return $.tags&&$.tags.length>0&&(ue=`${$.tags.map(Yt=>`(${Yt})`).join(" ")} ${ue}`),{id:Ot()+ve,term:ue,def:$.content||"",year:$.year||"",image:$.image||"",customFields:$.customFields||[],tags:$.tags||[],star:$.star||!1}}),D=new Set;for(A.forEach($=>$.customFields.forEach(ve=>D.add(ve.name))),ae(Array.from(D));A.length<3;)A.push({id:Ot(),term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1});Te(A)},Ps=w=>{w!==H&&(w==="raw"?Di():Li(),B(w))},$i=w=>{bt(w.name),y(w.id);const A=w.cards.map(($,ve)=>{let ue=$.term[0]||"";return $.tags&&$.tags.length>0&&(ue=`${$.tags.map(St=>`(${St})`).join(" ")} ${ue}`),{id:Ot()+ve,term:ue,def:$.content||"",year:$.year||"",image:$.image||"",customFields:$.customFields||[],tags:$.tags||[],originalCardId:$.id,star:$.star||!1}}),D=new Set;w.customFieldNames?w.customFieldNames.forEach($=>D.add($)):A.forEach($=>$.customFields.forEach(ve=>D.add(ve.name))),ae(Array.from(D)),Te(A),F("builder"),B("visual")},oo=async w=>{if(w.target.files&&w.target.files[0])try{const A=await w.target.files[0].text();if(!A.trim())throw new Error("Empty file");let D=w.target.files[0].name.replace(".json","").replace(".flashcards","").replace(".txt",""),$=[];try{const ue=JSON.parse(A);ue.name&&(D=ue.name),$=za(A)}catch{$=za(A)}if($.length===0){et(!0),Br.current&&(Br.current.value="");return}const ve=$.map((ue,$e)=>{var Yt;let St=((Yt=ue.term)==null?void 0:Yt[0])||"";return ue.tags&&ue.tags.length>0&&(St=`${ue.tags.map(qn=>`(${qn})`).join(" ")} ${St}`),{id:Ot()+$e,term:St,def:ue.content||"",year:ue.year||"",image:ue.image||"",customFields:ue.customFields||[],tags:ue.tags||[],star:ue.star||!1}});Te(ve),Pe(A),bt(D),F("builder"),B("visual")}catch(A){console.error("Upload failed",A),et(!0),Br.current&&(Br.current.value="")}},nt=()=>H==="visual"?oe.filter(w=>w.term.trim()||w.def.trim()).map(w=>{var ue;let A=w.term,D=[];const $=/^(\s*\([^)]+\)\s*)+/,ve=A.match($);return ve&&(D=((ue=ve[0].match(/\(([^)]+)\)/g))==null?void 0:ue.map(Yt=>Yt.slice(1,-1).trim()))||[],A=A.replace($,"")),A=A.trim(),{term:[A],content:w.def.trim(),year:w.year.trim()||void 0,image:w.image.trim()||void 0,customFields:w.customFields,tags:D,star:w.star,mastery:0,originalCardId:w.originalCardId}}):za(Oe),lo=()=>{const w=nt();if(w.length===0)return;if(!Ve.trim()){alert("Please enter a set name.");return}if(w.some(D=>{var $,ve,ue;return!((ve=($=D.term)==null?void 0:$[0])!=null&&ve.trim())||!((ue=D.content)!=null&&ue.trim())})){ge({isOpen:!0,message:"Some cards have empty terms or definitions. Are you sure you want to start?",onConfirm:()=>{Wn(w)}});return}Wn(w)},Wn=w=>{const A=w.map(($,ve)=>({id:Ot()+ve,term:$.term||["?"],content:$.content||"",year:$.year,image:$.image,mastery:0,star:$.star||!1,customFields:$.customFields||[],tags:$.tags||[]})),D={id:Ot(),name:Ve||"Untitled Set",cards:A,customFieldNames:q,lastPlayed:Date.now(),elapsedTime:0,topStreak:0,isSessionActive:!0};Wr(D)},Ds=()=>{if(!Ve.trim()){alert("Please name your set!");return}const w=oe.filter(D=>D.term.trim()||D.def.trim()).map(D=>{var St;let $=D.term.trim(),ve=[];const ue=/^(\s*\([^)]+\)\s*)+/,$e=$.match(ue);return $e&&(ve=((St=$e[0].match(/\(([^)]+)\)/g))==null?void 0:St.map(qn=>qn.slice(1,-1).trim()))||[],$=$.replace(ue,"").trim()),{id:Ot(),term:[$],content:D.def.trim(),year:D.year.trim(),image:D.image,customFields:D.customFields,mastery:0,star:D.star,tags:ve,originalSetId:Y||void 0,originalSetName:Ve}});if(w.length===0){alert("Please add at least one card!");return}const A={id:Y||Ot(),name:Ve,cards:w,lastPlayed:Date.now(),elapsedTime:0,topStreak:0,customFieldNames:q,folderId:Je||void 0};if(Y){const D=i.find($=>$.id===Y);D&&(A.folderId=D.folderId)}o(A),Te([{id:"1",term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1},{id:"2",term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1},{id:"3",term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1}]),bt(""),y(null),F("menu"),Re(!1)},Hn=()=>{let w=Oe;w=oe.filter(A=>A.term.trim()||A.def.trim()).map(A=>{let D=`${A.term.trim()} / ${A.def.trim()}`;return A.year.trim()&&(D+=` /// ${A.year.trim()}`),A.image.trim()&&(D+=` ||| ${A.image.trim()}`),A.customFields.length>0&&(A.image.trim()||(D+=" ||| "),D+=" , ",A.customFields.forEach($=>{D+=`(${$.name})(${$.value})`})),A.star&&(D+=" %%STAR%%"),D}).join(`

&&&

`),qa((Ve||"deck")+".flashcards",w,"text")},co=()=>{let w=Oe;H==="visual"&&(w=oe.filter(A=>A.term.trim()||A.def.trim()).map(A=>{let D=`${A.term.trim()} / ${A.def.trim()}`;return A.year.trim()&&(D+=` /// ${A.year.trim()}`),A.image.trim()&&(D+=` ||| ${A.image.trim()}`),A.customFields.length>0&&(A.image.trim()||(D+=" ||| "),D+=" , ",A.customFields.forEach($=>{D+=`(${$.name})(${$.value})`})),A.star&&(D+=" %%STAR%%"),D}).join(`

&&&

`)),navigator.clipboard.writeText(w),alert("Copied to clipboard!")},Ls=I.useCallback(()=>{Te(w=>[...w,{id:Ot(),term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1}])},[]),vn=I.useCallback((w,A,D)=>{Te($=>$.map(ve=>ve.id===w?{...ve,[A]:D}:ve))},[]),sr=I.useCallback(w=>{Te(A=>A.length<=1?[{id:Ot(),term:"",def:"",year:"",image:"",customFields:[],tags:[],star:!1}]:A.filter(D=>D.id!==w))},[]),uo=I.useCallback(w=>{fe(w),De(!0)},[]),Kt=I.useCallback(w=>{Te(A=>A.map(D=>D.id===w?{...D,term:D.def,def:D.term}:D))},[]),ho=w=>{J&&vn(J,"image",w)},fo=I.useMemo(()=>{const w=new Map,A=new Set;return oe.forEach(D=>{const $=D.term.trim().toLowerCase();$&&w.set($,(w.get($)||0)+1)}),oe.forEach(D=>{const $=D.term.trim().toLowerCase();$&&(w.get($)||0)>1&&A.add(D.id)}),A},[oe]),Mi=(w,A)=>{M===w?(c(w),Q(null)):(Q(w),setTimeout(()=>Q(null),3e3))},Vn=I.useMemo(()=>oe.some(w=>w.image&&w.image.startsWith("data:")),[oe]),Wr=w=>{if(m.starredOnly&&!w.cards.some(D=>D.star)){Ce(w);return}r(w)};return s.jsxs("div",{className:"max-w-5xl mx-auto w-full pb-20 animate-in fade-in duration-700",children:[s.jsx(Eg,{isOpen:Le,onSave:Pi,onDiscard:ao,onCancel:()=>Re(!1)}),s.jsx(Tg,{isOpen:ze,onClose:()=>De(!1),onSave:ho,initialValue:J&&((Hr=oe.find(w=>w.id===J))==null?void 0:Hr.image)||""}),s.jsx(Og,{isOpen:L.isOpen,onClose:()=>ge(w=>({...w,isOpen:!1})),onConfirm:L.onConfirm,message:L.message}),s.jsx(Rg,{isOpen:dt,onClose:()=>et(!1)}),s.jsx(Ig,{isOpen:!!_e,onClose:()=>Ce(null),onDisableAndPlay:()=>{_e&&(p({...m,starredOnly:!1}),_e.isSessionActive?n(_e):r(_e),Ce(null))}}),s.jsx(Cg,{isOpen:!!Qe,folderName:(Qe==null?void 0:Qe.name)||"",setCount:(Qe==null?void 0:Qe.count)||0,onClose:()=>He(null),onConfirm:Is}),s.jsx(dh,{isOpen:X,onClose:()=>je(!1)}),s.jsx(dh,{isOpen:X,onClose:()=>je(!1)}),s.jsx("input",{ref:Br,type:"file",className:"hidden",onChange:oo}),s.jsxs("div",{className:"mb-10 text-left",children:[P==="menu"&&s.jsx("div",{className:"text-accent font-mono text-sm mb-1 tracking-widest uppercase opacity-80",children:Tr}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-4xl font-bold text-text tracking-tight mb-2",children:P==="menu"?io:"List Builder"})}),s.jsx("p",{className:"text-muted text-lg",children:P==="menu"?"Study a deck or create a new one below.":"Build decks here!"})]}),P==="builder"&&s.jsxs("button",{onClick:Ai,className:"mb-6 flex items-center gap-3 text-muted hover:text-text transition-colors font-bold uppercase text-xs tracking-wider group",children:[s.jsx("div",{className:"p-2 rounded-full border border-outline group-hover:bg-panel group-hover:border-accent transition-colors",children:s.jsx(yi,{size:16})}),"Back to Library"]}),s.jsxs("div",{className:"space-y-12",children:[P==="menu"&&s.jsxs("div",{className:"max-w-4xl mx-auto",children:[Os.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-xs font-bold text-muted uppercase tracking-widest pl-2 mb-4",children:"Ongoing"}),s.jsx("div",{className:"overflow-x-auto pb-2 -mx-2 px-2 scrollbar-thin scrollbar-thumb-outline scrollbar-track-transparent",children:s.jsx("div",{className:"flex gap-4",style:{minWidth:"min-content"},children:Os.map(w=>{const A=w.cards.filter(ue=>ue.mastery>=2).length,D=w.cards.filter(ue=>ue.mastery===1).length,$=w.cards.filter(ue=>ue.mastery===0).length,ve=Z===w.id;return s.jsxs("div",{className:G("relative flex-shrink-0 w-64 h-48 bg-panel-2 border border-outline rounded-2xl p-5 transition-all hover:border-accent group flex flex-col",w.isMultistudy&&"overflow-hidden"),children:[w.isMultistudy&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute inset-0 opacity-[0.15] pointer-events-none",style:{backgroundImage:"repeating-linear-gradient(45deg, #000 0, #000 20px, transparent 20px, transparent 40px)"}}),s.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-accent/50"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-accent mb-1",children:w.isMultistudy?"Multistudy":"Learn"}),s.jsx("div",{className:"font-bold text-text truncate",children:w.name})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:w.isMultistudy?s.jsx("ul",{className:"text-xs text-muted space-y-1 h-full overflow-y-auto scrollbar-thin scrollbar-thumb-outline scrollbar-track-transparent pr-1",children:w.cards.reduce((ue,$e)=>($e.originalSetName&&!ue.includes($e.originalSetName)&&ue.push($e.originalSetName),ue),[]).map((ue,$e)=>s.jsxs("li",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"text-accent",children:""}),s.jsx("span",{className:"truncate",children:ue})]},$e))}):s.jsxs("div",{className:"flex gap-1.5 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-panel-3 border border-outline rounded-lg",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-outline"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-outline"})]}),s.jsx("span",{className:"text-xs font-mono text-muted",children:$})]}),s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-yellow/10 border border-yellow/20 rounded-lg",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-yellow"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-outline"})]}),s.jsx("span",{className:"text-xs font-mono text-yellow",children:D})]}),s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green/10 border border-green/20 rounded-lg",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green"})]}),s.jsx("span",{className:"text-xs font-mono text-green",children:A})]})]})}),s.jsxs("div",{className:"flex gap-2 mt-auto pt-3",children:[s.jsxs("button",{onClick:()=>n(w),className:"flex-1 px-3 py-2 bg-accent text-bg text-xs font-bold rounded-lg hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-1.5",children:[s.jsx(Jl,{size:12,fill:"currentColor"})," Resume"]}),s.jsx("button",{onClick:()=>{ve?(w.isMultistudy?c(w.id):d(w.id),me(null)):(me(w.id),setTimeout(()=>me(null),3e3))},className:G("px-3 py-2 border rounded-lg transition-all flex items-center justify-center",ve?"bg-red text-bg border-red":"bg-panel-3 border-outline text-muted hover:text-red hover:border-red"),title:"End Session",children:ve?s.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Sure?"}):s.jsx(pn,{size:12})})]})]})]},w.id)})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-xs font-bold text-muted uppercase tracking-widest flex items-center gap-2 pl-2",children:Je?s.jsxs("button",{onClick:()=>qt(null),className:"flex items-center gap-1 hover:text-text transition-colors",children:[s.jsx(yi,{size:14})," ",Nr==null?void 0:Nr.name]}):"Library"}),s.jsxs("div",{className:"flex gap-2",children:[Je&&s.jsxs("button",{onClick:()=>yn(Je),className:"flex items-center gap-2 px-3 py-1.5 bg-accent/10 text-accent border border-accent/20 rounded-lg text-xs font-bold hover:bg-accent/20 transition-colors",children:[s.jsx(Jl,{size:14})," Study Folder"]}),s.jsxs("button",{onClick:()=>{var w;return(w=Br.current)==null?void 0:w.click()},className:"flex items-center gap-2 px-3 py-1.5 bg-panel-2 border border-outline rounded-lg text-xs font-bold text-muted hover:text-text hover:border-accent transition-colors",children:[s.jsx(wc,{size:14})," Import"]}),s.jsxs("button",{onClick:Ii,className:"flex items-center gap-2 px-3 py-1.5 bg-text text-bg rounded-lg text-xs font-bold hover:scale-105 active:scale-95 transition-all shadow-lg",children:[s.jsx(Fa,{size:14})," Create"]})]})]}),i.length===0?s.jsx("div",{className:"py-16 border border-dashed border-outline rounded-2xl bg-panel/30 text-center",children:s.jsx("p",{className:"text-muted italic mb-4",children:"Your library is empty."})}):s.jsxs("div",{className:"space-y-8",children:[!Je&&Ts.length>0&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:Ts.map(w=>{const A=i.filter($=>$.folderId===w.id),D={brown:"bg-accent/20 border-accent text-accent",red:"bg-red/20 border-red text-red",blue:"bg-blue/20 border-blue text-blue",yellow:"bg-yellow/20 border-yellow text-yellow",green:"bg-green/20 border-green text-green",purple:"bg-purple/20 border-purple text-purple"};return s.jsx("div",{className:G("border rounded-2xl p-4 transition-all cursor-pointer hover:scale-[1.02]",D[w.color],te?"ring-2 ring-offset-2 ring-offset-bg ring-accent":""),onClick:()=>{rt!==w.id&&(te?Rs(te,w.id):qt(w.id))},children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 font-bold flex-1",children:[s.jsx(Mn,{size:18}),rt===w.id?s.jsx("input",{type:"text",value:V,onChange:$=>le($.target.value),onKeyDown:$=>{$.key==="Enter"&&Ri(),$.key==="Escape"&&ht(null)},onBlur:Ri,autoFocus:!0,className:"bg-transparent border-b border-current outline-none w-full",onClick:$=>$.stopPropagation()}):s.jsx("span",{children:w.name})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("span",{className:"text-xs opacity-70 font-mono mr-2",children:[A.length," sets"]}),ke.size===0&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:$=>{$.stopPropagation(),xn(w)},className:"p-1 hover:bg-black/10 rounded",title:"Rename Folder",children:s.jsx(vi,{size:14})}),s.jsx("button",{onClick:$=>{$.stopPropagation(),gn(w.id)},className:"p-1 hover:bg-black/10 rounded",title:"Delete Folder",children:s.jsx(Ur,{size:14})})]})]})]})},w.id)})}),s.jsxs("div",{className:"space-y-3",children:[te&&s.jsx("div",{className:"bg-panel-2 border border-dashed border-accent p-4 rounded-xl text-center mb-4 cursor-pointer hover:bg-accent/10 transition-colors",onClick:()=>Rs(te,void 0),children:s.jsx("span",{className:"text-sm font-bold text-accent",children:"Move here (Remove from folder)"})}),Ci.map(w=>s.jsxs("div",{className:"relative group/row",children:[s.jsx("div",{className:"absolute -left-12 top-1/2 -translate-y-1/2 w-12 flex justify-center",children:s.jsx("div",{onClick:()=>Ti(w.id),className:G("w-5 h-5 rounded border-2 flex items-center justify-center cursor-pointer transition-all",ke.has(w.id)?"bg-accent border-accent":"border-outline hover:border-accent"),children:ke.has(w.id)&&s.jsx("div",{className:"w-2.5 h-1.5 border-b-2 border-l-2 border-bg -rotate-45 -mt-0.5"})})}),s.jsxs("div",{className:"group bg-panel border border-outline p-5 rounded-2xl hover:border-accent transition-all shadow-sm flex flex-col justify-between h-full",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-lg text-text group-hover:text-accent transition-colors",children:w.name}),s.jsxs("div",{className:"text-xs text-muted font-mono",children:[w.cards.length," card",w.cards.length===1?"":"s"]})]}),s.jsx("div",{className:"flex items-center gap-1",children:ke.size===0&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>Ee(w.id),className:G("p-1.5 rounded hover:bg-panel-2 transition-all",te===w.id?"text-accent animate-pulse":"text-muted hover:text-text"),title:"Move to Folder",children:s.jsx(Mn,{size:16})}),s.jsx("button",{onClick:()=>$i(w),className:"p-1.5 text-muted hover:text-text rounded hover:bg-panel-2 transition-all",title:"Edit",children:s.jsx(vi,{size:16})}),s.jsx("button",{onClick:()=>qa(w.name+".flashcards",JSON.stringify(w,null,2),"json"),className:"p-1.5 text-muted hover:text-text rounded hover:bg-panel-2 transition-all",title:"Export JSON",children:s.jsx(mn,{size:16})}),s.jsx("button",{onClick:()=>b(w.id),className:"p-1.5 text-muted hover:text-text rounded hover:bg-panel-2 transition-all",title:"Duplicate Set",children:s.jsx(Ka,{size:16})}),s.jsx("button",{onClick:A=>{A.stopPropagation(),Mi(w.id)},className:G("p-1.5 rounded transition-all flex items-center justify-center",M===w.id?"bg-red text-bg w-12":"text-muted hover:text-red hover:border-red"),title:"Delete Set",children:M===w.id?s.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Sure?"}):s.jsx(pn,{size:16})})]})})]}),s.jsx("div",{className:"pt-2 mt-2 flex gap-2 relative z-10",children:s.jsxs("button",{onClick:()=>f(w),className:"w-full px-4 py-2 bg-panel-2 border border-outline hover:border-accent text-text text-sm font-bold rounded-lg hover:bg-accent hover:text-bg transition-all flex items-center justify-center gap-2",children:[s.jsx(Pp,{size:14})," Open"]})})]})]},w.id))]}),ke.size>0&&s.jsxs("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 flex items-center gap-4 bg-panel border border-outline shadow-2xl p-2 rounded-2xl animate-in slide-in-from-bottom-4",children:[s.jsxs("div",{className:"pl-4 pr-2 text-sm font-bold text-text",children:[ke.size," selected"]}),s.jsx("div",{className:"h-6 w-px bg-outline"}),s.jsx("button",{onClick:Bn,className:"px-6 py-2 bg-accent text-bg font-bold rounded-xl hover:scale-105 active:scale-95 transition-all shadow-lg",children:"Multistudy"}),s.jsxs("button",{onClick:As,className:"px-6 py-2 bg-panel-2 border border-accent text-accent font-bold rounded-xl hover:bg-accent hover:text-bg transition-all shadow-lg flex items-center gap-2",title:"Create a new set by combining all selected sets",children:[s.jsx(Op,{size:16})," Combine"]}),s.jsx("button",{onClick:Oi,className:"px-6 py-2 bg-panel-2 border border-outline text-text font-bold rounded-xl hover:bg-panel-3 transition-all shadow-lg",children:"New Folder"}),S.length>0&&s.jsxs("div",{className:"relative group",children:[s.jsx("button",{className:"px-6 py-2 bg-panel-2 border border-outline text-text font-bold rounded-xl hover:bg-panel-3 transition-all shadow-lg flex items-center gap-2",children:"Move to..."}),s.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-panel border border-outline rounded-xl shadow-xl p-2 hidden group-hover:block animate-in fade-in slide-in-from-bottom-2",children:S.map(w=>s.jsxs("button",{onClick:()=>Fn(w.id),className:"w-full text-left px-3 py-2 rounded-lg hover:bg-panel-2 text-sm font-medium flex items-center gap-2",children:[s.jsx("div",{className:G("w-2 h-2 rounded-full",{"bg-accent":w.color==="brown","bg-red":w.color==="red","bg-blue":w.color==="blue","bg-yellow":w.color==="yellow","bg-green":w.color==="green","bg-purple":w.color==="purple"})}),w.name]},w.id))})]}),s.jsx("button",{onClick:so,className:G("px-6 py-2 font-bold rounded-xl transition-all border border-transparent",Fe>0?"bg-red text-bg animate-pulse":"bg-panel-2 text-red hover:bg-red/10"),children:Fe===0?"Delete":Fe===1?"Click 2x":"Click 1x"})]}),Un&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:()=>Ut(!1),children:s.jsxs("div",{className:"bg-panel border border-outline rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-in zoom-in-95",onClick:w=>w.stopPropagation(),children:[s.jsx("h3",{className:"text-lg font-bold text-text mb-4",children:"Create Folder"}),s.jsx("input",{autoFocus:!0,value:qe,onChange:w=>Gt(w.target.value),placeholder:"Folder Name",className:"w-full bg-panel-2 border border-outline rounded-xl px-4 py-3 text-text mb-6 focus:outline-none focus:border-accent font-bold",onKeyDown:w=>{w.key==="Enter"&&zn()}}),s.jsx("div",{className:"grid grid-cols-6 gap-2 mb-6",children:["brown","red","blue","yellow","green","purple"].map(w=>s.jsx("button",{onClick:()=>ot(w),className:G("w-8 h-8 rounded-full border-2 transition-all",w==="brown"&&"bg-accent border-accent",w==="red"&&"bg-red border-red",w==="blue"&&"bg-blue border-blue",w==="yellow"&&"bg-yellow border-yellow",w==="green"&&"bg-green border-green",w==="purple"&&"bg-purple border-purple",mt===w?"scale-110 ring-2 ring-offset-2 ring-offset-panel ring-text":"opacity-70 hover:opacity-100 hover:scale-105"),title:w},w))}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>Ut(!1),className:"px-4 py-2 text-muted hover:text-text",children:"Cancel"}),s.jsx("button",{onClick:()=>zn(mt),className:"px-6 py-2 bg-text text-bg font-bold rounded-lg hover:bg-text/90 transition-colors",children:"OK"})]})]})}),"    "]})]})]}),P==="builder"&&s.jsxs("div",{className:"animate-in zoom-in-95 duration-300",children:[s.jsxs("div",{className:"bg-panel border border-outline rounded-2xl p-6 shadow-lg",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6 border-b border-outline pb-6",children:[s.jsx("input",{value:Ve,onChange:w=>bt(w.target.value),placeholder:"Set Name",className:"bg-panel-2 border border-outline rounded-xl px-4 py-2 text-text w-full md:w-auto min-w-[300px] focus:outline-none focus:border-accent transition-colors font-bold"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group select-none",children:[s.jsx("div",{onClick:()=>ie(!he),className:G("w-10 h-6 rounded-full p-1 transition-colors border border-transparent",he?"bg-accent":"bg-outline"),children:s.jsx("div",{className:G("w-3.5 h-3.5 bg-bg rounded-full shadow-sm transition-transform duration-200",he?"translate-x-4":"translate-x-0")})}),s.jsx("span",{className:"text-sm text-muted group-hover:text-text transition-colors font-medium",children:"Show Years"})]}),s.jsx("div",{className:"flex items-center gap-2",ref:nr,children:s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>xt(!jr),className:G("flex items-center gap-2 px-3 py-1.5 bg-panel-2 border border-outline rounded-lg text-sm font-medium transition-all",jr?"text-accent border-accent":"text-muted hover:text-text hover:border-accent"),children:[s.jsx(Fa,{size:16})," Custom Fields"]}),jr&&s.jsxs("div",{className:"absolute top-full right-0 mt-2 w-64 bg-panel border border-outline rounded-xl shadow-xl p-4 z-50 animate-in fade-in zoom-in-95",children:[s.jsx("h4",{className:"text-xs font-bold text-muted uppercase mb-2",children:"Manage Fields"}),s.jsxs("div",{className:"space-y-2 mb-3",children:[q.map(w=>s.jsxs("div",{className:"flex justify-between items-center bg-panel-2 px-2 py-1 rounded",children:[s.jsx("span",{className:"text-sm",children:w}),s.jsx("button",{onClick:()=>ae(A=>A.filter(D=>D!==w)),className:"text-red hover:text-red/80",children:s.jsx(Ur,{size:14})})]},w)),q.length===0&&s.jsx("div",{className:"text-xs text-muted italic",children:"No custom fields"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{value:Ae,onChange:w=>We(w.target.value),placeholder:"New Field",className:"flex-1 bg-panel-2 border border-outline rounded px-2 py-1 text-sm focus:border-accent focus:outline-none"}),s.jsx("button",{onClick:()=>{if(Ae.trim()&&!q.includes(Ae.trim())){if(q.length>=3){alert("Max 3 custom fields allowed.");return}ae(w=>[...w,Ae.trim()]),We("")}},className:"p-1 bg-accent text-bg rounded hover:scale-105 transition-transform",children:s.jsx(Fa,{size:16})})]})]})]})}),s.jsx("div",{className:"h-6 w-px bg-outline"}),s.jsxs("div",{className:"flex items-center bg-panel-2 border border-outline rounded-lg p-1",children:[s.jsxs("button",{onClick:()=>Ps("visual"),className:G("flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all",H==="visual"?"bg-panel shadow-sm text-accent":"text-muted hover:text-text"),children:[s.jsx(Bh,{size:16})," Visual"]}),s.jsxs("button",{onClick:()=>Ps("raw"),className:G("flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all",H==="raw"?"bg-panel shadow-sm text-accent":"text-muted hover:text-text"),children:[s.jsx(Es,{size:16})," Raw Text"]})]})]})]}),s.jsx("div",{className:"mb-6",children:H==="visual"?s.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:[s.jsx("div",{className:"flex justify-end mb-2",children:s.jsxs("button",{onClick:()=>je(!0),className:"text-xs text-muted hover:text-accent flex items-center gap-1",children:[s.jsx(sh,{size:12})," Formatting Help"]})}),Fr?s.jsxs(s.Fragment,{children:[oe.map((w,A)=>s.jsx(Ag,{row:w,index:A,showYear:he,isDuplicate:fo.has(w.id),isLast:A===oe.length-1,customFieldNames:q,updateRow:vn,removeRow:sr,onAddNext:Ls,onOpenImageModal:uo,onSwap:Kt},w.id)),s.jsxs("button",{onClick:Ls,className:"w-full py-3 border border-dashed border-outline rounded-xl text-muted hover:text-accent hover:border-accent hover:bg-panel-2 transition-all flex items-center justify-center gap-2 text-sm font-bold mt-4",children:[s.jsx(Fa,{size:16})," Add Card"]})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-[400px] gap-4",children:[s.jsx(ug,{className:"animate-spin text-accent",size:48}),s.jsx("div",{className:"text-muted font-bold animate-pulse",children:"Loading Builder..."})]})]}):s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"flex justify-end mb-2",children:s.jsxs("button",{onClick:()=>je(!0),className:"text-xs text-muted hover:text-accent flex items-center gap-1",children:[s.jsx(sh,{size:12})," Formatting Help"]})}),s.jsx("textarea",{value:Oe,onChange:w=>Pe(w.target.value),placeholder:`Term / Definition /// Year ||| ImageURL

&&&

Next Term / Definition`,className:"w-full bg-panel-2 border border-outline rounded-xl p-4 min-h-[400px] font-mono text-sm focus:outline-none focus:border-accent resize-y leading-relaxed"})]})}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between pt-6 border-t border-outline gap-4",children:[s.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[s.jsxs("button",{onClick:co,className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 text-muted hover:text-text font-medium transition-colors rounded-lg hover:bg-panel-2",children:[s.jsx(Ka,{size:18}),s.jsx("span",{className:"inline",children:"Copy"})]}),s.jsxs("button",{onClick:Hn,className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 text-muted hover:text-text font-medium transition-colors rounded-lg hover:bg-panel-2",children:[s.jsx(mn,{size:18}),s.jsx("span",{className:"inline",children:".flashcards"})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto",children:[s.jsxs("button",{onClick:Ds,className:"flex items-center justify-center gap-2 px-6 py-3 bg-panel-2 border border-outline rounded-xl font-bold text-text hover:border-accent transition-all",children:[s.jsx(Mn,{size:18})," Save to Library"]}),s.jsxs("button",{onClick:lo,className:"flex items-center justify-center gap-2 bg-accent text-bg px-8 py-3 rounded-xl font-bold hover:scale-105 active:scale-95 transition-all shadow-lg",children:[s.jsx(Jl,{size:18,fill:"currentColor"})," Study Now"]})]})]})]}),s.jsxs("div",{className:"text-center mt-6 text-sm opacity-80 space-y-1",children:[s.jsx("p",{className:"text-red font-bold",children:"Cards are saved per device in local storage: if you clear your cookies, you can lose them. It is highly recommended you download important sets!"}),Vn&&s.jsx("p",{className:"text-blue font-bold",children:"You've uploaded images directly to this set. If you download your set, they won't be saved. To save them, put images in your set with image URLs."})]})]})]})]})},Dg=({set:i,onUpdateSet:r,onFinish:n,settings:o,onExit:c,onCorrect:d})=>{var nr,hr;const[f,m]=I.useState(null),[p,x]=I.useState(""),[b,N]=I.useState(""),[S,O]=I.useState({}),[j,C]=I.useState({type:"idle"}),[P,F]=I.useState(!1),[H,B]=I.useState(!1),[X,je]=I.useState(0),[he,ie]=I.useState(!1),[q,ae]=I.useState(i.topStreak||0),[Ae,We]=I.useState(null),[Le,Re]=I.useState([]),[dt,et]=I.useState(!1),[ze,De]=I.useState(!1),J=I.useRef(null),fe=I.useRef(null),Y=I.useMemo(()=>{let M=i.cards;o.starredOnly&&(M=M.filter(Z=>Z.star));const Q=M.filter(Z=>Z.mastery<2);for(let Z=Q.length-1;Z>0;Z--){const me=Math.floor(Math.random()*(Z+1));[Q[Z],Q[me]]=[Q[me],Q[Z]]}return Q},[i.cards,o.starredOnly]),y=I.useMemo(()=>f?i.cards.find(M=>M.id===f)||Y[0]||null:Y[0]||null,[f,i.cards,Y]),L=I.useMemo(()=>{const M=[0,0,0];return(o.starredOnly?i.cards.filter(Z=>Z.star):i.cards).forEach(Z=>M[Z.mastery]++),M},[i.cards,o.starredOnly]);I.useEffect(()=>{if(j.type==="correct"||j.type==="incorrect"||j.type==="reveal")return;if(!Y.find(Q=>Q.id===f)){if(Y.length>0)m(Y[0].id);else if(i.cards.length>0){const Z=o.starredOnly?i.cards.filter(me=>me.star):i.cards;Z.length>0&&Z.every(me=>me.mastery===2)?n():Z.length===0&&o.starredOnly&&(alert("No starred cards found!"),n())}}},[Y,f,i.cards,n,o.starredOnly]),I.useEffect(()=>{if(o.mode==="multiple_choice"&&y){const M=o.answerWithDefinition?y.content:y.term[0],Q=i.cards.filter(pe=>pe.id!==y.id),Z=[],me=[...Q].sort(()=>.5-Math.random());for(let pe=0;pe<Math.min(3,me.length);pe++)Z.push(o.answerWithDefinition?me[pe].content:me[pe].term[0]);const ke=[M,...Z].sort(()=>.5-Math.random());Re(ke)}},[y,o.mode,o.answerWithDefinition,i.cards]),I.useEffect(()=>{var M;(j.type==="idle"||j.type==="retype_needed")&&((M=J.current)==null||M.focus())},[j.type,f]);const ge=(M,Q)=>{const Z=i.cards.map(me=>me.id===M?{...me,...Q}:me);r({...i,cards:Z,topStreak:q})},_e=M=>{const Q=i.cards.map(Z=>Z.mastery===M?{...Z,mastery:Math.max(0,M-1)}:Z);r({...i,cards:Q,topStreak:q}),We(null)},Ce=(M=!1)=>{he&&!M&&je(0),ie(!1);const Q=Y.find(Z=>Z.id!==f);if(Q)m(Q.id);else if(Y.length>0)m(Y[0].id);else{n();return}C({type:"idle"}),x(""),N(""),O({})},oe=()=>{var me,ke;if(!y)return;const M=Object.values(S).some(pe=>pe.trim());if(!p.trim()&&(!y.year||!b.trim())&&!M)return;const Q=o.answerWithDefinition?ip(p,b,S,y,o.strictSpelling):sp(p,b,S,y,o.strictSpelling),Z=o.answerWithDefinition?Q.isDefinitionMatch:Q.isTermMatch;if(Q.isMatch){if(j.type==="retype_needed")ie(!0);else{const Fe=Math.min(2,y.mastery+1),Ge=X+1;je(Ge);let Je=q;Ge>q&&(ae(Ge),Je=Ge);const qt=i.cards.map(Qe=>Qe.id===y.id?{...Qe,mastery:Fe}:Qe);r({...i,cards:qt,topStreak:Je}),ie(!1)}d(),C({type:"correct",correction:!o.strictSpelling&&Q.bestDist>0?o.answerWithDefinition?y.content.substring(0,50)+"...":Q.bestTerm:void 0})}else{if(j.type==="retype_needed"){B(!0),setTimeout(()=>B(!1),500);return}if(o.retypeOnMistake){if(C({type:"retype_needed",results:{isTermMatch:Z,isYearMatch:Q.isYearMatch,isCustomMatch:Q.isCustomMatch,customResults:Q.customResults}}),Z||x(""),Q.isYearMatch||N(""),!Q.isCustomMatch){const pe={...S};Object.keys(Q.customResults).forEach(Fe=>{Q.customResults[Fe]||(pe[Fe]="")}),O(pe)}}else{let pe=o.answerWithDefinition?`Answer: ${y.content.length>100?y.content.substring(0,100)+"...":y.content}`:`Answer: ${y.term.join(" / ")}`;if(y.year&&!Q.isYearMatch&&Z)pe=`${o.answerWithDefinition?"Definition":"Term"} correct, but year is ${y.year}`;else if(Z&&Q.isYearMatch&&!Q.isCustomMatch){const Fe=Object.keys(Q.customResults||{}).find(Ge=>!Q.customResults[Ge]);if(Fe){const Ge=(ke=(me=y.customFields)==null?void 0:me.find(Je=>Je.name===Fe))==null?void 0:ke.value;pe=`${o.answerWithDefinition?"Definition":"Term"}/Year correct, but ${Fe} is ${Ge}`}}C({type:"incorrect",message:pe,customResults:{year:!Q.isYearMatch,custom:Q.customResults}})}ie(!0)}},Te=M=>{if(!y)return;if(o.answerWithDefinition?M.toLowerCase()===y.content.toLowerCase():y.term.some(Z=>Z.toLowerCase()===M.toLowerCase())){const Z=Math.min(2,y.mastery+1),me=X+1;je(me);let ke=q;me>q&&(ae(me),ke=me);const pe=i.cards.map(Fe=>Fe.id===y.id?{...Fe,mastery:Z}:Fe);r({...i,cards:pe,topStreak:ke}),ie(!1),d(),C({type:"correct"})}else{const Z=o.answerWithDefinition?y.content:y.term.join(" / ");C({type:"incorrect",message:`Correct Answer: ${Z}`}),ie(!0)}},Oe=()=>{if(!y)return;if(ie(!0),o.retypeOnMistake&&j.type!=="retype_needed"){C({type:"retype_needed",results:{isTermMatch:!1,isYearMatch:!1,isCustomMatch:!1,customResults:{}}});return}const M=o.answerWithDefinition?y.content:y.term.join(" / ");C({type:"reveal",message:`Answer: ${M}`})},Pe=M=>{if(y){if(M){ie(!1);const Q=X+1;je(Q);let Z=q;Q>q&&(ae(Q),Z=Q);const me=Math.min(2,y.mastery+1),ke=i.cards.map(pe=>pe.id===y.id?{...pe,mastery:me}:pe);r({...i,cards:ke,topStreak:Z})}else{const Q=Math.max(0,y.mastery-1),Z=i.cards.map(me=>me.id===y.id?{...me,mastery:Q}:me);je(0),ie(!1),r({...i,cards:Z})}Ce(M)}},Ve=M=>{M.key==="Enter"&&(M.preventDefault(),M.stopPropagation(),xt&&oe())};I.useEffect(()=>{const M=Q=>{if(!P){if(Q.key.toLowerCase()==="o"){if(!(j.type!=="idle")||j.type==="retype_needed")return;Q.preventDefault(),j.type==="incorrect"||j.type==="reveal"?Pe(!0):j.type==="correct"&&Pe(!1)}Q.key==="Enter"&&(j.type==="idle"||j.type==="retype_needed"||(Q.preventDefault(),Ce()))}};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[j,y,Ce,Pe,P]);const bt=()=>{y&&ge(y.id,{star:!y.star})},jr=()=>{const M={...i,cards:i.cards.map(Q=>({...Q,mastery:0}))};qa(`${i.name}.flashcards`,JSON.stringify(M,null,2),"json")},xt=j.type==="idle"||j.type==="retype_needed";return y?s.jsxs("div",{className:"w-full max-w-5xl mx-auto pb-20 pt-0",children:[s.jsxs("div",{className:"flex justify-between items-end mb-4 select-none",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[s.jsxs("button",{onClick:c,className:"flex items-center gap-2 text-muted hover:text-text font-bold text-sm uppercase tracking-wider transition-colors",children:[s.jsx("div",{className:"p-2 rounded-full border border-outline hover:bg-panel transition-colors",children:s.jsx(yi,{size:16})}),"Back"]}),i.isMultistudy&&s.jsxs("button",{onClick:jr,className:"flex items-center gap-2 text-muted hover:text-text font-bold text-sm uppercase tracking-wider transition-colors",title:"Download Session as Set",children:[s.jsx("div",{className:"p-2 rounded-full border border-outline hover:bg-panel transition-colors",children:s.jsx(mn,{size:16})}),"Save Set"]})]}),s.jsx("div",{className:"flex gap-3",children:[0,1,2].map(M=>s.jsxs("div",{className:"relative",children:[Ae===M&&s.jsx("div",{className:"absolute -top-5 left-0 w-full text-center text-[10px] font-bold text-red animate-pulse",children:"CONFIRM?"}),s.jsxs("div",{onClick:()=>{Ae===M?_e(M):L[M]>0&&(We(M),setTimeout(()=>We(null),3e3))},className:G("flex flex-col items-center justify-center w-16 py-2 rounded-xl border transition-all cursor-pointer active:scale-95","bg-panel border-outline",L[M]>0&&"hover:border-accent"),children:[s.jsx("span",{className:"text-lg font-bold leading-none mb-1 text-text",children:L[M]}),s.jsxs("div",{className:"flex gap-1",children:[M>=1&&s.jsx("div",{className:G("w-2 h-2 rounded-full",M>=1?"bg-green":"bg-outline")}),M>=2&&s.jsx("div",{className:G("w-2 h-2 rounded-full",M>=2?"bg-green":"bg-outline")}),M===0&&s.jsx("div",{className:"w-2 h-2 rounded-full border border-outline"})]})]})]},M))})]}),s.jsxs("div",{className:G("bg-panel border rounded-[24px] shadow-2xl p-10 relative overflow-hidden transition-all duration-500",j.type==="correct"?"border-green/50 shadow-[0_0_30px_rgba(147,210,108,0.1)]":"border-outline",j.type==="retype_needed"&&"border-red/50"),children:[s.jsxs("div",{className:"flex justify-between items-start mb-8",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>bt(),className:G("transition-all hover:scale-110 active:scale-95",y.star?"text-yellow":"text-muted hover:text-yellow"),children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:y.star?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),y.tags&&y.tags.length>0&&s.jsx("div",{className:"flex gap-1 ml-2",children:y.tags.map(M=>s.jsx("span",{className:"px-2 py-0.5 bg-accent/10 border border-accent rounded-full text-xs font-bold text-accent uppercase tracking-wider",children:M},M))})]}),s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx("button",{onClick:()=>{i.isMultistudy&&!ze?et(!0):F(!0)},className:"p-2 text-muted hover:text-text hover:bg-panel-2 rounded-lg transition-colors mr-2",title:"Edit Card",children:s.jsx(vi,{size:18})}),s.jsx("div",{className:G("w-5 h-5 rounded-full border-2 transition-all",y.mastery>=1?"bg-green border-green shadow-[0_0_10px_var(--green)]":"bg-transparent border-outline/50")}),s.jsx("div",{className:G("w-5 h-5 rounded-full border-2 transition-all",y.mastery>=2?"bg-green border-green shadow-[0_0_10px_var(--green)]":"bg-transparent border-outline/50")})]})]}),s.jsx("div",{className:"mb-6"}),s.jsx("div",{className:"min-h-[200px] mb-10 flex items-center",children:y.image?s.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[s.jsx("div",{className:"flex justify-center md:justify-center",children:s.jsx("img",{src:y.image,alt:"Card visual",className:"rounded-xl max-h-[400px] w-auto object-contain border border-outline shadow-sm max-w-full"})}),s.jsx("div",{className:"text-3xl font-medium leading-normal text-text font-sans text-left",children:o.answerWithDefinition?s.jsx("div",{children:y.term.map((M,Q)=>s.jsx("div",{children:Ss(M,`term-${Q}`)},Q))}):Ga(y.content)})]}):s.jsx("div",{className:"w-full text-3xl font-medium leading-normal text-text font-sans text-left",children:o.answerWithDefinition?s.jsx("div",{children:y.term.map((M,Q)=>s.jsx("div",{children:Ss(M,`term-${Q}`)},Q))}):Ga(y.content)})}),s.jsxs("div",{className:"space-y-6",children:[j.type==="retype_needed"&&s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("div",{className:"text-red font-bold flex items-center gap-2",children:"Retype the incorrect fields."}),s.jsx("button",{onClick:()=>Pe(!0),className:"text-xs text-muted hover:text-text underline",children:"Actually, I was right"})]}),o.mode==="multiple_choice"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Le.map((M,Q)=>{let Z="border-outline hover:border-accent bg-panel-2";return j.type==="correct"&&y.term.includes(M)||j.type==="incorrect"&&y.term.includes(M)?Z="border-green bg-green/10 text-green":j.type!=="idle"&&!y.term.includes(M)&&(Z="opacity-50 border-transparent bg-panel-2"),s.jsx("button",{onClick:()=>xt&&Te(M),disabled:!xt,className:G("p-6 rounded-xl text-lg font-bold text-left transition-all border-2",Z,xt&&"hover:scale-[1.02] active:scale-[0.98]"),children:M},Q)})}):s.jsx("div",{className:G("grid grid-cols-1 md:grid-cols-12 gap-4 items-start",H&&"animate-shake"),children:(()=>{var Qe;const M=((Qe=i.customFieldNames)==null?void 0:Qe.filter(He=>{var rt;return(rt=y.customFields)==null?void 0:rt.some(ht=>ht.name===He)}))||[],Q=!!y.year,Z=1+(Q?1:0)+M.length;let me="md:col-span-12",ke="md:col-span-12",pe=M.map(()=>"md:col-span-12");const Fe=["term","year","custom"];Z===2?Q?(me="md:col-span-9",ke="md:col-span-3"):(me="md:col-span-8",pe=["md:col-span-4"]):Z===3?Q?(me="md:col-span-7",ke="md:col-span-2",pe=["md:col-span-3"]):(me="md:col-span-12",pe=["md:col-span-6","md:col-span-6"]):Z===4?Q?(me="md:col-span-9",ke="md:col-span-3",pe=["md:col-span-6","md:col-span-6"]):(me="md:col-span-9",pe=["md:col-span-3","md:col-span-6","md:col-span-6"]):Z===5&&(me="md:col-span-7",ke="md:col-span-2",pe=["md:col-span-3","md:col-span-6","md:col-span-6"]);const Ge=()=>{var He,rt,ht,V;return s.jsxs("div",{className:G("relative",me),children:[j.type==="retype_needed"&&!((He=j.results)!=null&&He.isTermMatch)&&s.jsxs("div",{className:"absolute -top-6 left-0 text-xs font-bold text-accent animate-in fade-in",children:["Answer: ",o.answerWithDefinition?y.content.length>50?y.content.substring(0,50)+"...":y.content:y.term[0]]}),s.jsx("input",{ref:J,type:"text",value:p,onChange:le=>x(le.target.value),onKeyDown:Ve,disabled:!xt||j.type==="retype_needed"&&((rt=j.results)==null?void 0:rt.isTermMatch),placeholder:j.type==="retype_needed"?o.answerWithDefinition?"Retype definition...":"Retype term...":o.answerWithDefinition?"Type the definition...":"Type the term...",className:G("w-full bg-panel-2 border rounded-xl px-6 py-5 text-xl focus:outline-none focus:border-accent disabled:opacity-50 transition-colors placeholder-text/20",j.type==="retype_needed"&&!((ht=j.results)!=null&&ht.isTermMatch)?"border-red text-red":"border-outline text-text",j.type==="retype_needed"&&((V=j.results)==null?void 0:V.isTermMatch)&&"border-green text-green bg-green/5"),autoComplete:"off"})]},"term")},Je=()=>{var He,rt,ht,V;return s.jsxs("div",{className:G("relative",ke),children:[j.type==="retype_needed"&&!((He=j.results)!=null&&He.isYearMatch)&&s.jsx("div",{className:"absolute -top-6 left-0 w-full text-center text-xs font-bold text-accent animate-in fade-in",children:y.year}),s.jsx("input",{ref:fe,type:"text",value:b,onChange:le=>N(le.target.value),onKeyDown:Ve,placeholder:"Year",disabled:!xt||j.type==="retype_needed"&&((rt=j.results)==null?void 0:rt.isYearMatch),className:G("w-full bg-panel-2 border rounded-xl px-4 py-5 text-xl focus:outline-none focus:border-accent disabled:opacity-50 text-center placeholder-text/20 text-text",j.type==="incorrect"||j.type==="retype_needed"&&!((ht=j.results)!=null&&ht.isYearMatch)?"border-red text-red":"border-outline text-text",j.type==="retype_needed"&&((V=j.results)==null?void 0:V.isYearMatch)&&"border-green text-green bg-green/5"),autoComplete:"off"})]},"year")},qt=()=>s.jsx(s.Fragment,{children:M.map((He,rt)=>{var le,te,Ee;const ht=(le=y.customFields)==null?void 0:le.find(qe=>qe.name===He),V=j.type==="retype_needed"&&((Ee=(te=j.results)==null?void 0:te.customResults)==null?void 0:Ee[He]);return s.jsxs("div",{className:G("relative",pe[rt]),children:[j.type==="retype_needed"&&!V&&s.jsx("div",{className:"absolute -top-6 left-0 w-full text-center text-xs font-bold text-accent animate-in fade-in",children:ht==null?void 0:ht.value}),s.jsx("input",{type:"text",value:S[He]||"",onChange:qe=>O(Gt=>({...Gt,[He]:qe.target.value})),onKeyDown:Ve,placeholder:He,disabled:!xt||j.type==="retype_needed"&&V,className:G("w-full bg-panel-2 border rounded-xl px-4 py-5 text-xl focus:outline-none focus:border-accent disabled:opacity-50 text-center placeholder-text/20 text-text",j.type==="incorrect"||j.type==="retype_needed"&&!V?"border-red text-red":"border-outline text-text",j.type==="retype_needed"&&V&&"border-green text-green bg-green/5"),autoComplete:"off"})]},He)})});return Fe.map(He=>He==="term"?Ge():He==="year"&&Q?Je():He==="custom"?qt():null)})()}),s.jsx("div",{className:"flex justify-end items-center pt-2 h-16",children:s.jsx("div",{className:"flex gap-4",children:xt?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:Oe,className:"text-muted hover:text-text font-bold px-6 py-3 rounded-xl hover:bg-panel-2 transition-colors",children:"Skip"}),s.jsx("button",{onClick:oe,className:"bg-accent text-bg font-extrabold px-10 py-3 rounded-xl hover:scale-105 active:scale-95 transition-all shadow-lg",children:"Submit"})]}):s.jsx("button",{autoFocus:!0,onClick:()=>Ce(),className:"bg-text text-bg font-extrabold px-12 py-4 rounded-xl animate-in zoom-in duration-200 shadow-lg hover:scale-105 transition-transform",children:"Continue"})})}),s.jsxs("div",{className:"min-h-[40px]",children:[j.type==="correct"&&s.jsxs("div",{className:"flex items-center justify-between animate-in fade-in slide-in-from-bottom-2 bg-green/10 border border-green/20 p-3 rounded-lg",children:[s.jsxs("div",{className:"text-green font-bold flex items-center gap-2",children:["Correct!",j.correction&&s.jsxs("span",{className:"text-muted font-normal text-sm",children:["(Accepted: ",j.correction,")"]})]}),s.jsx("button",{onClick:()=>Pe(!1),className:"text-xs text-muted hover:text-text underline",children:"Actually, I was wrong (O)"})]}),(j.type==="incorrect"||j.type==="reveal")&&s.jsxs("div",{className:"flex items-center justify-between animate-in fade-in slide-in-from-bottom-2 bg-red/10 border border-red/20 p-3 rounded-lg",children:[s.jsxs("div",{className:"text-red font-bold flex flex-col",children:[s.jsx("span",{children:j.message}),y.year&&s.jsxs("span",{className:"text-sm opacity-80",children:["Year: ",y.year]}),(nr=y.customFields)==null?void 0:nr.map(M=>s.jsxs("span",{className:"text-sm opacity-80",children:[M.name,": ",M.value]},M.name))]}),s.jsx("button",{onClick:()=>Pe(!0),className:"text-xs text-muted hover:text-text underline",children:"Actually, I was right (O)"})]})]})]}),y.originalSetName&&s.jsx("div",{className:"absolute bottom-4 left-10 text-[10px] font-bold text-muted uppercase tracking-widest opacity-40",children:y.originalSetName})]}),X>=2&&s.jsx("div",{className:"text-center mt-8 animate-in fade-in duration-500",children:s.jsxs("span",{className:"px-6 py-2 rounded-full font-bold tracking-widest transition-colors text-accent bg-bg border border-accent/50 shadow-[0_0_15px_rgba(208,164,94,0.2)]",children:[X," CARD STREAK"]})}),P&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:()=>F(!1),children:s.jsxs("div",{className:"bg-panel border border-outline rounded-2xl p-6 w-full max-w-md shadow-2xl animate-in zoom-in-95",onClick:M=>M.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-text",children:"Edit Card"}),s.jsx("button",{onClick:()=>F(!1),children:s.jsx(Ur,{size:24,className:"text-muted hover:text-text"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-muted uppercase mb-1",children:"Term"}),s.jsx("input",{value:(y.tags&&y.tags.length>0?y.tags.map(M=>`(${M})`).join(" ")+" ":"")+y.term.join(" / "),onChange:M=>{var Fe;let Z=M.target.value,me=[];const ke=/^(\s*\([^)]+\)\s*)+/,pe=Z.match(ke);pe&&(me=((Fe=pe[0].match(/\(([^)]+)\)/g))==null?void 0:Fe.map(Je=>Je.slice(1,-1).trim()))||[],Z=Z.replace(ke,"")),ge(y.id,{term:Z.split("/").map(Ge=>Ge.trim()),tags:me})},className:"w-full bg-panel-2 border border-outline rounded-lg px-3 py-2 text-text focus:border-accent focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-muted uppercase mb-1",children:"Definition"}),s.jsx("textarea",{value:y.content,onChange:M=>ge(y.id,{content:M.target.value}),rows:3,className:"w-full bg-panel-2 border border-outline rounded-lg px-3 py-2 text-text focus:border-accent focus:outline-none resize-none"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-muted uppercase mb-1",children:"Year"}),s.jsx("input",{value:y.year||"",onChange:M=>ge(y.id,{year:M.target.value}),className:"w-full bg-panel-2 border border-outline rounded-lg px-3 py-2 text-text focus:border-accent focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-muted uppercase mb-1",children:"Image URL"}),s.jsx("input",{value:y.image||"",onChange:M=>ge(y.id,{image:M.target.value}),className:"w-full bg-panel-2 border border-outline rounded-lg px-3 py-2 text-text focus:border-accent focus:outline-none"})]})]}),(hr=i.customFieldNames)==null?void 0:hr.map(M=>{var Z,me;const Q=((me=(Z=y.customFields)==null?void 0:Z.find(ke=>ke.name===M))==null?void 0:me.value)||"";return s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-muted uppercase mb-1",children:M}),s.jsx("input",{value:Q,onChange:ke=>{var Fe;const pe=((Fe=y.customFields)==null?void 0:Fe.filter(Ge=>Ge.name!==M))||[];ke.target.value&&pe.push({name:M,value:ke.target.value}),ge(y.id,{customFields:pe})},className:"w-full bg-panel-2 border border-outline rounded-lg px-3 py-2 text-text focus:border-accent focus:outline-none"})]},M)}),s.jsx("button",{onClick:()=>F(!1),className:"w-full py-3 bg-accent text-bg rounded-xl font-bold mt-4 hover:scale-105 transition-transform",children:"Save Changes"})]})]})}),dt&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",children:s.jsxs("div",{className:"bg-panel border border-outline rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[s.jsx("h3",{className:"text-lg font-bold text-text mb-2",children:"Edit Original Card?"}),s.jsxs("p",{className:"text-sm text-muted mb-6 leading-relaxed",children:["You are editing a card in a Multistudy session. This will update the card in the ",s.jsx("span",{className:"text-accent font-bold",children:"original set"})," as well."]}),s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx("input",{type:"checkbox",id:"suppress",className:"rounded border-outline bg-panel-2 text-accent focus:ring-accent",onChange:M=>{M.target.checked?De(!0):De(!1)}}),s.jsx("label",{htmlFor:"suppress",className:"text-xs text-muted cursor-pointer select-none",children:"Don't warn me again this session"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>et(!1),className:"flex-1 py-2.5 rounded-xl font-bold text-sm bg-panel-2 border border-outline hover:bg-panel-3 transition-colors text-text",children:"Cancel"}),s.jsx("button",{onClick:()=>{et(!1),F(!0)},className:"flex-1 py-2.5 rounded-xl font-bold text-sm bg-accent text-bg hover:scale-105 transition-transform",children:"Edit Anyway"})]})]})})]}):null},Lg=({label:i,icon:r,isActive:n=!1,isDisabled:o=!1,onClick:c})=>s.jsxs("button",{onClick:o?void 0:c,disabled:o,className:G("relative flex flex-col items-center justify-center gap-3 p-6 rounded-2xl border-2 transition-all duration-300",n&&!o&&"bg-accent/10 border-accent text-accent hover:bg-accent/20 hover:scale-[1.02] cursor-pointer shadow-lg shadow-accent/10",!n&&!o&&"bg-panel-2 border-outline text-text hover:border-accent/50 hover:bg-panel-3 cursor-pointer",o&&"bg-panel-2/50 border-outline/50 text-muted/50 cursor-not-allowed"),children:[s.jsx("div",{className:G("p-3 rounded-xl transition-colors",n&&!o?"bg-accent/20":"bg-panel-3",o&&"opacity-40"),children:r}),s.jsx("span",{className:G("font-bold text-sm",o&&"opacity-50"),children:i}),o&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx(Jp,{size:14,className:"text-muted/50"})})]}),$g=({card:i,index:r,onToggleStar:n})=>s.jsxs("div",{className:"group flex gap-4 p-4 bg-panel border border-outline rounded-xl hover:border-accent/30 transition-all",children:[s.jsx("div",{className:"text-xs font-mono text-muted pt-1 w-8 text-center shrink-0",children:r+1}),i.image&&s.jsx("div",{className:"w-16 h-16 shrink-0 rounded-lg overflow-hidden border border-outline bg-panel-2 flex items-center justify-center",children:s.jsx("img",{src:i.image,alt:"Card",className:"w-full h-full object-cover",loading:"lazy"})}),s.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[s.jsx("div",{className:"font-bold text-text",children:i.term.join(" / ")}),s.jsx("div",{className:"text-sm text-muted leading-relaxed prose-content",children:Ga(i.content)}),i.year&&s.jsx("div",{className:"text-xs text-accent font-mono",children:i.year}),i.customFields&&i.customFields.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 pt-1",children:i.customFields.map((o,c)=>s.jsxs("span",{className:"text-xs px-2 py-0.5 bg-panel-2 border border-outline rounded-full text-muted",children:[o.name,": ",o.value]},c))})]}),s.jsx("div",{className:"pt-0.5 shrink-0",children:i.mastery>=2?s.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-green/10 border border-green/20 rounded-lg",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green"})]}),s.jsx("span",{className:"text-[10px] font-bold uppercase text-green",children:"Done"})]}):i.mastery===1?s.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-yellow/10 border border-yellow/20 rounded-lg",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-yellow"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-outline"})]}),s.jsx("span",{className:"text-[10px] font-bold uppercase text-yellow",children:"In Progress"})]}):s.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-panel-3 border border-outline rounded-lg",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-outline"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-outline"})]}),s.jsx("span",{className:"text-[10px] font-bold uppercase text-muted",children:"New"})]})}),s.jsx("button",{onClick:n,className:"pt-1 shrink-0 transition-transform hover:scale-110",children:i.star?s.jsx("span",{className:"text-yellow text-lg",children:""}):s.jsx("span",{className:"text-outline hover:text-muted text-lg group-hover:text-muted/50",children:""})})]}),Mg=({set:i,settings:r,onBack:n,onStartLearn:o,onUpdateSet:c,onEdit:d,onDuplicate:f,onDelete:m})=>{const[p,x]=I.useState(!1),b=i.cards.filter(P=>P.mastery>=2).length,N=i.cards.filter(P=>P.star).length,S=i.cards.length>0?Math.round(b/i.cards.length*100):0,O=P=>{const F=i.cards.map(H=>H.id===P?{...H,star:!H.star}:H);c({...i,cards:F})},j=()=>{qa(i.name+".flashcards",JSON.stringify(i,null,2),"json")},C=()=>{p?m():(x(!0),setTimeout(()=>x(!1),3e3))};return s.jsxs("div",{className:"max-w-5xl mx-auto w-full pb-20 animate-in fade-in duration-500",children:[s.jsxs("button",{onClick:n,className:"mb-8 flex items-center gap-3 text-muted hover:text-text transition-colors font-bold uppercase text-xs tracking-wider group",children:[s.jsx("div",{className:"p-2 rounded-full border border-outline group-hover:bg-panel group-hover:border-accent transition-colors",children:s.jsx(yi,{size:16})}),"Back to Library"]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-4xl font-bold text-text tracking-tight mb-3",children:i.name}),s.jsxs("div",{className:"flex items-center gap-6 text-muted",children:[s.jsxs("span",{className:"font-mono",children:[i.cards.length," cards"]}),b>0&&s.jsxs("span",{className:"text-green font-mono",children:[b," mastered"]}),N>0&&s.jsxs("span",{className:"text-yellow font-mono",children:[" ",N]}),S>0&&s.jsxs("span",{className:"text-accent font-bold",children:[S,"% complete"]})]})]}),s.jsxs("div",{className:"mb-10 flex items-center gap-2 p-3 bg-panel-2 border border-outline rounded-xl",children:[s.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-3 py-2 text-muted hover:text-text hover:bg-panel-3 rounded-lg transition-all",title:"Edit Set",children:[s.jsx(vi,{size:16}),s.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Edit"})]}),s.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-3 py-2 text-muted hover:text-text hover:bg-panel-3 rounded-lg transition-all",title:"Export JSON",children:[s.jsx(mn,{size:16}),s.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Export"})]}),s.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-3 py-2 text-muted hover:text-text hover:bg-panel-3 rounded-lg transition-all",title:"Duplicate Set",children:[s.jsx(Ka,{size:16}),s.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Duplicate"})]}),s.jsx("div",{className:"flex-1"}),s.jsxs("button",{onClick:C,className:G("flex items-center gap-2 px-3 py-2 rounded-lg transition-all",p?"bg-red text-bg":"text-muted hover:text-red hover:bg-red/10"),title:"Delete Set",children:[s.jsx(pn,{size:16}),s.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:p?"Confirm?":"Delete"})]})]}),s.jsxs("div",{className:"mb-12",children:[s.jsx("h2",{className:"text-xs font-bold text-muted uppercase tracking-widest mb-4 pl-1",children:"Study Modes"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsx(Lg,{label:"Learn",icon:s.jsx(Fh,{size:24}),isActive:!0,onClick:o}),s.jsxs("div",{className:"relative flex flex-col items-center justify-center gap-3 p-6 rounded-2xl border-2 border-outline/50 bg-panel-2/50 transition-all",children:[s.jsx("div",{className:"absolute top-2 right-2 px-2 py-0.5 bg-accent/20 text-accent text-[10px] font-bold uppercase rounded-full",children:"Soon"}),s.jsx("div",{className:"p-3 rounded-xl bg-panel-3 opacity-60",children:s.jsx(gg,{size:24,className:"text-muted"})}),s.jsx("span",{className:"font-bold text-sm text-muted",children:"Flashcards"})]}),s.jsxs("div",{className:"relative flex flex-col items-center justify-center gap-3 p-6 rounded-2xl border-2 border-dashed border-outline/30 bg-panel-2/20 transition-all",children:[s.jsx("div",{className:"p-3 rounded-xl bg-panel-3/50",children:s.jsx("span",{className:"text-2xl font-bold text-muted/30",children:"?"})}),s.jsx("span",{className:"font-bold text-sm text-muted/30",children:"???"})]}),s.jsxs("div",{className:"relative flex flex-col items-center justify-center gap-3 p-6 rounded-2xl border-2 border-dashed border-outline/30 bg-panel-2/20 transition-all",children:[s.jsx("div",{className:"p-3 rounded-xl bg-panel-3/50",children:s.jsx("span",{className:"text-2xl font-bold text-muted/30",children:"?"})}),s.jsx("span",{className:"font-bold text-sm text-muted/30",children:"???"})]}),s.jsxs("div",{className:"relative flex flex-col items-center justify-center gap-3 p-6 rounded-2xl border-2 border-dashed border-outline/30 bg-panel-2/20 transition-all",children:[s.jsx("div",{className:"p-3 rounded-xl bg-panel-3/50",children:s.jsx("span",{className:"text-2xl font-bold text-muted/30",children:"?"})}),s.jsx("span",{className:"font-bold text-sm text-muted/30",children:"???"})]}),s.jsx("div",{className:"relative flex flex-col items-center justify-center gap-3 p-6 rounded-2xl border-2 border-dashed border-outline/50 bg-panel-2/30",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-muted/50 text-sm font-medium",children:"More modes"}),s.jsx("div",{className:"text-muted/30 text-xs",children:"coming soon"})]})})]})]}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xs font-bold text-muted uppercase tracking-widest mb-4 pl-1",children:["Terms in this Set (",i.cards.length,")"]}),s.jsx("div",{className:"space-y-3",children:i.cards.map((P,F)=>s.jsx($g,{card:P,index:F,onToggleStar:()=>O(P.id)},P.id))})]})]})},hh=["#d0a45e","#f5c16c","#93d26c","#e57373","#c6a972","#f5f3ef"],Ug=()=>{const i=I.useRef(null),r=I.useRef([]),n=I.useRef(0);return I.useEffect(()=>{const o=i.current;if(!o)return;const c=o.getContext("2d");if(!c)return;const d=()=>{o.width=window.innerWidth,o.height=window.innerHeight};window.addEventListener("resize",d),d(),(()=>{for(let p=0;p<200;p++)r.current.push({x:window.innerWidth/2,y:window.innerHeight/2,vx:(Math.random()-.5)*20,vy:(Math.random()-.5)*20-5,w:Math.random()*10+5,h:Math.random()*10+5,color:hh[Math.floor(Math.random()*hh.length)],rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10,drag:.96})})();const m=()=>{!c||!o||(c.clearRect(0,0,o.width,o.height),r.current.forEach((p,x)=>{p.x+=p.vx,p.y+=p.vy,p.vy+=.2,p.vx*=p.drag,p.vy*=p.drag,p.rotation+=p.rotationSpeed,c.save(),c.translate(p.x,p.y),c.rotate(p.rotation*Math.PI/180),c.fillStyle=p.color,c.fillRect(-p.w/2,-p.h/2,p.w,p.h),c.restore()}),r.current=r.current.filter(p=>p.y<o.height+100),r.current.length>0&&(n.current=requestAnimationFrame(m)))};return m(),()=>{window.removeEventListener("resize",d),cancelAnimationFrame(n.current)}},[]),s.jsx("canvas",{ref:i,className:"fixed inset-0 pointer-events-none z-[100]"})},zg=({isOpen:i,onClose:r})=>i?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:r,children:s.jsxs("div",{className:"bg-panel border border-outline rounded-2xl p-0 w-full max-w-3xl shadow-2xl animate-in zoom-in-95 flex flex-col max-h-[85vh]",onClick:n=>n.stopPropagation(),children:[s.jsxs("div",{className:"p-6 border-b border-outline flex justify-between items-center bg-panel-2 rounded-t-2xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(mg,{size:24,className:"text-accent"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-text",children:"Privacy Policy"}),s.jsx("div",{className:"text-sm text-muted",children:"Last updated: January 2, 2026"})]})]}),s.jsx("button",{onClick:r,children:s.jsx(Ur,{size:20,className:"text-muted hover:text-text"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar space-y-6 text-text",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"1. Introduction"}),s.jsx("p",{className:"text-muted leading-relaxed",children:`Welcome to Flashcardsish! This Privacy Policy explains how the program Flashcardsish ("we") collects, uses, discloses, and safeguards your information when you use this app. Please read this policy carefully. If you do not agree with the terms of this privacy policy, please do not use the application, and please don't sign in.`}),s.jsxs("p",{className:"text-muted leading-relaxed mt-3",children:['Flashcardsish is maintained and developed by one person (regardless, Flashcardsish as an entity is referred to as "we" in this page). This Privacy Policy applies to the app Flashcardsish hosted at'," ",s.jsx("a",{href:"https://flashcardsish.owenwhelan.com",target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline",children:"flashcardsish.owenwhelan.com"}),"; Flashcardsish itself, however, is open source via GitHub and anyone can download and make a copy of it."]}),s.jsx("p",{className:"text-muted leading-relaxed mt-3",children:"This Privacy Policy is subject to change. We reserve the right to update this Privacy Policy at any time, and we will notify you of any changes by posting the new Privacy Policy on this page."})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"2. Information We Collect"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-text mb-2",children:"2.1 Information from Google OAuth"}),s.jsx("p",{className:"text-muted leading-relaxed",children:"You don't have to sign in with Google for Flashcardsish to function. When you sign in using Google, we receive and store:"}),s.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-muted",children:[s.jsx("li",{children:"Your email address"}),s.jsx("li",{children:"Your name (as provided by Google/listed on your Google account)"}),s.jsx("li",{children:"Your profile picture URL"}),s.jsx("li",{children:"A unique user identifier"})]}),s.jsx("p",{className:"text-muted leading-relaxed mt-2",children:"We use this information to authenticate you and manage your account. We do not use this information for any other purpose."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-text mb-2",children:"2.2 User-Generated Content"}),s.jsx("p",{className:"text-muted leading-relaxed",children:"We store data you create within the application, including:"}),s.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-muted",children:[s.jsx("li",{children:"Flashcard sets (terms, definitions, images)"}),s.jsx("li",{children:"Folders and organizational data"}),s.jsx("li",{children:"Study progress and mastery levels"}),s.jsx("li",{children:"Application settings and preferences"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-text mb-2",children:"2.3 Local Storage"}),s.jsx("p",{className:"text-muted leading-relaxed",children:"We use browser local storage and IndexedDB to store your data locally on your device for offline access and improved performance. This data remains on your device unless you are signed in, in which case it syncs with our cloud storage. In simple terms: if you don't sign in, we store your data on your device; otherwise, we use what we have stored online."})]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"3. How We Use Your Information"}),s.jsx("p",{className:"text-muted leading-relaxed mb-2",children:"We use the information we collect to:"}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-muted",children:[s.jsx("li",{children:"Enable cloud synchronization of your flashcard data across devices (saving your sets online)"}),s.jsx("li",{children:"Authenticate your identity and manage your account (making sure only you can access your data if you keep your account safe and treat it as intended)"})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"4. Third-Party Services"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-text mb-2",children:"4.1 Supabase"}),s.jsxs("p",{className:"text-muted leading-relaxed",children:["We use Supabase for authentication and data storage. Supabase processes and stores your data on secure servers. You can review Supabase's privacy policy at"," ",s.jsx("a",{href:"https://supabase.com/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline",children:"supabase.com/privacy"}),"."]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-text mb-2",children:"4.2 Google OAuth"}),s.jsxs("p",{className:"text-muted leading-relaxed",children:["We use Google's OAuth service for authentication. Google's privacy policy applies to any data processed by Google during the authentication process. You can review it at"," ",s.jsx("a",{href:"https://policies.google.com/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline",children:"policies.google.com/privacy"}),"."]})]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"5. Data Security"}),s.jsx("p",{className:"text-muted leading-relaxed",children:"We implement appropriate technical and organizational security measures to protect your personal information. However, no method of transmission over the Internet or electronic storage is 100% secure. While we strive to protect your personal information, we cannot guarantee its absolute security."})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"6. Data Retention"}),s.jsx("p",{className:"text-muted leading-relaxed",children:'We retain your personal information for as long as your account is active or as needed to provide you services. You may delete your account and associated data at any time using the "Delete All My Data" button in Settings (top right corner on the home screen).'})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"7. Your Rights"}),s.jsx("p",{className:"text-muted leading-relaxed mb-2",children:"Depending on your location, you may have the following rights:"}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-muted",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Access:"})," Request a copy of the personal data we hold about you"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Rectification:"})," Request correction of inaccurate personal data"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Deletion:"})," Request deletion of your personal data"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Data Portability:"})," Request your data in a machine-readable format"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Withdraw Consent:"})," Withdraw consent where processing is based on consent"]})]}),s.jsx("p",{className:"text-muted leading-relaxed mt-2",children:"To exercise these rights, go to Settings where you can:"}),s.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-muted",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Export your data:"}),' Use "Export All My Data" to download a JSON file containing all your flashcard sets, folders, and settings']}),s.jsxs("li",{children:[s.jsx("strong",{children:"Delete your data:"}),' Use "Delete All My Data" to permanently remove all data from your device and our cloud servers']})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"8. Children's Privacy"}),s.jsxs("div",{className:"space-y-3 text-muted leading-relaxed",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"8.1"})," Flashcardsish is not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"8.2"})," If we discover that we have inadvertently collected personal information from a child under 13, we will promptly delete such information from our systems."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"8.3"})," If you are a parent or guardian and believe your child has provided personal information to us, please contact us at"," ",s.jsx("a",{href:"mailto:owenw2023@gmail.com",className:"text-accent hover:underline",children:"owenw2023@gmail.com"})," ","and we will take steps to delete the information."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"8.4"})," We comply with applicable children's privacy laws, including the Children's Online Privacy Protection Act (COPPA) where applicable."]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"9. Open Source"}),s.jsx("p",{className:"text-muted leading-relaxed",children:"Flashcardsish is open-source software. You can review our source code to understand exactly how we handle your data. The code is available on our public repository."})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"10. Changes to This Policy"}),s.jsx("p",{className:"text-muted leading-relaxed",children:'We may update this Privacy Policy from time to time. We will notify you of any changes by updating the "Last updated" date at the top of this policy. You are advised to review this Privacy Policy periodically for any changes.'})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"11. Development Status and Data Deletion"}),s.jsx("div",{className:"p-4 bg-yellow/10 rounded-xl border border-yellow/30 mb-3",children:s.jsxs("p",{className:"text-muted leading-relaxed",children:[s.jsx("strong",{className:"text-yellow",children:" Important:"})," Flashcardsish is an actively developed, personal project with no uptime guarantees or service level agreements."]})}),s.jsxs("div",{className:"space-y-3 text-muted leading-relaxed",children:[s.jsx("p",{children:"Your data may be deleted under the following circumstances:"}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Service shutdown or discontinuation"}),s.jsx("li",{children:"Database migrations, restructuring, or technical necessity"}),s.jsx("li",{children:"Hosting provider changes or limitations"}),s.jsx("li",{children:"Development-related database resets during active development phases"}),s.jsx("li",{children:"Security incidents requiring data purge"}),s.jsx("li",{children:"Extended account inactivity"}),s.jsx("li",{children:"Failure or destruction of one of the services we use"}),s.jsx("li",{children:"Any other reason we deem appropriate, for any reason, at any time; we reserve the right to do so and you voluntarily agree to give us this right by using Flashcardsish"})]}),s.jsxs("p",{children:["We will make reasonable efforts to notify users before planned deletions when feasible, but this cannot be guaranteed. ",s.jsx("strong",{className:"text-text",children:"You are strongly encouraged to regularly export your data"}),' using the "Export All My Data" feature in Settings or download .flashcards files from the List Builder screen.']})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"12. Contact Us"}),s.jsx("p",{className:"text-muted leading-relaxed",children:"If you have any questions about this Privacy Policy or our data practices, you can reach us at:"}),s.jsx("p",{className:"mt-2",children:s.jsx("a",{href:"mailto:owenw2023@gmail.com",className:"text-accent hover:underline font-bold",children:"owenw2023@gmail.com"})}),s.jsx("p",{className:"text-muted leading-relaxed mt-2",children:"You can also open an issue on our GitHub repository."})]})]})]})}):null,Fg=({isOpen:i,onClose:r})=>i?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:r,children:s.jsxs("div",{className:"bg-panel border border-outline rounded-2xl p-0 w-full max-w-3xl shadow-2xl animate-in zoom-in-95 flex flex-col max-h-[85vh]",onClick:n=>n.stopPropagation(),children:[s.jsxs("div",{className:"p-6 border-b border-outline flex justify-between items-center bg-panel-2 rounded-t-2xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Es,{size:24,className:"text-accent"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-text",children:"Terms of Service"}),s.jsx("div",{className:"text-sm text-muted",children:"Last updated: January 2, 2026"})]})]}),s.jsx("button",{onClick:r,children:s.jsx(Ur,{size:20,className:"text-muted hover:text-text"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar space-y-6 text-text",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"1. Acceptance of Terms"}),s.jsx("p",{className:"text-muted leading-relaxed",children:'By accessing or using Flashcardsish ("the Service"), you agree to be bound by these Terms of Service ("Terms"). If you do not agree to these Terms, please do not use the Service. We reserve the right to modify these Terms at any time, and such modifications will be effective immediately upon posting. Your continued use of the Service after any changes constitutes acceptance of the modified Terms.'})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"2. Description of Service"}),s.jsx("p",{className:"text-muted leading-relaxed",children:"Flashcardsish is a free, open-source flashcard application that allows users to create, organize, and study flashcard sets. The Service may include optional cloud synchronization features when users sign in with their Google account. Flashcardsish is a personal, hobby project developed and maintained by a single individual."})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"3. Service Availability and Discontinuation"}),s.jsx("div",{className:"p-4 bg-yellow/10 rounded-xl border border-yellow/30 mb-3",children:s.jsxs("p",{className:"text-muted leading-relaxed",children:[s.jsx("strong",{className:"text-yellow",children:" No Uptime Guarantee:"}),' The Service is provided on an "as available" basis. We make no guarantees regarding uptime, availability, or service level agreements (SLA). The Service may be modified, suspended, or permanently discontinued at any time, with or without notice.']})}),s.jsxs("div",{className:"space-y-3 text-muted leading-relaxed",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"3.1"})," We reserve the right to modify, update, or remove features of the Service at any time without prior notice."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"3.2"})," We may temporarily or permanently suspend the Service for maintenance, updates, security concerns, or any other reason at our sole discretion."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"3.3"})," In the event of permanent discontinuation, we will make reasonable efforts to provide advance notice when feasible, but this is not guaranteed."]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"4. User Accounts"}),s.jsxs("div",{className:"space-y-3 text-muted leading-relaxed",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"4.1"})," You may use Flashcardsish without creating an account. However, to enable cloud synchronization, you must sign in using Google OAuth."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"4.2"})," You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"4.3"})," You agree to provide accurate and complete information when creating an account and to update such information as necessary."]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"5. User Content"}),s.jsxs("div",{className:"space-y-3 text-muted leading-relaxed",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"5.1 Ownership:"})," You retain all rights to the content you create within Flashcardsish, including flashcard sets, terms, definitions, and any uploaded images."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"5.2 License:"})," By using the Service, you grant us a limited license to store and display your content solely for the purpose of providing the Service to you."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"5.3 Responsibility:"})," You are solely responsible for the content you create. You agree not to create content that:"]}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Infringes on any third party's intellectual property rights"}),s.jsx("li",{children:"Contains illegal, harmful, threatening, abusive, or defamatory material"}),s.jsx("li",{children:"Contains malicious code or attempts to exploit the Service"}),s.jsx("li",{children:"Violates any applicable laws or regulations"})]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"6. Data Retention and Deletion"}),s.jsxs("div",{className:"space-y-3 text-muted leading-relaxed",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"6.1"}),' We retain your data for as long as your account is active and you continue to use the Service. You may delete your data at any time using the "Delete All My Data" feature in Settings.']}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"6.2"})," Your data may be deleted under the following circumstances:"]}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Service shutdown or discontinuation"}),s.jsx("li",{children:"Database migrations, restructuring, or technical necessity"}),s.jsx("li",{children:"Hosting provider changes or limitations"}),s.jsx("li",{children:"Development-related database resets during active development phases"}),s.jsx("li",{children:"Security incidents requiring data purge"}),s.jsx("li",{children:"Extended account inactivity"}),s.jsx("li",{children:"Failure or destruction of one of the services we use"}),s.jsx("li",{children:"Any other reason we deem appropriate, for any reason, at any time; we reserve the right to do so and you voluntarily agree to give us this right by using Flashcardsish"})]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"6.3"})," We will make reasonable efforts to notify users before planned data deletion when feasible, but given the project's development nature, this cannot be guaranteed."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"6.4"}),' You are strongly encouraged to regularly export your data using the "Export All My Data" feature or download .flashcards files as backups.']})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"7. Third-Party Services"}),s.jsxs("div",{className:"space-y-3 text-muted leading-relaxed",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"7.1"})," The Service relies on third-party services including Google (for authentication) and Supabase (for data storage). These services operate under their own terms of service and privacy policies."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"7.2"})," We are not responsible for:"]}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Outages, downtime, or service interruptions of Google or Supabase"}),s.jsx("li",{children:"Data breaches or security incidents originating from third-party services"}),s.jsx("li",{children:"Changes to third-party terms, policies, or pricing that affect the Service"}),s.jsx("li",{children:"Data loss or corruption caused by third-party service failures"})]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"7.3"})," Your use of Google OAuth is subject to"," ",s.jsx("a",{href:"https://policies.google.com/terms",target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline",children:"Google's Terms of Service"}),". Your data stored via Supabase is subject to"," ",s.jsx("a",{href:"https://supabase.com/terms",target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline",children:"Supabase's Terms of Service"}),"."]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"8. Acceptable Use"}),s.jsx("p",{className:"text-muted leading-relaxed mb-2",children:"You agree not to:"}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-muted",children:[s.jsx("li",{children:"Use the Service for any unlawful purpose"}),s.jsx("li",{children:"Attempt to gain unauthorized access to any part of the Service"}),s.jsx("li",{children:"Interfere with or disrupt the Service or servers"}),s.jsx("li",{children:"Use automated systems to access the Service without permission"}),s.jsx("li",{children:"Impersonate any person or entity"}),s.jsx("li",{children:"Use the Service to distribute spam or malware"})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"9. Intellectual Property"}),s.jsxs("div",{className:"space-y-3 text-muted leading-relaxed",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"9.1 Our Content:"})," The Service, including its original content, features, and functionality (excluding user content), is owned by the developers of Flashcardsish and is protected by copyright and other intellectual property laws."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"9.2 Open Source:"})," Flashcardsish is open-source software. The source code is available under the terms specified in our LICENSE file. This license governs your use, modification, and distribution of the source code."]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"10. Disclaimer of Warranties"}),s.jsx("div",{className:"p-4 bg-panel-2 rounded-xl border border-outline",children:s.jsx("p",{className:"text-muted leading-relaxed",children:'THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT. WE DO NOT WARRANT THAT THE SERVICE WILL BE UNINTERRUPTED, ERROR-FREE, SECURE, OR FREE OF VIRUSES OR OTHER HARMFUL COMPONENTS. WE MAKE NO GUARANTEES REGARDING DATA INTEGRITY, BACKUP, OR LONG-TERM STORAGE.'})})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"11. Limitation of Liability"}),s.jsx("div",{className:"p-4 bg-panel-2 rounded-xl border border-outline",children:s.jsx("p",{className:"text-muted leading-relaxed",children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, IN NO EVENT SHALL THE DEVELOPERS OF FLASHCARDSISH BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS, DATA, USE, GOODWILL, OR OTHER INTANGIBLE LOSSES, RESULTING FROM (A) YOUR ACCESS TO OR USE OF OR INABILITY TO ACCESS OR USE THE SERVICE; (B) ANY CONDUCT OR CONTENT OF ANY THIRD PARTY ON THE SERVICE; (C) UNAUTHORIZED ACCESS, USE, OR ALTERATION OF YOUR CONTENT; (D) ANY DATA LOSS OR CORRUPTION; (E) SERVICE MODIFICATIONS, SUSPENSIONS, OR DISCONTINUATION; (F) THIRD-PARTY SERVICE FAILURES; OR (G) ANY EVENTS BEYOND OUR REASONABLE CONTROL."})})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"12. Force Majeure and External Events"}),s.jsx("p",{className:"text-muted leading-relaxed",children:"We shall not be liable for any failure or delay in performing our obligations where such failure or delay results from circumstances beyond our reasonable control, including but not limited to: natural disasters, acts of government, internet or infrastructure failures, hosting provider issues, third-party service outages, cyberattacks, power failures, or other force majeure events. Feature changes, data migrations, downtime, or data loss caused by such external events or infrastructure changes do not create liability."})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"13. Indemnification"}),s.jsx("p",{className:"text-muted leading-relaxed",children:"You agree to indemnify, defend, and hold harmless the developers of Flashcardsish from and against any claims, liabilities, damages, losses, and expenses, including reasonable attorney's fees, arising out of or in any way connected with your access to or use of the Service, your violation of these Terms, or your violation of any third-party rights."})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"14. Children's Privacy"}),s.jsxs("div",{className:"space-y-3 text-muted leading-relaxed",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"14.1"})," The Service is not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"14.2"})," If we discover that we have inadvertently collected personal information from a child under 13, we will promptly delete such information from our systems."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"14.3"})," If you are a parent or guardian and believe your child has provided personal information to us, please contact us at"," ",s.jsx("a",{href:"mailto:owenw2023@gmail.com",className:"text-accent hover:underline",children:"owenw2023@gmail.com"})," ","and we will take steps to delete the information."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"14.4"})," We comply with applicable children's privacy laws, including the Children's Online Privacy Protection Act (COPPA) where applicable."]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"15. Termination"}),s.jsxs("div",{className:"space-y-3 text-muted leading-relaxed",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"15.1"})," We reserve the right to suspend or terminate your access to the Service at any time, with or without cause, and with or without notice."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"15.2"}),' You may stop using the Service at any time. You may delete your data using the "Delete All My Data" button in Settings, or by clearing your browser storage for local data.']}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"15.3"})," Upon termination, your right to use the Service will immediately cease."]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"16. Waiver of Legal Action"}),s.jsxs("div",{className:"space-y-3 text-muted leading-relaxed",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"16.1 Covenant Not to Sue:"})," TO THE FULLEST EXTENT PERMITTED BY APPLICABLE LAW, BY USING THIS SERVICE, YOU HEREBY IRREVOCABLY WAIVE ANY RIGHT TO SUE, LITIGATE, OR BRING ANY LEGAL ACTION OR PROCEEDING AGAINST THE DEVELOPERS OF FLASHCARDSISH FOR ANY REASON WHATSOEVER RELATING TO YOUR USE OF THE SERVICE."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"16.2 Sole Remedy:"})," IF YOU ARE DISSATISFIED WITH THE SERVICE, OR HAVE ANY DISPUTE, CLAIM, OR CONTROVERSY ARISING OUT OF OR RELATING TO THE SERVICE, YOUR SOLE AND EXCLUSIVE REMEDY IS TO STOP USING THE SERVICE AND DELETE YOUR ACCOUNT."]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"17. Governing Law and Venue"}),s.jsxs("div",{className:"space-y-3 text-muted leading-relaxed",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"17.1"})," These Terms shall be governed by and construed in accordance with the laws of the State of New York, United States, without regard to its conflict of law provisions."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"17.2"})," Any legal action or proceeding arising out of or relating to these Terms shall be brought exclusively in the state or federal courts located in New York, and you consent to the personal jurisdiction of such courts."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-text",children:"17.3"})," Notwithstanding the above, we reserve the right to seek injunctive or other equitable relief in any court of competent jurisdiction."]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"18. Severability"}),s.jsx("p",{className:"text-muted leading-relaxed",children:"If any provision of these Terms is found to be unenforceable or invalid, that provision will be limited or eliminated to the minimum extent necessary so that the remaining Terms will remain in full force and effect."})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"19. Entire Agreement"}),s.jsx("p",{className:"text-muted leading-relaxed",children:"These Terms, together with our Privacy Policy, constitute the entire agreement between you and the developers of Flashcardsish regarding the Service and supersede any prior agreements or understandings."})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-3",children:"20. Contact"}),s.jsx("p",{className:"text-muted leading-relaxed",children:"If you have any questions about these Terms, please contact us at:"}),s.jsx("p",{className:"mt-2",children:s.jsx("a",{href:"mailto:owenw2023@gmail.com",className:"text-accent hover:underline font-bold",children:"owenw2023@gmail.com"})}),s.jsx("p",{className:"text-muted leading-relaxed mt-2",children:"You may also open an issue on our GitHub repository for general inquiries."})]})]})]})}):null,Bg=()=>{const[i,r]=I.useState(0),[n,o]=I.useState(!1);I.useEffect(()=>{const f=setInterval(()=>{i>=3?(o(!0),setTimeout(()=>{r(0),o(!1)},400)):r(m=>m+1)},1500);return()=>clearInterval(f)},[i]);const d=(f=>f===0?{bg:"bg-panel-2",border:"border-outline",dot1:"bg-outline",dot2:"bg-outline",label:"New",labelColor:"text-muted"}:f===1?{bg:"bg-yellow/10",border:"border-yellow/30",dot1:"bg-yellow",dot2:"bg-outline",label:"Learning",labelColor:"text-yellow"}:{bg:"bg-green/10",border:"border-green/30",dot1:"bg-green",dot2:"bg-green",label:"Mastered",labelColor:"text-green"})(i);return s.jsx("div",{className:G("transition-opacity duration-300",n&&"opacity-0"),children:s.jsxs("div",{className:G("inline-flex items-center gap-2 px-4 py-2 rounded-xl border transition-all duration-500",d.bg,d.border),children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:G("w-2 h-2 rounded-full transition-colors duration-500",d.dot1)}),s.jsx("div",{className:G("w-2 h-2 rounded-full transition-colors duration-500",d.dot2)})]}),s.jsx("span",{className:G("text-sm font-bold transition-colors duration-500",d.labelColor),children:d.label})]})})},Wg=()=>{const[i,r]=I.useState(""),[n,o]=I.useState("idle"),[c,d]=I.useState(!1),f="Paris",m="London";return I.useEffect(()=>{const p=async()=>{for(let b=0;b<=f.length;b++)await new Promise(N=>setTimeout(N,150)),r(f.slice(0,b));await new Promise(b=>setTimeout(b,500)),o("correct"),await new Promise(b=>setTimeout(b,1500)),o("idle"),r(""),await new Promise(b=>setTimeout(b,500));for(let b=0;b<=m.length;b++)await new Promise(N=>setTimeout(N,150)),r(m.slice(0,b));await new Promise(b=>setTimeout(b,500)),o("wrong"),await new Promise(b=>setTimeout(b,1500)),d(!0),await new Promise(b=>setTimeout(b,400)),o("idle"),r(""),d(!1)};p();const x=setInterval(p,8e3);return()=>clearInterval(x)},[]),s.jsx("div",{className:G("transition-opacity duration-300",c&&"opacity-0"),children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"text-sm text-muted",children:"What is the capital of France?"}),s.jsxs("div",{className:G("px-4 py-3 rounded-xl border-2 transition-all duration-300 font-medium min-w-[200px]",n==="idle"&&"bg-panel-2 border-outline text-text",n==="correct"&&"bg-green/10 border-green text-green",n==="wrong"&&"bg-red/10 border-red text-red"),children:[i||s.jsx("span",{className:"text-muted/50",children:"Type your answer..."}),n==="correct"&&s.jsx(dn,{className:"inline ml-2",size:16}),n==="wrong"&&s.jsx(Ur,{className:"inline ml-2",size:16})]})]})})},Hg=()=>{const[i,r]=I.useState(0);return I.useEffect(()=>{const n=setInterval(()=>{r(o=>o>=3?0:o+1)},1200);return()=>clearInterval(n)},[]),s.jsxs("div",{className:"flex items-end gap-4",children:[s.jsx("div",{className:"flex gap-1",children:[0,1,2].map(n=>s.jsx("div",{className:G("w-8 h-10 bg-panel border border-outline rounded transition-all duration-500",i>n&&"translate-x-12 opacity-0 scale-75")},n))}),s.jsxs("div",{className:"relative",children:[s.jsx(Mn,{className:G("transition-all duration-300",i>0?"text-accent":"text-muted"),size:40}),s.jsx("div",{className:G("absolute -top-1 -right-1 w-5 h-5 bg-accent text-bg rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300",i===0&&"opacity-0 scale-0"),children:i})]})]})},Vg=()=>{const[i,r]=I.useState(0);I.useEffect(()=>{const o=setInterval(()=>{r(c=>c>=3?0:c+1)},1200);return()=>clearInterval(o)},[]);const n=[{label:"Year",value:"1776"},{label:"Author",value:"Jefferson"},{label:"Category",value:"History"}];return s.jsx("div",{className:"space-y-2",children:n.map((o,c)=>s.jsxs("div",{className:G("flex items-center gap-2 px-3 py-1.5 bg-panel-2 border border-outline rounded-lg text-sm transition-all duration-300",i>c?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"),children:[s.jsxs("span",{className:"text-muted",children:[o.label,":"]}),s.jsx("span",{className:"text-accent font-medium",children:o.value})]},c))})},qg=()=>{const[i,r]=I.useState(0);return I.useEffect(()=>{const n=setInterval(()=>{r(o=>o>=4?0:o+1)},1e3);return()=>clearInterval(n)},[]),s.jsx("div",{className:"w-full max-w-xs",children:s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:G("px-3 py-2 bg-panel border border-outline rounded-lg text-sm transition-all duration-300",i>=1?"border-accent":""),children:[s.jsx("span",{className:"text-muted text-xs block mb-1",children:"Term"}),s.jsx("span",{className:G("transition-opacity",i>=1?"opacity-100":"opacity-30"),children:i>=1?"Declaration of Independence":"Enter term..."})]}),s.jsxs("div",{className:G("px-3 py-2 bg-panel border border-outline rounded-lg text-sm transition-all duration-300",i>=2?"border-accent":""),children:[s.jsx("span",{className:"text-muted text-xs block mb-1",children:"Definition"}),s.jsx("span",{className:G("transition-opacity",i>=2?"opacity-100":"opacity-30"),children:i>=2?"Document declaring US independence":"Enter definition..."})]}),s.jsxs("div",{className:G("px-3 py-2 bg-accent/10 border border-accent/30 rounded-lg text-sm transition-all duration-300",i>=3?"opacity-100":"opacity-0"),children:[s.jsx("span",{className:"text-accent text-xs block mb-1",children:"Year"}),s.jsx("span",{className:"text-accent font-medium",children:"1776"})]}),s.jsxs("div",{className:G("flex items-center gap-2 transition-all duration-300",i>=4?"opacity-100":"opacity-0"),children:[s.jsx(Hh,{className:"text-yellow fill-yellow",size:16}),s.jsx("span",{className:"text-sm text-muted",children:"Starred"})]})]})})},fh=()=>{const[i,r]=I.useState(0),[n,o]=I.useState(0);return I.useEffect(()=>{const c=setInterval(()=>{r(d=>d>=8?0:d+1)},800);return()=>clearInterval(c)},[]),I.useEffect(()=>{const c=setInterval(()=>{o(d=>(d+2)%40)},30);return()=>clearInterval(c)},[]),s.jsxs("div",{className:"flex items-center justify-center gap-2 h-24 relative w-64",children:[[0,1,2].map(c=>{let d="translate-x-0",f="scale-100",m="opacity-100";return i>=4&&i<6&&(c===0&&(d="translate-x-[56px]"),c===2&&(d="-translate-x-[56px]")),i===5&&(f="scale-90"),i>=6&&(m="opacity-0",f="scale-50"),i===8&&(m="opacity-0"),s.jsx("div",{className:G("w-12 h-16 rounded-lg border-2 transition-all duration-500 bg-panel relative z-10",i>c&&i<8?"border-accent bg-accent/10":"border-outline",d,f,m),style:{transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"},children:s.jsx("div",{className:G("absolute inset-0 flex items-center justify-center text-accent transition-all duration-300",i>c?"opacity-100 scale-100":"opacity-0 scale-50"),children:s.jsx(dn,{size:20})})},c)}),s.jsxs("div",{className:G("absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-20 h-24 rounded-xl border-2 border-accent overflow-hidden transition-all duration-500 shadow-xl z-20",i>=6&&i<8?"opacity-100 scale-100":"opacity-0 scale-50"),style:{transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"},children:[s.jsx("div",{className:"absolute inset-0 bg-panel-2"}),s.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-overlay",style:{backgroundImage:"repeating-linear-gradient(45deg, #000 0, #000 10px, transparent 10px, transparent 20px)",backgroundPosition:`${n}px ${n}px`}}),s.jsx("div",{className:"absolute top-0 left-0 w-1.5 h-full bg-accent"}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s.jsx(oc,{className:"text-accent mb-1",size:24}),s.jsx("div",{className:"px-2 py-0.5 bg-accent text-bg rounded-md text-xs font-bold",children:"3 SETS"})]})]})]})},Gg=()=>{const[i,r]=I.useState(0);return I.useEffect(()=>{const n=setInterval(()=>{r(o=>o>=6?0:o+1)},600);return()=>clearInterval(n)},[]),s.jsxs("div",{className:"flex items-center justify-center gap-10 h-16 relative w-64",children:[s.jsxs("div",{className:"relative z-10",children:[s.jsx(tg,{size:24,className:G("transition-colors duration-300",i===1?"text-text":"text-muted")}),s.jsx("div",{className:G("absolute -top-1 -right-1 w-2 h-2 rounded-full bg-accent transition-all duration-300",i===1?"opacity-100 scale-100":"opacity-0 scale-0")})]}),s.jsx("div",{className:"relative z-10",children:s.jsx(eo,{size:32,className:G("transition-all duration-300",i===3?"text-accent scale-110":"text-muted scale-100")})}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(yg,{size:24,className:G("transition-colors duration-300",i===5?"text-text":"text-muted")}),s.jsx("div",{className:G("absolute -top-1 -right-1 w-2 h-2 rounded-full bg-accent transition-all duration-300",i===5?"opacity-100 scale-100":"opacity-0 scale-0")})]}),s.jsx("div",{className:G("absolute top-1/2 left-0 -translate-y-1/2 p-1.5 bg-panel border border-accent rounded-md text-accent shadow-sm transition-all duration-500 ease-in-out z-20",i<=1&&"left-[15%] opacity-0 scale-50",i===2&&"left-[50%] -translate-x-1/2 opacity-100 scale-100",i===3&&"left-[50%] -translate-x-1/2 opacity-0 scale-50",i===4&&"left-[85%] -translate-x-full opacity-100 scale-100",i>=5&&"left-[85%] -translate-x-full opacity-0 scale-50"),children:s.jsx(Es,{size:14})})]})},Kg=()=>{const[i,r]=I.useState(0);return I.useEffect(()=>{const n=setInterval(()=>{r(o=>o>=4?0:o+1)},800);return()=>clearInterval(n)},[]),s.jsxs("div",{className:"flex items-center justify-center h-16 relative w-32",children:[s.jsxs("div",{className:G("transition-all duration-500 absolute",i>=2?"opacity-0 scale-50":"opacity-100"),children:[s.jsx("div",{className:G("absolute w-8 h-10 bg-panel border border-muted rounded transition-transform duration-500",i===0?"-rotate-12 -translate-x-4":"rotate-0 translate-x-0")}),s.jsx("div",{className:G("absolute w-8 h-10 bg-panel border border-muted rounded transition-transform duration-500",i===0?"rotate-12 translate-x-4":"rotate-0 translate-x-0")}),s.jsx("div",{className:G("absolute w-8 h-10 bg-panel-2 border border-accent rounded z-10 transition-transform duration-500",i===0?"rotate-0 -translate-y-2":"rotate-0 translate-y-0")})]}),s.jsxs("div",{className:G("transition-all duration-500 absolute flex flex-col items-center",i<2?"opacity-0 scale-50":"opacity-100 scale-100",i===3?"translate-y-4":"translate-y-0"),children:[s.jsx(Es,{size:32,className:"text-text"}),s.jsx("div",{className:"absolute -bottom-2 -right-2 bg-accent text-bg text-[8px] font-bold px-1 rounded",children:"JSON"})]})]})},Yg=()=>{const[i,r]=I.useState(0),n=[{raw:"**Bold Text**",rendered:s.jsx("strong",{children:"Bold Text"})},{raw:"*Italic Text*",rendered:s.jsx("em",{children:"Italic Text"})},{raw:"`code`",rendered:s.jsx("code",{className:"bg-panel-2 px-1 rounded",children:"code"})}];return I.useEffect(()=>{const o=setInterval(()=>{r(c=>c>=n.length-1?0:c+1)},2e3);return()=>clearInterval(o)},[]),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"px-3 py-2 bg-panel-2 border border-outline rounded-lg font-mono text-sm text-muted",children:n[i].raw}),s.jsx(Mt,{className:"text-accent",size:20}),s.jsx("div",{className:"px-3 py-2 bg-panel border border-outline rounded-lg text-text",children:n[i].rendered})]})},Jg=({onBack:i})=>{const[r,n]=I.useState("welcome"),o=[{id:"welcome",title:"Welcome! Why Flashcardsish?",icon:s.jsx(oh,{size:20}),content:s.jsxs("div",{className:"space-y-6 text-text",children:[s.jsxs("p",{className:"text-lg leading-relaxed",children:[s.jsx("strong",{className:"text-accent",children:"Flashcardsish"})," is a modern, easy to use flashcards app with all of the features you need and additions that make it even more helpful. It's focused first on the whole learning experience that digital flashcards create while still being focused on your content."]}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Key Features"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 my-8",children:[s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-5",children:[s.jsxs("h4",{className:"font-bold text-accent mb-2 flex items-center gap-2",children:[s.jsx(eo,{size:18,className:"text-accent"})," Cloud Sync"]}),s.jsx("p",{className:"text-sm text-muted",children:"Sign in to sync your cards across devices for free."}),s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx(Gg,{})})]}),s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-5",children:[s.jsxs("h4",{className:"font-bold text-accent mb-2 flex items-center gap-2",children:[s.jsx(gp,{size:18,className:"text-accent"})," Custom Fields"]}),s.jsx("p",{className:"text-sm text-muted",children:"Add fields for years, authors, categories, or anything else."}),s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx(Vg,{})})]}),s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-5",children:[s.jsxs("h4",{className:"font-bold text-accent mb-2 flex items-center gap-2",children:[s.jsx(mn,{size:18,className:"text-accent"})," Download Sets"]}),s.jsx("p",{className:"text-sm text-muted",children:"Export sets as JSON files to backup, share, or edit."}),s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx(Kg,{})})]}),s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-5",children:[s.jsxs("h4",{className:"font-bold text-accent mb-2 flex items-center gap-2",children:[s.jsx(oc,{size:18,className:"text-accent"})," Multistudy"]}),s.jsx("p",{className:"text-sm text-muted",children:"Combine multiple sets into one session without merging."}),s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx(fh,{})})]})]}),s.jsxs("ul",{className:"space-y-3 text-muted",children:[s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(Hh,{className:"text-accent shrink-0 mt-0.5",size:18}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-text",children:"Star Important Cards"})," ",s.jsx("span",{className:"text-muted ml-auto",children:"Mark cards for focused study sessions"})]})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(ng,{className:"text-accent shrink-0 mt-0.5",size:18}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-text",children:"Format Your Cards"})," ",s.jsx("span",{className:"text-muted ml-auto",children:"Use bold, italic, and highlights"})]})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(ih,{className:"text-accent shrink-0 mt-0.5",size:18}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-text",children:"Open Source"})," ",s.jsx("span",{className:"text-muted ml-auto",children:"Fully transparent and community-driven"})]})]})]})]})},{id:"getting-started",title:"Getting Started",icon:s.jsx(_p,{size:20}),content:s.jsxs("div",{className:"space-y-6 text-text",children:[s.jsx("p",{className:"text-lg leading-relaxed",children:"Get up and running with Flashcardsish in just a few steps."}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-accent text-bg flex items-center justify-center font-bold shrink-0",children:"1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-bold text-lg mb-2",children:"Create a Set"}),s.jsxs("p",{className:"text-muted mb-3",children:["Click the ",s.jsx("strong",{className:"text-accent",children:"+ Create"})," button in the Library to open the set builder."]}),s.jsx("div",{className:"my-4 flex justify-center",children:s.jsx(qg,{})}),s.jsx("p",{className:"text-muted mb-3",children:"Enter your terms and definitions. Each card has several optional features:"}),s.jsxs("ul",{className:"space-y-2 text-muted text-sm ml-4",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mt,{size:14,className:"text-accent shrink-0 mt-0.5"}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-text",children:"Year Field"})," - Add a date or year that you'll also need to answer"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mt,{size:14,className:"text-accent shrink-0 mt-0.5"}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-text",children:"Custom Fields"}),' - Create your own fields like "Author", "Category", or anything else. These become additional required answers.']})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mt,{size:14,className:"text-accent shrink-0 mt-0.5"}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-text",children:"Images"})," - Add an image URL to display alongside the definition"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mt,{size:14,className:"text-accent shrink-0 mt-0.5"}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-text",children:"Formatting"})," - Use **bold**, *italic*, highlights, and more in your definitions (see Formatting section)"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mt,{size:14,className:"text-accent shrink-0 mt-0.5"}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-text",children:"Star"})," - Mark important cards for focused study sessions later"]})]})]})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-accent text-bg flex items-center justify-center font-bold shrink-0",children:"2"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg mb-2",children:"Start Studying"}),s.jsxs("p",{className:"text-muted mb-3",children:["Open any set and click ",s.jsx("strong",{className:"text-accent",children:"Learn"})," to begin a study session."]}),s.jsx("div",{className:"my-4",children:s.jsx(Wg,{})}),s.jsx("p",{className:"text-muted",children:"Type your answer and press Enter. Get it right twice to master a card!"})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-accent text-bg flex items-center justify-center font-bold shrink-0",children:"3"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg mb-2",children:"Track Your Progress"}),s.jsx("p",{className:"text-muted mb-3",children:"Each card has a mastery level that saves between sessions."}),s.jsx("div",{className:"my-4",children:s.jsx(Bg,{})}),s.jsxs("p",{className:"text-muted",children:["Cards progress from ",s.jsx("span",{className:"text-muted",children:"New"}),"  ",s.jsx("span",{className:"text-yellow",children:"Learning"}),"  ",s.jsx("span",{className:"text-green",children:"Mastered"}),"."]})]})]})]}),s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-5 mt-8",children:[s.jsxs("h4",{className:"font-bold text-accent mb-3 flex items-center gap-2",children:[s.jsx(oh,{size:18,className:"text-accent"})," Pro Tips"]}),s.jsxs("ul",{className:"space-y-2 text-muted text-sm",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mt,{size:14,className:"text-accent shrink-0 mt-0.5"}),s.jsx("span",{children:"[Placeholder tip 1]"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mt,{size:14,className:"text-accent shrink-0 mt-0.5"}),s.jsx("span",{children:"[Placeholder tip 2]"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mt,{size:14,className:"text-accent shrink-0 mt-0.5"}),s.jsx("span",{children:"[Placeholder tip 3]"})]})]})]})]})},{id:"formatting",title:"Formatting your Cards",icon:s.jsx(Es,{size:20}),content:s.jsxs("div",{className:"space-y-6 text-text",children:[s.jsx("p",{className:"text-lg leading-relaxed",children:"Flashcardsish supports rich text formatting to make your cards more expressive and easier to read."}),s.jsx("div",{className:"my-6 flex justify-center",children:s.jsx(Yg,{})}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Markdown Basics"}),s.jsx("div",{className:"bg-panel-2 border border-outline rounded-xl overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-panel",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-3 text-muted font-medium",children:"You Type"}),s.jsx("th",{className:"text-right px-4 py-3 text-muted font-medium",children:"You Get"})]})}),s.jsxs("tbody",{className:"divide-y divide-outline",children:[s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 font-mono text-muted",children:"**bold**"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx("strong",{children:"bold"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 font-mono text-muted",children:"*italic*"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx("em",{children:"italic"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 font-mono text-muted",children:"`code`"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx("code",{className:"bg-panel px-1.5 py-0.5 rounded text-accent",children:"code"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 font-mono text-muted",children:"~~strikethrough~~"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx("s",{children:"strikethrough"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 font-mono text-muted",children:"__underline__"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx("u",{children:"underline"})})]})]})]})}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Highlights"}),s.jsx("p",{className:"text-muted mb-4",children:"Use colored highlights to emphasize important information:"}),s.jsx("div",{className:"bg-panel-2 border border-outline rounded-xl overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-panel",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-3 text-muted font-medium",children:"You Type"}),s.jsx("th",{className:"text-right px-4 py-3 text-muted font-medium",children:"You Get"})]})}),s.jsxs("tbody",{className:"divide-y divide-outline",children:[s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 font-mono text-muted",children:"<h=y>yellow</h>"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx("span",{className:"bg-yellow/20 text-yellow px-1 rounded",children:"yellow"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 font-mono text-muted",children:"<h=r>red</h>"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx("span",{className:"bg-red/20 text-red px-1 rounded",children:"red"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 font-mono text-muted",children:"<h=b>blue</h>"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx("span",{className:"bg-blue/20 text-blue px-1 rounded",children:"blue"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 font-mono text-muted",children:"<h=g>green</h>"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx("span",{className:"bg-green/20 text-green px-1 rounded",children:"green"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 font-mono text-muted",children:"<h=p>purple</h>"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx("span",{className:"bg-purple/20 text-purple px-1 rounded",children:"purple"})})]})]})]})}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Raw Text Mode"}),s.jsx("p",{className:"text-muted mb-4",children:"For bulk entry, use Raw Text mode with this format:"}),s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-4 font-mono text-sm text-muted",children:[s.jsx("div",{children:"Term / Definition /// Year"}),s.jsx("div",{className:"text-accent",children:"&&&"}),s.jsx("div",{children:"Next Term / Next Definition"})]}),s.jsxs("ul",{className:"mt-4 space-y-2 text-muted text-sm",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mt,{size:14,className:"text-accent shrink-0 mt-0.5"})," Use ",s.jsx("code",{className:"bg-panel-2 px-1 rounded",children:"/"})," to separate term from definition"]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mt,{size:14,className:"text-accent shrink-0 mt-0.5"})," Use ",s.jsx("code",{className:"bg-panel-2 px-1 rounded",children:"///"})," to add an optional year"]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mt,{size:14,className:"text-accent shrink-0 mt-0.5"})," Use ",s.jsx("code",{className:"bg-panel-2 px-1 rounded",children:"&&&"})," on its own line to separate cards"]})]}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"JSON Schema (.flashcards files)"}),s.jsxs("p",{className:"text-muted mb-4",children:["When you export a set, it's saved as a JSON file with the ",s.jsx("code",{className:"bg-panel-2 px-1 rounded",children:".flashcards"})," extension. You can edit these files directly in any text editor. Here's the structure:"]}),s.jsx("div",{className:"bg-panel-2 border border-outline rounded-xl p-4 font-mono text-sm text-muted overflow-x-auto",children:s.jsx("pre",{children:`{
  "id": "unique-id",
  "name": "Set Name",
  "cards": [
    {
      "id": "card-id",
      "term": ["Term"],
      "content": "Definition with **formatting**",
      "year": "1776",
      "mastery": 0,
      "star": false,
      "customFields": [
        { "name": "Author", "value": "Name" }
      ]
    }
  ],
  "customFieldNames": ["Author"]
}`})}),s.jsxs("ul",{className:"mt-4 space-y-2 text-muted text-sm",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mt,{size:14,className:"text-accent shrink-0 mt-0.5"})," ",s.jsx("code",{className:"bg-panel-2 px-1 rounded",children:"term"})," is an array (for multiple accepted answers, though UI uses first)"]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mt,{size:14,className:"text-accent shrink-0 mt-0.5"})," ",s.jsx("code",{className:"bg-panel-2 px-1 rounded",children:"mastery"}),": 0 = New, 1 = Learning, 2+ = Mastered"]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Mt,{size:14,className:"text-accent shrink-0 mt-0.5"})," ",s.jsx("code",{className:"bg-panel-2 px-1 rounded",children:"customFieldNames"})," at set level defines which fields exist"]})]})]})},{id:"manage-sets",title:"Manage Sets",icon:s.jsx(Mn,{size:20}),content:s.jsxs("div",{className:"space-y-6 text-text",children:[s.jsx("p",{className:"text-lg leading-relaxed",children:"Keep your flashcards organized with folders, starring, and easy duplication."}),s.jsx("div",{className:"my-6 flex justify-center",children:s.jsx(Hg,{})}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Organizing with Folders"}),s.jsx("p",{className:"text-muted mb-4",children:"Select multiple sets using the checkboxes, then use the action bar to:"}),s.jsxs("ul",{className:"space-y-3 text-muted",children:[s.jsxs("li",{className:"flex items-center gap-3",children:[s.jsx(Mn,{className:"text-accent shrink-0",size:18}),s.jsx("strong",{className:"text-text",children:"Create Folder"}),s.jsx("span",{className:"ml-auto text-right",children:"Group selected sets into a new folder"})]}),s.jsxs("li",{className:"flex items-center gap-3",children:[s.jsx(vp,{className:"text-accent shrink-0",size:18}),s.jsx("strong",{className:"text-text",children:"Move to..."}),s.jsx("span",{className:"ml-auto text-right",children:"Move sets into an existing folder"})]})]}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Set Actions"}),s.jsx("p",{className:"text-muted mb-4",children:"On each set card, you'll find quick action buttons:"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-4",children:[s.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2",children:[s.jsx(vi,{size:16,className:"text-accent"})," Edit"]}),s.jsx("p",{className:"text-sm text-muted",children:"Modify cards, add new ones, or restructure your set."})]}),s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-4",children:[s.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2",children:[s.jsx(Ka,{size:16,className:"text-accent"})," Duplicate"]}),s.jsx("p",{className:"text-sm text-muted",children:"Create a copy to experiment without affecting the original."})]}),s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-4",children:[s.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2",children:[s.jsx(mn,{size:16,className:"text-accent"})," Export"]}),s.jsx("p",{className:"text-sm text-muted",children:"Download as a .flashcards JSON file for backup or sharing."})]}),s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-4",children:[s.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2",children:[s.jsx(pn,{size:16,className:"text-red"})," Delete"]}),s.jsx("p",{className:"text-sm text-muted",children:"Remove a set permanently (requires confirmation)."})]})]}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Importing Sets"}),s.jsxs("p",{className:"text-muted",children:["Click ",s.jsx(wc,{className:"inline text-accent",size:16})," ",s.jsx("strong",{className:"text-accent",children:"Import"})," in the Library header to load a ",s.jsx("code",{className:"bg-panel-2 px-1 rounded",children:".flashcards"})," JSON file. This is great for sharing sets with friends or restoring backups."]})]})},{id:"multistudy",title:"Multistudy",icon:s.jsx(oc,{size:20}),content:s.jsxs("div",{className:"space-y-6 text-text",children:[s.jsx("p",{className:"text-lg leading-relaxed",children:"Combine multiple sets into one mega study session. Perfect for exam prep when you need to review everything at once."}),s.jsx("div",{className:"my-6 flex justify-center",children:s.jsx(fh,{})}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"How to Start a Multistudy"}),s.jsxs("div",{className:"space-y-4 text-muted",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-accent text-bg flex items-center justify-center font-bold shrink-0",children:"1"}),s.jsx("div",{className:"flex items-center",children:s.jsxs("span",{children:["Select ",s.jsx("strong",{className:"text-text",children:"2 or more sets"})," using the checkboxes in your Library"]})})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-accent text-bg flex items-center justify-center font-bold shrink-0",children:"2"}),s.jsx("div",{className:"flex items-center",children:s.jsxs("span",{children:["Click the ",s.jsx("strong",{className:"text-accent",children:"Multistudy"})," button in the floating action bar"]})})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-accent text-bg flex items-center justify-center font-bold shrink-0",children:"3"}),s.jsx("div",{className:"flex items-center",children:s.jsx("span",{children:"All cards from selected sets are combined and shuffled into one session"})})]})]}),s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-5 mt-8",children:[s.jsx("h4",{className:"font-bold mb-3",children:"Multistudy vs. Combine"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-accent font-bold mb-1",children:"Multistudy"}),s.jsx("p",{className:"text-muted",children:"Creates a temporary session. Cards remember their original sets. Great for quick review."})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-accent font-bold mb-1",children:"Combine"}),s.jsx("p",{className:"text-muted",children:"Creates a new permanent set in your Library. Cards are merged together with fresh mastery levels."})]})]})]}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Visual Indicator"}),s.jsxs("p",{className:"text-muted",children:["Multistudy sessions are marked with ",s.jsx("strong",{className:"text-text",children:"diagonal stripes"})," and an accent bar on the left side, so you can easily distinguish them from regular sessions in your Ongoing Sessions list."]})]})},{id:"account",title:"Account Management",icon:s.jsx(lh,{size:20}),content:s.jsxs("div",{className:"space-y-6 text-text",children:[s.jsx("p",{className:"text-lg leading-relaxed",children:"Sign in to sync your flashcards across all your devices. Your data is securely stored and automatically synchronized."}),s.jsx("p",{className:"text-muted",children:"[Placeholder: Add your account management content here]"}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Signing In"}),s.jsxs("p",{className:"text-muted mb-4",children:["Open ",s.jsx("strong",{className:"text-accent",children:"Settings"})," (gear icon) and click ",s.jsx("strong",{className:"text-accent",children:"Login with Google"}),". Your library will sync within seconds."]}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"What Gets Synced?"}),s.jsxs("ul",{className:"space-y-3 text-muted",children:[s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(dn,{className:"text-accent shrink-0 mt-0.5",size:18}),s.jsx("span",{children:"All your flashcard sets and their content"})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(dn,{className:"text-accent shrink-0 mt-0.5",size:18}),s.jsx("span",{children:"Mastery progress for each card"})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(dn,{className:"text-accent shrink-0 mt-0.5",size:18}),s.jsx("span",{children:"Starred cards"})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(dn,{className:"text-accent shrink-0 mt-0.5",size:18}),s.jsx("span",{children:"Folders and organization"})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(dn,{className:"text-accent shrink-0 mt-0.5",size:18}),s.jsx("span",{children:"Ongoing study sessions"})]})]}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Managing Your Data"}),s.jsx("p",{className:"text-muted mb-4",children:"In Settings, you can:"}),s.jsxs("ul",{className:"space-y-3 text-muted",children:[s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(mn,{className:"text-accent shrink-0 mt-0.5",size:18}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-text",children:"Export All Data"})," ",s.jsx("span",{className:"ml-auto text-right",children:"Download a complete backup of everything"})]})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(pn,{className:"text-accent shrink-0 mt-0.5",size:18}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-text",children:"Delete All Data"})," ",s.jsx("span",{className:"ml-auto text-right",children:"Permanently remove all your data (requires confirmation)"})]})]})]}),s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-5 mt-8",children:[s.jsxs("h4",{className:"font-bold text-accent mb-2 flex items-center gap-2",children:[s.jsx(lh,{size:18,className:"text-accent"})," Privacy Note"]}),s.jsxs("p",{className:"text-muted",children:["We only store what's necessary for the app to function. We don't sell your data or show ads. Read our full ",s.jsx("strong",{className:"text-text",children:"Privacy Policy"})," in the footer."]})]})]})},{id:"open-source",title:"Open Source & Running Locally",icon:s.jsx(ih,{size:20}),content:s.jsxs("div",{className:"space-y-6 text-text",children:[s.jsxs("p",{className:"text-lg leading-relaxed",children:["Flashcardsish is open source under the ",s.jsx("strong",{className:"text-accent",children:"CC BY-NC 4.0"})," license. You can view the code, contribute, or run your own instance for non-commercial purposes."]}),s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-4 mb-6",children:[s.jsxs("p",{className:"text-text font-bold mb-1 flex items-center gap-2",children:[s.jsx(dn,{size:18,className:"text-accent"})," Free Forever"]}),s.jsx("p",{className:"text-muted text-sm",children:"There are no premium tiers, no hidden costs, and no ads."})]}),s.jsxs("a",{href:"https://github.com/RockhopperHD/flashcardsish",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-3 px-5 py-3 bg-panel-2 border border-outline rounded-xl hover:border-accent transition-colors",children:[s.jsx(ah,{size:24}),s.jsx("span",{className:"font-bold",children:"View on GitHub"})]}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Running Locally"}),s.jsx("p",{className:"text-muted mb-4",children:"Prerequisites: Node.js 18+ and npm"}),s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-4 font-mono text-sm space-y-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted",children:"# Clone the repository"}),s.jsx("div",{className:"text-text",children:"git clone https://github.com/RockhopperHD/flashcardsish.git"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted",children:"# Install dependencies"}),s.jsx("div",{className:"text-text",children:"npm install"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted",children:"# Start the dev server"}),s.jsx("div",{className:"text-text",children:"npm run dev"})]})]}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Environment Setup"}),s.jsxs("p",{className:"text-muted mb-4",children:["For cloud sync to work locally, you'll need to set up Supabase and configure the environment variables. See the ",s.jsx("strong",{className:"text-accent",children:"README.md"})," for detailed instructions."]}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Contributing"}),s.jsx("p",{className:"text-muted",children:"Contributions are welcome! Feel free to open issues for bugs or feature requests, or submit pull requests. Please follow the existing code style and include tests where applicable."}),s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-5 mt-8",children:[s.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2",children:[s.jsx(Es,{size:18,className:"text-accent"})," License Details"]}),s.jsxs("p",{className:"text-muted text-sm",children:["This work is licensed under ",s.jsx("a",{href:"https://creativecommons.org/licenses/by-nc/4.0/",target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline",children:"Creative Commons Attribution-NonCommercial 4.0 International"}),". You are free to share and adapt the material for non-commercial purposes with appropriate credit."]})]})]})},{id:"contact",title:"Contact",icon:s.jsx(Yl,{size:20}),content:s.jsxs("div",{className:"space-y-6 text-text",children:[s.jsx("p",{className:"text-lg leading-relaxed",children:"Have a question or want to say hi? You can find me here!"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-6",children:[s.jsxs("a",{href:"mailto:owenw2023@gmail.com",className:"flex flex-col items-center justify-center p-6 bg-panel-2 border border-outline rounded-xl hover:border-accent transition-all group",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-accent/10 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:s.jsx(Yl,{size:24,className:"text-accent"})}),s.jsx("span",{className:"font-bold text-lg mb-1",children:"Email Me"}),s.jsx("span",{className:"text-muted text-sm",children:"owenw2023@gmail.com"})]}),s.jsxs("a",{href:"https://www.owenwhelan.com",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center justify-center p-6 bg-panel-2 border border-outline rounded-xl hover:border-accent transition-all group",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-accent/10 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:s.jsx(Up,{size:24,className:"text-accent"})}),s.jsx("span",{className:"font-bold text-lg mb-1",children:"Website"}),s.jsx("span",{className:"text-muted text-sm",children:"owenwhelan.com"})]})]})]})},{id:"credits",title:"Credits",icon:s.jsx(Bh,{size:20}),content:s.jsxs("div",{className:"space-y-6 text-text",children:[s.jsxs("div",{className:"bg-panel-2 border border-outline rounded-xl p-8 text-center",children:[s.jsx("p",{className:"text-muted font-medium mb-2 uppercase tracking-wide text-xs",children:"Flashcardsish was built by"}),s.jsx("h2",{className:"text-3xl font-extrabold mb-4 text-text",children:"Owen Whelan"}),s.jsxs("div",{className:"text-left text-muted max-w-lg mx-auto mb-8 leading-relaxed",children:["I work with education, language, technology and a few other things. I made Flashcardsish as an accessible alternative to other apps, with features I thought were lacking.",s.jsx("br",{})," I've used a bunch of flashcard apps before and I found that a lot of them lacked features that I thought were important. A lot of them are also... really expensive now. So I fixed that with Flashcardsish."]}),s.jsx("div",{className:"flex justify-center gap-4",children:s.jsxs("a",{href:"https://github.com/RockhopperHD/flashcardsish",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 bg-accent text-bg font-bold rounded-xl hover:scale-105 active:scale-95 transition-all shadow-lg shadow-accent/20",children:[s.jsx(ah,{size:20}),"GitHub Repo"]})})]}),s.jsx("h3",{className:"text-xl font-bold mt-8 mb-4",children:"Built With"}),s.jsxs("ul",{className:"space-y-3 text-muted",children:[s.jsxs("li",{className:"flex items-end justify-between gap-2 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5 shrink-0",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-accent shrink-0"}),s.jsx("strong",{className:"text-text",children:"React"})]}),s.jsx("div",{className:"flex-1 border-b-2 border-dotted border-muted/30 mb-1.5 mx-1 min-w-[20px]"}),s.jsx("span",{className:"text-muted text-sm text-right shrink-0 mb-0.5",children:"UI Framework"})]}),s.jsxs("li",{className:"flex items-end justify-between gap-2 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5 shrink-0",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-accent shrink-0"}),s.jsx("strong",{className:"text-text",children:"TypeScript"})]}),s.jsx("div",{className:"flex-1 border-b-2 border-dotted border-muted/30 mb-1.5 mx-1 min-w-[20px]"}),s.jsx("span",{className:"text-muted text-sm text-right shrink-0 mb-0.5",children:"Type Safety"})]}),s.jsxs("li",{className:"flex items-end justify-between gap-2 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5 shrink-0",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-accent shrink-0"}),s.jsx("strong",{className:"text-text",children:"Tailwind CSS"})]}),s.jsx("div",{className:"flex-1 border-b-2 border-dotted border-muted/30 mb-1.5 mx-1 min-w-[20px]"}),s.jsx("span",{className:"text-muted text-sm text-right shrink-0 mb-0.5",children:"Styling"})]}),s.jsxs("li",{className:"flex items-end justify-between gap-2 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5 shrink-0",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-accent shrink-0"}),s.jsx("strong",{className:"text-text",children:"Vite"})]}),s.jsx("div",{className:"flex-1 border-b-2 border-dotted border-muted/30 mb-1.5 mx-1 min-w-[20px]"}),s.jsx("span",{className:"text-muted text-sm text-right shrink-0 mb-0.5",children:"Build Tool"})]}),s.jsxs("li",{className:"flex items-end justify-between gap-2 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5 shrink-0",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-accent shrink-0"}),s.jsx("strong",{className:"text-text",children:"Supabase"})]}),s.jsx("div",{className:"flex-1 border-b-2 border-dotted border-muted/30 mb-1.5 mx-1 min-w-[20px]"}),s.jsx("span",{className:"text-muted text-sm text-right shrink-0 mb-0.5",children:"Backend & Auth"})]}),s.jsxs("li",{className:"flex items-end justify-between gap-2 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-0.5 shrink-0",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-accent shrink-0"}),s.jsx("strong",{className:"text-text",children:"Lucide Icons"})]}),s.jsx("div",{className:"flex-1 border-b-2 border-dotted border-muted/30 mb-1.5 mx-1 min-w-[20px]"}),s.jsx("span",{className:"text-muted text-sm text-right shrink-0 mb-0.5",children:"Beautiful Icons"})]})]})]})}],c=o.find(d=>d.id===r);return s.jsxs("div",{className:"w-full max-w-5xl mx-auto pb-20 pt-8 px-6",children:[s.jsx("div",{className:"flex items-center gap-4 mb-8",children:s.jsxs("button",{onClick:i,className:"group flex items-center gap-2 text-muted hover:text-text font-bold text-sm uppercase tracking-wider transition-colors",children:[s.jsx("div",{className:"p-2 rounded-full border border-outline group-hover:bg-panel transition-colors",children:s.jsx(yi,{size:16})}),"Back"]})}),s.jsxs("div",{className:"flex gap-8",children:[s.jsx("div",{className:"w-64 shrink-0 hidden md:block",children:s.jsxs("div",{className:"sticky top-24",children:[s.jsx("h3",{className:"text-xs font-bold text-muted uppercase tracking-widest mb-4 px-2",children:"Documentation"}),s.jsx("nav",{className:"space-y-1",children:o.filter(d=>d.id!=="contact").map(d=>s.jsxs("button",{onClick:()=>n(d.id),className:G("w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-left transition-all text-sm",r===d.id?"bg-accent/10 text-accent border border-accent/20":"text-muted hover:text-text hover:bg-panel-2"),children:[s.jsx("span",{className:G("shrink-0",r===d.id?"text-accent":"text-muted"),children:d.icon}),s.jsx("span",{className:"font-medium truncate",children:d.title})]},d.id))}),s.jsx("div",{className:"mt-8 pt-6 border-t border-outline",children:s.jsxs("button",{onClick:()=>n("contact"),className:G("w-full flex items-center gap-2 px-3 py-2 text-sm text-left transition-colors rounded-lg",r==="contact"?"bg-accent/10 text-accent border border-accent/20":"text-muted hover:text-accent"),children:[s.jsx(Yl,{size:16}),s.jsx("span",{children:"Contact"})]})})]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[s.jsx("div",{className:"p-3 rounded-xl bg-accent/10 border border-accent/20",children:s.jsx("span",{className:"text-accent",children:c==null?void 0:c.icon})}),s.jsx("h1",{className:"text-3xl font-extrabold text-text",children:c==null?void 0:c.title})]})}),s.jsx("div",{className:"bg-panel border border-outline rounded-2xl p-8",children:c==null?void 0:c.content}),s.jsxs("div",{className:"md:hidden mt-6",children:[s.jsx("label",{className:"text-xs font-bold text-muted uppercase tracking-widest mb-2 block",children:"Jump to Section"}),s.jsx("select",{value:r||"",onChange:d=>n(d.target.value),className:"w-full bg-panel-2 border border-outline rounded-xl px-4 py-3 text-text font-medium focus:outline-none focus:border-accent",children:o.map(d=>s.jsx("option",{value:d.id,children:d.title},d.id))})]})]})]})]})},Qg="modulepreload",Xg=function(i){return"/"+i},mh={},Zg=function(r,n,o){let c=Promise.resolve();if(n&&n.length>0){let f=function(x){return Promise.all(x.map(b=>Promise.resolve(b).then(N=>({status:"fulfilled",value:N}),N=>({status:"rejected",reason:N}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));c=f(n.map(x=>{if(x=Xg(x),x in mh)return;mh[x]=!0;const b=x.endsWith(".css"),N=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${N}`))return;const S=document.createElement("link");if(S.rel=b?"stylesheet":Qg,b||(S.as="script"),S.crossOrigin="",S.href=x,p&&S.setAttribute("nonce",p),document.head.appendChild(S),b)return new Promise((O,j)=>{S.addEventListener("load",O),S.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${x}`)))})}))}function d(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return c.then(f=>{for(const m of f||[])m.status==="rejected"&&d(m.reason);return r().catch(d)})};function Si(i){return new Promise((r,n)=>{i.oncomplete=i.onsuccess=()=>r(i.result),i.onabort=i.onerror=()=>n(i.error)})}function qh(i,r){let n;const o=()=>{if(n)return n;const c=indexedDB.open(i);return c.onupgradeneeded=()=>c.result.createObjectStore(r),n=Si(c),n.then(d=>{d.onclose=()=>n=void 0},()=>{}),n};return(c,d)=>o().then(f=>d(f.transaction(r,c).objectStore(r)))}let Ql;function bc(){return Ql||(Ql=qh("keyval-store","keyval")),Ql}function Gh(i,r=bc()){return r("readonly",n=>Si(n.get(i)))}function Kh(i,r,n=bc()){return n("readwrite",o=>(o.put(r,i),Si(o.transaction)))}function ex(i,r=bc()){return r("readwrite",n=>(n.delete(i),Si(n.transaction)))}const tx=Object.freeze(Object.defineProperty({__proto__:null,createStore:qh,del:ex,get:Gh,promisifyRequest:Si,set:Kh},Symbol.toStringTag,{value:"Module"}));function to(i,r){var n={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&r.indexOf(o)<0&&(n[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(i);c<o.length;c++)r.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(i,o[c])&&(n[o[c]]=i[o[c]]);return n}function rx(i,r,n,o){function c(d){return d instanceof n?d:new n(function(f){f(d)})}return new(n||(n=Promise))(function(d,f){function m(b){try{x(o.next(b))}catch(N){f(N)}}function p(b){try{x(o.throw(b))}catch(N){f(N)}}function x(b){b.done?d(b.value):c(b.value).then(m,p)}x((o=o.apply(i,r||[])).next())})}const nx=i=>i?(...r)=>i(...r):(...r)=>fetch(...r);class jc extends Error{constructor(r,n="FunctionsError",o){super(r),this.name=n,this.context=o}}class sx extends jc{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class ph extends jc{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class gh extends jc{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var lc;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(lc||(lc={}));class ix{constructor(r,{headers:n={},customFetch:o,region:c=lc.Any}={}){this.url=r,this.headers=n,this.region=c,this.fetch=nx(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return rx(this,arguments,void 0,function*(n,o={}){var c;let d,f;try{const{headers:m,method:p,body:x,signal:b,timeout:N}=o;let S={},{region:O}=o;O||(O=this.region);const j=new URL(`${this.url}/${n}`);O&&O!=="any"&&(S["x-region"]=O,j.searchParams.set("forceFunctionRegion",O));let C;x&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&x instanceof Blob||x instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",C=x):typeof x=="string"?(S["Content-Type"]="text/plain",C=x):typeof FormData<"u"&&x instanceof FormData?C=x:(S["Content-Type"]="application/json",C=JSON.stringify(x)):C=x;let P=b;N&&(f=new AbortController,d=setTimeout(()=>f.abort(),N),b?(P=f.signal,b.addEventListener("abort",()=>f.abort())):P=f.signal);const F=yield this.fetch(j.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),m),body:C,signal:P}).catch(je=>{throw new sx(je)}),H=F.headers.get("x-relay-error");if(H&&H==="true")throw new ph(F);if(!F.ok)throw new gh(F);let B=((c=F.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),X;return B==="application/json"?X=yield F.json():B==="application/octet-stream"||B==="application/pdf"?X=yield F.blob():B==="text/event-stream"?X=F:B==="multipart/form-data"?X=yield F.formData():X=yield F.text(),{data:X,error:null,response:F}}catch(m){return{data:null,error:m,response:m instanceof gh||m instanceof ph?m.context:void 0}}finally{d&&clearTimeout(d)}})}}var ax=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}},ox=class{constructor(i){var r,n;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(r=i.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=i.signal,this.isMaybeSingle=(n=i.isMaybeSingle)!==null&&n!==void 0?n:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,r){return this.headers=new Headers(this.headers),this.headers.set(i,r),this}then(i,r){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let c=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{let f=null,m=null,p=null,x=d.status,b=d.statusText;if(d.ok){var N,S;if(n.method!=="HEAD"){var O;const F=await d.text();F===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((O=n.headers.get("Accept"))===null||O===void 0)&&O.includes("application/vnd.pgrst.plan+text"))?m=F:m=JSON.parse(F))}const C=(N=n.headers.get("Prefer"))===null||N===void 0?void 0:N.match(/count=(exact|planned|estimated)/),P=(S=d.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");C&&P&&P.length>1&&(p=parseInt(P[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,p=null,x=406,b="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var j;const C=await d.text();try{f=JSON.parse(C),Array.isArray(f)&&d.status===404&&(m=[],f=null,x=200,b="OK")}catch{d.status===404&&C===""?(x=204,b="No Content"):f={message:C}}if(f&&n.isMaybeSingle&&(!(f==null||(j=f.details)===null||j===void 0)&&j.includes("0 rows"))&&(f=null,x=200,b="OK"),f&&n.shouldThrowOnError)throw new ax(f)}return{error:f,data:m,count:p,status:x,statusText:b}});return this.shouldThrowOnError||(c=c.catch(d=>{var f;let m="";const p=d==null?void 0:d.cause;if(p){var x,b,N,S;const j=(x=p==null?void 0:p.message)!==null&&x!==void 0?x:"",C=(b=p==null?void 0:p.code)!==null&&b!==void 0?b:"";m=`${(N=d==null?void 0:d.name)!==null&&N!==void 0?N:"FetchError"}: ${d==null?void 0:d.message}`,m+=`

Caused by: ${(S=p==null?void 0:p.name)!==null&&S!==void 0?S:"Error"}: ${j}`,C&&(m+=` (${C})`),p!=null&&p.stack&&(m+=`
${p.stack}`)}else{var O;m=(O=d==null?void 0:d.stack)!==null&&O!==void 0?O:""}return{error:{message:`${(f=d==null?void 0:d.name)!==null&&f!==void 0?f:"FetchError"}: ${d==null?void 0:d.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(i,r)}returns(){return this}overrideTypes(){return this}},lx=class extends ox{select(i){let r=!1;const n=(i??"*").split("").map(o=>/\s/.test(o)&&!r?"":(o==='"'&&(r=!r),o)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:r=!0,nullsFirst:n,foreignTable:o,referencedTable:c=o}={}){const d=c?`${c}.order`:"order",f=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${f?`${f},`:""}${i}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:r,referencedTable:n=r}={}){const o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,r,{foreignTable:n,referencedTable:o=n}={}){const c=typeof o>"u"?"offset":`${o}.offset`,d=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(d,`${r-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:r=!1,settings:n=!1,buffers:o=!1,wal:c=!1,format:d="text"}={}){var f;const m=[i?"analyze":null,r?"verbose":null,n?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${p}"; options=${m};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};const xh=new RegExp("[,()]");var bs=class extends lx{eq(i,r){return this.url.searchParams.append(i,`eq.${r}`),this}neq(i,r){return this.url.searchParams.append(i,`neq.${r}`),this}gt(i,r){return this.url.searchParams.append(i,`gt.${r}`),this}gte(i,r){return this.url.searchParams.append(i,`gte.${r}`),this}lt(i,r){return this.url.searchParams.append(i,`lt.${r}`),this}lte(i,r){return this.url.searchParams.append(i,`lte.${r}`),this}like(i,r){return this.url.searchParams.append(i,`like.${r}`),this}likeAllOf(i,r){return this.url.searchParams.append(i,`like(all).{${r.join(",")}}`),this}likeAnyOf(i,r){return this.url.searchParams.append(i,`like(any).{${r.join(",")}}`),this}ilike(i,r){return this.url.searchParams.append(i,`ilike.${r}`),this}ilikeAllOf(i,r){return this.url.searchParams.append(i,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(i,r){return this.url.searchParams.append(i,`ilike(any).{${r.join(",")}}`),this}regexMatch(i,r){return this.url.searchParams.append(i,`match.${r}`),this}regexIMatch(i,r){return this.url.searchParams.append(i,`imatch.${r}`),this}is(i,r){return this.url.searchParams.append(i,`is.${r}`),this}isDistinct(i,r){return this.url.searchParams.append(i,`isdistinct.${r}`),this}in(i,r){const n=Array.from(new Set(r)).map(o=>typeof o=="string"&&xh.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(i,`in.(${n})`),this}notIn(i,r){const n=Array.from(new Set(r)).map(o=>typeof o=="string"&&xh.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(i,`not.in.(${n})`),this}contains(i,r){return typeof r=="string"?this.url.searchParams.append(i,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(i,`cs.{${r.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(r)}`),this}containedBy(i,r){return typeof r=="string"?this.url.searchParams.append(i,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(i,`cd.{${r.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(r)}`),this}rangeGt(i,r){return this.url.searchParams.append(i,`sr.${r}`),this}rangeGte(i,r){return this.url.searchParams.append(i,`nxl.${r}`),this}rangeLt(i,r){return this.url.searchParams.append(i,`sl.${r}`),this}rangeLte(i,r){return this.url.searchParams.append(i,`nxr.${r}`),this}rangeAdjacent(i,r){return this.url.searchParams.append(i,`adj.${r}`),this}overlaps(i,r){return typeof r=="string"?this.url.searchParams.append(i,`ov.${r}`):this.url.searchParams.append(i,`ov.{${r.join(",")}}`),this}textSearch(i,r,{config:n,type:o}={}){let c="";o==="plain"?c="pl":o==="phrase"?c="ph":o==="websearch"&&(c="w");const d=n===void 0?"":`(${n})`;return this.url.searchParams.append(i,`${c}fts${d}.${r}`),this}match(i){return Object.entries(i).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(i,r,n){return this.url.searchParams.append(i,`not.${r}.${n}`),this}or(i,{foreignTable:r,referencedTable:n=r}={}){const o=n?`${n}.or`:"or";return this.url.searchParams.append(o,`(${i})`),this}filter(i,r,n){return this.url.searchParams.append(i,`${r}.${n}`),this}},cx=class{constructor(i,{headers:r={},schema:n,fetch:o}){this.url=i,this.headers=new Headers(r),this.schema=n,this.fetch=o}select(i,r){const{head:n=!1,count:o}=r??{},c=n?"HEAD":"GET";let d=!1;const f=(i??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",f),o&&this.headers.append("Prefer",`count=${o}`),new bs({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:r,defaultToNull:n=!0}={}){var o;const c="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(d.length>0){const f=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new bs({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(i,{onConflict:r,ignoreDuplicates:n=!1,count:o,defaultToNull:c=!0}={}){var d;const f="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((p,x)=>p.concat(Object.keys(x)),[]);if(m.length>0){const p=[...new Set(m)].map(x=>`"${x}"`);this.url.searchParams.set("columns",p.join(","))}}return new bs({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:r}={}){var n;const o="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new bs({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:i}={}){var r;const n="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new bs({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}},ux=class Yh{constructor(r,{headers:n={},schema:o,fetch:c}={}){this.url=r,this.headers=new Headers(n),this.schemaName=o,this.fetch=c}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new cx(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new Yh(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,n={},{head:o=!1,get:c=!1,count:d}={}){var f;let m;const p=new URL(`${this.url}/rpc/${r}`);let x;o||c?(m=o?"HEAD":"GET",Object.entries(n).filter(([N,S])=>S!==void 0).map(([N,S])=>[N,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([N,S])=>{p.searchParams.append(N,S)})):(m="POST",x=n);const b=new Headers(this.headers);return d&&b.set("Prefer",`count=${d}`),new bs({method:m,url:p,headers:b,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class dx{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=n.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let n=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(n+=`

Suggested solution: ${r.workaround}`),new Error(n)}static createWebSocket(r,n){const o=this.getWebSocketConstructor();return new o(r,n)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const hx="2.89.0",fx=`realtime-js/${hx}`,Jh="1.0.0",mx="2.0.0",yh=Jh,cc=1e4,px=1e3,gx=100;var hn;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(hn||(hn={}));var wt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(wt||(wt={}));var br;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(br||(br={}));var uc;(function(i){i.websocket="websocket"})(uc||(uc={}));var Dn;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Dn||(Dn={}));class xx{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,n){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(r));let o=[r.join_ref,r.ref,r.topic,r.event,r.payload];return n(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(r){var n;return this._isArrayBuffer((n=r.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var n,o;const c=(o=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(r){var n,o;const c=(o=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:{},f=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(r,n,o){var c,d;const f=r.topic,m=(c=r.ref)!==null&&c!==void 0?c:"",p=(d=r.join_ref)!==null&&d!==void 0?d:"",x=r.payload.event,b=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},N=Object.keys(b).length===0?"":JSON.stringify(b);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`userEvent length ${x.length} exceeds maximum of 255`);if(N.length>255)throw new Error(`metadata length ${N.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+m.length+f.length+x.length+N.length,O=new ArrayBuffer(this.HEADER_LENGTH+S);let j=new DataView(O),C=0;j.setUint8(C++,this.KINDS.userBroadcastPush),j.setUint8(C++,p.length),j.setUint8(C++,m.length),j.setUint8(C++,f.length),j.setUint8(C++,x.length),j.setUint8(C++,N.length),j.setUint8(C++,n),Array.from(p,F=>j.setUint8(C++,F.charCodeAt(0))),Array.from(m,F=>j.setUint8(C++,F.charCodeAt(0))),Array.from(f,F=>j.setUint8(C++,F.charCodeAt(0))),Array.from(x,F=>j.setUint8(C++,F.charCodeAt(0))),Array.from(N,F=>j.setUint8(C++,F.charCodeAt(0)));var P=new Uint8Array(O.byteLength+o.byteLength);return P.set(new Uint8Array(O),0),P.set(new Uint8Array(o),O.byteLength),P.buffer}decode(r,n){if(this._isArrayBuffer(r)){let o=this._binaryDecode(r);return n(o)}if(typeof r=="string"){const o=JSON.parse(r),[c,d,f,m,p]=o;return n({join_ref:c,ref:d,topic:f,event:m,payload:p})}return n({})}_binaryDecode(r){const n=new DataView(r),o=n.getUint8(0),c=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,n,c)}}_decodeUserBroadcast(r,n,o){const c=n.getUint8(1),d=n.getUint8(2),f=n.getUint8(3),m=n.getUint8(4);let p=this.HEADER_LENGTH+4;const x=o.decode(r.slice(p,p+c));p=p+c;const b=o.decode(r.slice(p,p+d));p=p+d;const N=o.decode(r.slice(p,p+f));p=p+f;const S=r.slice(p,r.byteLength),O=m===this.JSON_ENCODING?JSON.parse(o.decode(S)):S,j={type:this.BROADCAST_EVENT,event:b,payload:O};return f>0&&(j.meta=JSON.parse(N)),{join_ref:null,ref:null,topic:x,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(r){var n;return r instanceof ArrayBuffer||((n=r==null?void 0:r.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(r,n){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([o])=>n.includes(o)))}}class Qh{constructor(r,n){this.callback=r,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ye;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ye||(Ye={}));const vh=(i,r,n={})=>{var o;const c=(o=n.skipTypes)!==null&&o!==void 0?o:[];return r?Object.keys(r).reduce((d,f)=>(d[f]=yx(f,i,r,c),d),{}):{}},yx=(i,r,n,o)=>{const c=r.find(m=>m.name===i),d=c==null?void 0:c.type,f=n[i];return d&&!o.includes(d)?Xh(d,f):dc(f)},Xh=(i,r)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return jx(r,n)}switch(i){case Ye.bool:return vx(r);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return wx(r);case Ye.json:case Ye.jsonb:return bx(r);case Ye.timestamp:return _x(r);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return dc(r);default:return dc(r)}},dc=i=>i,vx=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},wx=i=>{if(typeof i=="string"){const r=parseFloat(i);if(!Number.isNaN(r))return r}return i},bx=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch{return i}return i},jx=(i,r)=>{if(typeof i!="string")return i;const n=i.length-1,o=i[n];if(i[0]==="{"&&o==="}"){let d;const f=i.slice(1,n);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(m=>Xh(r,m))}return i},_x=i=>typeof i=="string"?i.replace(" ","T"):i,Zh=i=>{const r=new URL(i);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class Xl{constructor(r,n,o={},c=cc){this.channel=r,this.event=n,this.payload=o,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,n){var o;return this._hasReceived(r)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:n}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(n))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var wh;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(wh||(wh={}));class gi{constructor(r,n){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},c=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gi.syncState(this.state,c,d,f),this.pendingDiffs.forEach(p=>{this.state=gi.syncDiff(this.state,p,d,f)}),this.pendingDiffs=[],m()}),this.channel._on(o.diff,{},c=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=gi.syncDiff(this.state,c,d,f),m())}),this.onJoin((c,d,f)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:d,newPresences:f})}),this.onLeave((c,d,f)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,n,o,c){const d=this.cloneDeep(r),f=this.transformState(n),m={},p={};return this.map(d,(x,b)=>{f[x]||(p[x]=b)}),this.map(f,(x,b)=>{const N=d[x];if(N){const S=b.map(P=>P.presence_ref),O=N.map(P=>P.presence_ref),j=b.filter(P=>O.indexOf(P.presence_ref)<0),C=N.filter(P=>S.indexOf(P.presence_ref)<0);j.length>0&&(m[x]=j),C.length>0&&(p[x]=C)}else m[x]=b}),this.syncDiff(d,{joins:m,leaves:p},o,c)}static syncDiff(r,n,o,c){const{joins:d,leaves:f}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),c||(c=()=>{}),this.map(d,(m,p)=>{var x;const b=(x=r[m])!==null&&x!==void 0?x:[];if(r[m]=this.cloneDeep(p),b.length>0){const N=r[m].map(O=>O.presence_ref),S=b.filter(O=>N.indexOf(O.presence_ref)<0);r[m].unshift(...S)}o(m,b,p)}),this.map(f,(m,p)=>{let x=r[m];if(!x)return;const b=p.map(N=>N.presence_ref);x=x.filter(N=>b.indexOf(N.presence_ref)<0),r[m]=x,c(m,x,p),x.length===0&&delete r[m]}),r}static map(r,n){return Object.getOwnPropertyNames(r).map(o=>n(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((n,o)=>{const c=r[o];return"metas"in c?n[o]=c.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):n[o]=c,n},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bh;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(bh||(bh={}));var xi;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(xi||(xi={}));var Mr;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Mr||(Mr={}));class Ns{constructor(r,n={config:{}},o){var c,d;if(this.topic=r,this.params=n,this.socket=o,this.bindings={},this.state=wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Xl(this,br.join,this.params,this.timeout),this.rejoinTimer=new Qh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wt.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(br.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new gi(this),this.broadcastEndpointURL=Zh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,n=this.timeout){var o,c,d;if(this.socket.isConnected()||this.socket.connect(),this.state==wt.closed){const{config:{broadcast:f,presence:m,private:p}}=this.params,x=(c=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(O=>O.filter))!==null&&c!==void 0?c:[],b=!!this.bindings[xi.PRESENCE]&&this.bindings[xi.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,N={},S={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:b}),postgres_changes:x,private:p};this.socket.accessTokenValue&&(N.access_token=this.socket.accessTokenValue),this._onError(O=>r==null?void 0:r(Mr.CHANNEL_ERROR,O)),this._onClose(()=>r==null?void 0:r(Mr.CLOSED)),this.updateJoinPayload(Object.assign({config:S},N)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:O})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),O===void 0){r==null||r(Mr.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,P=(j=C==null?void 0:C.length)!==null&&j!==void 0?j:0,F=[];for(let H=0;H<P;H++){const B=C[H],{filter:{event:X,schema:je,table:he,filter:ie}}=B,q=O&&O[H];if(q&&q.event===X&&Ns.isFilterValueEqual(q.schema,je)&&Ns.isFilterValueEqual(q.table,he)&&Ns.isFilterValueEqual(q.filter,ie))F.push(Object.assign(Object.assign({},B),{id:q.id}));else{this.unsubscribe(),this.state=wt.errored,r==null||r(Mr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=F,r&&r(Mr.SUBSCRIBED);return}}).receive("error",O=>{this.state=wt.errored,r==null||r(Mr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(O).join(", ")||"error")))}).receive("timeout",()=>{r==null||r(Mr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,n={}){return await this.send({type:"presence",event:"track",payload:r},n.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,n,o){return this.state===wt.joined&&r===xi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,n,o)}async httpSend(r,n,o={}){var c;if(n==null)return Promise.reject("Payload is required for httpSend()");const d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:n,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(c=o.timeout)!==null&&c!==void 0?c:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const x=await m.json();p=x.error||x.message||p}catch{}return Promise.reject(new Error(p))}async send(r,n={}){var o,c;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=r,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((c=x.body)===null||c===void 0?void 0:c.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,m,p;const x=this._push(r.type,r,n.timeout||this.timeout);r.type==="broadcast"&&!(!((p=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&d("ok"),x.receive("ok",()=>d("ok")),x.receive("error",()=>d("error")),x.receive("timeout",()=>d("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=wt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(br.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(c=>{o=new Xl(this,br.leave,{},r),o.receive("ok",()=>{n(),c("ok")}).receive("timeout",()=>{n(),c("timed out")}).receive("error",()=>{c("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wt.closed,this.bindings={}}async _fetchWithTimeout(r,n,o){const c=new AbortController,d=setTimeout(()=>c.abort(),o),f=await this.socket.fetch(r,Object.assign(Object.assign({},n),{signal:c.signal}));return clearTimeout(d),f}_push(r,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Xl(this,r,n,o);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>gx){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(r,n,o){return n}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,n,o){var c,d;const f=r.toLocaleLowerCase(),{close:m,error:p,leave:x,join:b}=br;if(o&&[m,p,x,b].indexOf(f)>=0&&o!==this._joinRef())return;let S=this._onMessage(f,n,o);if(n&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(O=>{var j,C,P;return((j=O.filter)===null||j===void 0?void 0:j.event)==="*"||((P=(C=O.filter)===null||C===void 0?void 0:C.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===f}).map(O=>O.callback(S,o)):(d=this.bindings[f])===null||d===void 0||d.filter(O=>{var j,C,P,F,H,B;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in O){const X=O.id,je=(j=O.filter)===null||j===void 0?void 0:j.event;return X&&((C=n.ids)===null||C===void 0?void 0:C.includes(X))&&(je==="*"||(je==null?void 0:je.toLocaleLowerCase())===((P=n.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const X=(H=(F=O==null?void 0:O.filter)===null||F===void 0?void 0:F.event)===null||H===void 0?void 0:H.toLocaleLowerCase();return X==="*"||X===((B=n==null?void 0:n.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return O.type.toLocaleLowerCase()===f}).map(O=>{if(typeof S=="object"&&"ids"in S){const j=S.data,{schema:C,table:P,commit_timestamp:F,type:H,errors:B}=j;S=Object.assign(Object.assign({},{schema:C,table:P,commit_timestamp:F,eventType:H,new:{},old:{},errors:B}),this._getPayloadRecords(j))}O.callback(S,o)})}_isClosed(){return this.state===wt.closed}_isJoined(){return this.state===wt.joined}_isJoining(){return this.state===wt.joining}_isLeaving(){return this.state===wt.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,n,o){const c=r.toLocaleLowerCase(),d={type:c,filter:n,callback:o};return this.bindings[c]?this.bindings[c].push(d):this.bindings[c]=[d],this}_off(r,n){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(c=>{var d;return!(((d=c.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===o&&Ns.isEqual(c.filter,n))})),this}static isEqual(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const o in r)if(r[o]!==n[o])return!1;return!0}static isFilterValueEqual(r,n){return(r??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(br.close,{},r)}_onError(r){this._on(br.error,{},n=>r(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wt.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const n={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(n.new=vh(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(n.old=vh(r.columns,r.old_record)),n}}const Zl=()=>{},Ba={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Nx=[1e3,2e3,5e3,1e4],kx=1e4,Sx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ex{constructor(r,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cc,this.transport=null,this.heartbeatIntervalMs=Ba.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Zl,this.ref=0,this.reconnectTimer=null,this.vsn=yh,this.logger=Zl,this.conn=null,this.sendBuffer=[],this.serializer=new xx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>c?(...d)=>c(...d):(...d)=>fetch(...d),!(!((o=n==null?void 0:n.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${r}/${uc.websocket}`,this.httpEndpoint=Zh(r),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=dx.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const n=r.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const n=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const r=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,n,o){this.logger(r,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case hn.connecting:return Dn.Connecting;case hn.open:return Dn.Open;case hn.closing:return Dn.Closing;default:return Dn.Closed}}isConnected(){return this.connectionState()===Dn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,n={config:{}}){const o=`realtime:${r}`,c=this.getChannels().find(d=>d.topic===o);if(c)return c;{const d=new Ns(`realtime:${r}`,n,this);return this.channels.push(d),d}}push(r){const{topic:n,event:o,payload:c,ref:d}=r,f=()=>{this.encode(r,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${n} ${o} (${d})`,c),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(px,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ba.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let n=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${r}"`),n.unsubscribe())}_remove(r){this.channels=this.channels.filter(n=>n.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(x){this.log("error","error in heartbeat callback",x)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:c,payload:d,ref:f}=n,m=f?`(${f})`:"",p=d.status||"";this.log("receive",`${p} ${o} ${c} ${m}`.trim(),d),this.channels.filter(x=>x._isMember(o)).forEach(x=>x._trigger(c,d,f)),this._triggerStateCallbacks("message",n)})}_clearTimer(r){var n;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===hn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===hn.open||this.conn.readyState===hn.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var n;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(br.error))}_appendParams(r,n){if(Object.keys(n).length===0)return r;const o=r.match(/\?/)?"&":"?",c=new URLSearchParams(n);return`${r}${o}${c}`}_workerObjectUrl(r){let n;if(r)n=r;else{const o=new Blob([Sx],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(r,n=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(r=null){let n,o=!1;if(r)n=r,o=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),n=this.accessTokenValue}else n=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(c=>{const d={access_token:n,version:fx};n&&c.updateJoinPayload(d),c.joinedOnce&&c._isJoined()&&c._push(br.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${r}`,n)})}_triggerStateCallbacks(r,n){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(n)}catch(c){this.log("error",`error in ${r} callback`,c)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Qh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ba.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var n,o,c,d,f,m,p,x,b,N,S,O;switch(this.transport=(n=r==null?void 0:r.transport)!==null&&n!==void 0?n:null,this.timeout=(o=r==null?void 0:r.timeout)!==null&&o!==void 0?o:cc,this.heartbeatIntervalMs=(c=r==null?void 0:r.heartbeatIntervalMs)!==null&&c!==void 0?c:Ba.HEARTBEAT_INTERVAL,this.worker=(d=r==null?void 0:r.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=r==null?void 0:r.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=r==null?void 0:r.heartbeatCallback)!==null&&m!==void 0?m:Zl,this.vsn=(p=r==null?void 0:r.vsn)!==null&&p!==void 0?p:yh,r!=null&&r.params&&(this.params=r.params),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(x=r==null?void 0:r.reconnectAfterMs)!==null&&x!==void 0?x:(j=>Nx[j-1]||kx),this.vsn){case Jh:this.encode=(b=r==null?void 0:r.encode)!==null&&b!==void 0?b:((j,C)=>C(JSON.stringify(j))),this.decode=(N=r==null?void 0:r.decode)!==null&&N!==void 0?N:((j,C)=>C(JSON.parse(j)));break;case mx:this.encode=(S=r==null?void 0:r.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(O=r==null?void 0:r.decode)!==null&&O!==void 0?O:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r==null?void 0:r.workerUrl}}}var wi=class extends Error{constructor(i,r){var n;super(i),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&((n=r.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Cx(i,r,n){const o=new URL(r,i);if(n)for(const[c,d]of Object.entries(n))d!==void 0&&o.searchParams.set(c,d);return o.toString()}async function Tx(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function Ox(i){const r=i.fetchImpl??globalThis.fetch;return{async request({method:n,path:o,query:c,body:d,headers:f}){const m=Cx(i.baseUrl,o,c),p=await Tx(i.auth),x=await r(m,{method:n,headers:{...d?{"Content-Type":"application/json"}:{},...p,...f},body:d?JSON.stringify(d):void 0}),b=await x.text(),N=(x.headers.get("content-type")||"").includes("application/json"),S=N&&b?JSON.parse(b):b;if(!x.ok){const O=N?S:void 0,j=O==null?void 0:O.error;throw new wi((j==null?void 0:j.message)??`Request failed with status ${x.status}`,{status:x.status,icebergType:j==null?void 0:j.type,icebergCode:j==null?void 0:j.code,details:O})}return{status:x.status,headers:x.headers,data:S}}}}function Wa(i){return i.join("")}var Rx=class{constructor(i,r=""){this.client=i,this.prefix=r}async listNamespaces(i){const r=i?{parent:Wa(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(i,r){const n={namespace:i.namespace,properties:r==null?void 0:r.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wa(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wa(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wa(i.namespace)}`}),!0}catch(r){if(r instanceof wi&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(i,r){try{return await this.createNamespace(i,r)}catch(n){if(n instanceof wi&&n.status===409)return;throw n}}};function ps(i){return i.join("")}var Ix=class{constructor(i,r="",n){this.client=i,this.prefix=r,this.accessDelegation=n}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ps(i.namespace)}/tables`})).data.identifiers}async createTable(i,r){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ps(i.namespace)}/tables`,body:r,headers:n})).data.metadata}async updateTable(i,r){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ps(i.namespace)}/tables/${i.name}`,body:r});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(i,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ps(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String((r==null?void 0:r.purge)??!1)}})}async loadTable(i){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ps(i.namespace)}/tables/${i.name}`,headers:r})).data.metadata}async tableExists(i){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ps(i.namespace)}/tables/${i.name}`,headers:r}),!0}catch(n){if(n instanceof wi&&n.status===404)return!1;throw n}}async createTableIfNotExists(i,r){try{return await this.createTable(i,r)}catch(n){if(n instanceof wi&&n.status===409)return await this.loadTable({namespace:i.namespace,name:r.name});throw n}}},Ax=class{constructor(i){var o;let r="v1";i.catalogName&&(r+=`/${i.catalogName}`);const n=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=Ox({baseUrl:n,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=(o=i.accessDelegation)==null?void 0:o.join(","),this.namespaceOps=new Rx(this.client,r),this.tableOps=new Ix(this.client,r,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,r){return this.namespaceOps.createNamespace(i,r)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,r){return this.tableOps.createTable(i,r)}async updateTable(i,r){return this.tableOps.updateTable(i,r)}async dropTable(i,r){await this.tableOps.dropTable(i,r)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,r){return this.namespaceOps.createNamespaceIfNotExists(i,r)}async createTableIfNotExists(i,r){return this.tableOps.createTableIfNotExists(i,r)}},ro=class extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}};function at(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var Px=class extends ro{constructor(i,r,n){super(i),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},hc=class extends ro{constructor(i,r){super(i),this.name="StorageUnknownError",this.originalError=r}};const _c=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),Dx=()=>Response,fc=i=>{if(Array.isArray(i))return i.map(n=>fc(n));if(typeof i=="function"||i!==Object(i))return i;const r={};return Object.entries(i).forEach(([n,o])=>{const c=n.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));r[c]=fc(o)}),r},Lx=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},$x=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i);function bi(i){"@babel/helpers - typeof";return bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},bi(i)}function Mx(i,r){if(bi(i)!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var o=n.call(i,r);if(bi(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)}function Ux(i){var r=Mx(i,"string");return bi(r)=="symbol"?r:r+""}function zx(i,r,n){return(r=Ux(r))in i?Object.defineProperty(i,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[r]=n,i}function jh(i,r){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);r&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable})),n.push.apply(n,o)}return n}function be(i){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?jh(Object(n),!0).forEach(function(o){zx(i,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):jh(Object(n)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(n,o))})}return i}const ec=i=>{var r;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(r=i.error)===null||r===void 0?void 0:r.message)||JSON.stringify(i)},Fx=async(i,r,n)=>{i instanceof await Dx()&&!(n!=null&&n.noResolveJson)?i.json().then(o=>{const c=i.status||500,d=(o==null?void 0:o.statusCode)||c+"";r(new Px(ec(o),c,d))}).catch(o=>{r(new hc(ec(o),o))}):r(new hc(ec(i),i))},Bx=(i,r,n,o)=>{const c={method:i,headers:(r==null?void 0:r.headers)||{}};return i==="GET"||!o?c:(Lx(o)?(c.headers=be({"Content-Type":"application/json"},r==null?void 0:r.headers),c.body=JSON.stringify(o)):c.body=o,r!=null&&r.duplex&&(c.duplex=r.duplex),be(be({},c),n))};async function Ei(i,r,n,o,c,d){return new Promise((f,m)=>{i(n,Bx(r,o,c,d)).then(p=>{if(!p.ok)throw p;return o!=null&&o.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>Fx(p,m,o))})}async function ji(i,r,n,o){return Ei(i,"GET",r,n,o)}async function wr(i,r,n,o,c){return Ei(i,"POST",r,o,c,n)}async function mc(i,r,n,o,c){return Ei(i,"PUT",r,o,c,n)}async function Wx(i,r,n,o){return Ei(i,"HEAD",r,be(be({},n),{},{noResolveJson:!0}),o)}async function Nc(i,r,n,o,c){return Ei(i,"DELETE",r,o,c,n)}var Hx=class{constructor(i,r){this.downloadFn=i,this.shouldThrowOnError=r}then(i,r){return this.execute().then(i,r)}async execute(){var i=this;try{return{data:(await i.downloadFn()).body,error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}}};let ef;ef=Symbol.toStringTag;var Vx=class{constructor(i,r){this.downloadFn=i,this.shouldThrowOnError=r,this[ef]="BlobDownloadBuilder",this.promise=null}asStream(){return new Hx(this.downloadFn,this.shouldThrowOnError)}then(i,r){return this.getPromise().then(i,r)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var i=this;try{return{data:await(await i.downloadFn()).blob(),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}}};const qx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_h={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Gx=class{constructor(i,r={},n,o){this.shouldThrowOnError=!1,this.url=i,this.headers=r,this.bucketId=n,this.fetch=_c(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(i,r,n,o){var c=this;try{let d;const f=be(be({},_h),o);let m=be(be({},c.headers),i==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),p&&d.append("metadata",c.encodeMetadata(p)),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.has("cacheControl")||d.append("cacheControl",f.cacheControl),p&&!d.has("metadata")&&d.append("metadata",c.encodeMetadata(p))):(d=n,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,p&&(m["x-metadata"]=c.toBase64(c.encodeMetadata(p))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!f.duplex&&(f.duplex="half")),o!=null&&o.headers&&(m=be(be({},m),o.headers));const x=c._removeEmptyFolders(r),b=c._getFinalPath(x),N=await(i=="PUT"?mc:wr)(c.fetch,`${c.url}/object/${b}`,d,be({headers:m},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:x,id:N.Id,fullPath:N.Key},error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(at(d))return{data:null,error:d};throw d}}async upload(i,r,n){return this.uploadOrUpdate("POST",i,r,n)}async uploadToSignedUrl(i,r,n,o){var c=this;const d=c._removeEmptyFolders(i),f=c._getFinalPath(d),m=new URL(c.url+`/object/upload/sign/${f}`);m.searchParams.set("token",r);try{let p;const x=be({upsert:_h.upsert},o),b=be(be({},c.headers),{"x-upsert":String(x.upsert)});return typeof Blob<"u"&&n instanceof Blob?(p=new FormData,p.append("cacheControl",x.cacheControl),p.append("",n)):typeof FormData<"u"&&n instanceof FormData?(p=n,p.append("cacheControl",x.cacheControl)):(p=n,b["cache-control"]=`max-age=${x.cacheControl}`,b["content-type"]=x.contentType),{data:{path:d,fullPath:(await mc(c.fetch,m.toString(),p,{headers:b})).Key},error:null}}catch(p){if(c.shouldThrowOnError)throw p;if(at(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(i,r){var n=this;try{let o=n._getFinalPath(i);const c=be({},n.headers);r!=null&&r.upsert&&(c["x-upsert"]="true");const d=await wr(n.fetch,`${n.url}/object/upload/sign/${o}`,{},{headers:c}),f=new URL(n.url+d.url),m=f.searchParams.get("token");if(!m)throw new ro("No token returned by API");return{data:{signedUrl:f.toString(),path:i,token:m},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(at(o))return{data:null,error:o};throw o}}async update(i,r,n){return this.uploadOrUpdate("PUT",i,r,n)}async move(i,r,n){var o=this;try{return{data:await wr(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:i,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:o.headers}),error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(at(c))return{data:null,error:c};throw c}}async copy(i,r,n){var o=this;try{return{data:{path:(await wr(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:i,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:o.headers})).Key},error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(at(c))return{data:null,error:c};throw c}}async createSignedUrl(i,r,n){var o=this;try{let c=o._getFinalPath(i),d=await wr(o.fetch,`${o.url}/object/sign/${c}`,be({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:o.headers});const f=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return d={signedUrl:encodeURI(`${o.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(at(c))return{data:null,error:c};throw c}}async createSignedUrls(i,r,n){var o=this;try{const c=await wr(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:r,paths:i},{headers:o.headers}),d=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:c.map(f=>be(be({},f),{},{signedUrl:f.signedURL?encodeURI(`${o.url}${f.signedURL}${d}`):null})),error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(at(c))return{data:null,error:c};throw c}}download(i,r){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),c=o?`?${o}`:"",d=this._getFinalPath(i),f=()=>ji(this.fetch,`${this.url}/${n}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new Vx(f,this.shouldThrowOnError)}async info(i){var r=this;const n=r._getFinalPath(i);try{return{data:fc(await ji(r.fetch,`${r.url}/object/info/${n}`,{headers:r.headers})),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(at(o))return{data:null,error:o};throw o}}async exists(i){var r=this;const n=r._getFinalPath(i);try{return await Wx(r.fetch,`${r.url}/object/${n}`,{headers:r.headers}),{data:!0,error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(at(o)&&o instanceof hc){const c=o.originalError;if([400,404].includes(c==null?void 0:c.status))return{data:!1,error:o}}throw o}}getPublicUrl(i,r){const n=this._getFinalPath(i),o=[],c=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&o.push(c);const d=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});f!==""&&o.push(f);let m=o.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${n}${m}`)}}}async remove(i){var r=this;try{return{data:await Nc(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:i},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(at(n))return{data:null,error:n};throw n}}async list(i,r,n){var o=this;try{const c=be(be(be({},qx),r),{},{prefix:i||""});return{data:await wr(o.fetch,`${o.url}/object/list/${o.bucketId}`,c,{headers:o.headers},n),error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(at(c))return{data:null,error:c};throw c}}async listV2(i,r){var n=this;try{const o=be({},i);return{data:await wr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,o,{headers:n.headers},r),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(at(o))return{data:null,error:o};throw o}}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const r=[];return i.width&&r.push(`width=${i.width}`),i.height&&r.push(`height=${i.height}`),i.resize&&r.push(`resize=${i.resize}`),i.format&&r.push(`format=${i.format}`),i.quality&&r.push(`quality=${i.quality}`),r.join("&")}};const tf="2.89.0",rf={"X-Client-Info":`storage-js/${tf}`};var Kx=class{constructor(i,r={},n,o){this.shouldThrowOnError=!1;const c=new URL(i);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=be(be({},rf),r),this.fetch=_c(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(i){var r=this;try{const n=r.listBucketOptionsToQueryString(i);return{data:await ji(r.fetch,`${r.url}/bucket${n}`,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(at(n))return{data:null,error:n};throw n}}async getBucket(i){var r=this;try{return{data:await ji(r.fetch,`${r.url}/bucket/${i}`,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(at(n))return{data:null,error:n};throw n}}async createBucket(i,r={public:!1}){var n=this;try{return{data:await wr(n.fetch,`${n.url}/bucket`,{id:i,name:i,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(at(o))return{data:null,error:o};throw o}}async updateBucket(i,r){var n=this;try{return{data:await mc(n.fetch,`${n.url}/bucket/${i}`,{id:i,name:i,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(at(o))return{data:null,error:o};throw o}}async emptyBucket(i){var r=this;try{return{data:await wr(r.fetch,`${r.url}/bucket/${i}/empty`,{},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(at(n))return{data:null,error:n};throw n}}async deleteBucket(i){var r=this;try{return{data:await Nc(r.fetch,`${r.url}/bucket/${i}`,{},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(at(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(i){const r={};return i&&("limit"in i&&(r.limit=String(i.limit)),"offset"in i&&(r.offset=String(i.offset)),i.search&&(r.search=i.search),i.sortColumn&&(r.sortColumn=i.sortColumn),i.sortOrder&&(r.sortOrder=i.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},Yx=class{constructor(i,r={},n){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=be(be({},rf),r),this.fetch=_c(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var r=this;try{return{data:await wr(r.fetch,`${r.url}/bucket`,{name:i},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(at(n))return{data:null,error:n};throw n}}async listBuckets(i){var r=this;try{const n=new URLSearchParams;(i==null?void 0:i.limit)!==void 0&&n.set("limit",i.limit.toString()),(i==null?void 0:i.offset)!==void 0&&n.set("offset",i.offset.toString()),i!=null&&i.sortColumn&&n.set("sortColumn",i.sortColumn),i!=null&&i.sortOrder&&n.set("sortOrder",i.sortOrder),i!=null&&i.search&&n.set("search",i.search);const o=n.toString(),c=o?`${r.url}/bucket?${o}`:`${r.url}/bucket`;return{data:await ji(r.fetch,c,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(at(n))return{data:null,error:n};throw n}}async deleteBucket(i){var r=this;try{return{data:await Nc(r.fetch,`${r.url}/bucket/${i}`,{},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(at(n))return{data:null,error:n};throw n}}from(i){var r=this;if(!$x(i))throw new ro("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Ax({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(n,{get(c,d){const f=c[d];return typeof f!="function"?f:async(...m)=>{try{return{data:await f.apply(c,m),error:null}}catch(p){if(o)throw p;return{data:null,error:p}}}}})}};const kc={"X-Client-Info":`storage-js/${tf}`,"Content-Type":"application/json"};var nf=class extends Error{constructor(i){super(i),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function tr(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}var tc=class extends nf{constructor(i,r,n){super(i),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Jx=class extends nf{constructor(i,r){super(i),this.name="StorageVectorsUnknownError",this.originalError=r}};const Sc=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),Qx=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Nh=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Xx=async(i,r,n)=>{if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!(n!=null&&n.noResolveJson)){const o=i.status||500,c=i;if(typeof c.json=="function")c.json().then(d=>{const f=(d==null?void 0:d.statusCode)||(d==null?void 0:d.code)||o+"";r(new tc(Nh(d),o,f))}).catch(()=>{const d=o+"";r(new tc(c.statusText||`HTTP ${o} error`,o,d))});else{const d=o+"";r(new tc(c.statusText||`HTTP ${o} error`,o,d))}}else r(new Jx(Nh(i),i))},Zx=(i,r,n,o)=>{const c={method:i,headers:(r==null?void 0:r.headers)||{}};return o?(Qx(o)?(c.headers=be({"Content-Type":"application/json"},r==null?void 0:r.headers),c.body=JSON.stringify(o)):c.body=o,be(be({},c),n)):c};async function ey(i,r,n,o,c,d){return new Promise((f,m)=>{i(n,Zx(r,o,c,d)).then(p=>{if(!p.ok)throw p;if(o!=null&&o.noResolveJson)return p;const x=p.headers.get("content-type");return!x||!x.includes("application/json")?{}:p.json()}).then(p=>f(p)).catch(p=>Xx(p,m,o))})}async function rr(i,r,n,o,c){return ey(i,"POST",r,o,c,n)}var ty=class{constructor(i,r={},n){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=be(be({},kc),r),this.fetch=Sc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(i){var r=this;try{return{data:await rr(r.fetch,`${r.url}/CreateIndex`,i,{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tr(n))return{data:null,error:n};throw n}}async getIndex(i,r){var n=this;try{return{data:await rr(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:i,indexName:r},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(tr(o))return{data:null,error:o};throw o}}async listIndexes(i){var r=this;try{return{data:await rr(r.fetch,`${r.url}/ListIndexes`,i,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tr(n))return{data:null,error:n};throw n}}async deleteIndex(i,r){var n=this;try{return{data:await rr(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:i,indexName:r},{headers:n.headers})||{},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(tr(o))return{data:null,error:o};throw o}}},ry=class{constructor(i,r={},n){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=be(be({},kc),r),this.fetch=Sc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(i){var r=this;try{if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await rr(r.fetch,`${r.url}/PutVectors`,i,{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tr(n))return{data:null,error:n};throw n}}async getVectors(i){var r=this;try{return{data:await rr(r.fetch,`${r.url}/GetVectors`,i,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tr(n))return{data:null,error:n};throw n}}async listVectors(i){var r=this;try{if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return{data:await rr(r.fetch,`${r.url}/ListVectors`,i,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tr(n))return{data:null,error:n};throw n}}async queryVectors(i){var r=this;try{return{data:await rr(r.fetch,`${r.url}/QueryVectors`,i,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tr(n))return{data:null,error:n};throw n}}async deleteVectors(i){var r=this;try{if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await rr(r.fetch,`${r.url}/DeleteVectors`,i,{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tr(n))return{data:null,error:n};throw n}}},ny=class{constructor(i,r={},n){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=be(be({},kc),r),this.fetch=Sc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var r=this;try{return{data:await rr(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tr(n))return{data:null,error:n};throw n}}async getBucket(i){var r=this;try{return{data:await rr(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:i},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tr(n))return{data:null,error:n};throw n}}async listBuckets(i={}){var r=this;try{return{data:await rr(r.fetch,`${r.url}/ListVectorBuckets`,i,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tr(n))return{data:null,error:n};throw n}}async deleteBucket(i){var r=this;try{return{data:await rr(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tr(n))return{data:null,error:n};throw n}}},sy=class extends ny{constructor(i,r={}){super(i,r.headers||{},r.fetch)}from(i){return new iy(this.url,this.headers,i,this.fetch)}async createBucket(i){var r=()=>super.createBucket,n=this;return r().call(n,i)}async getBucket(i){var r=()=>super.getBucket,n=this;return r().call(n,i)}async listBuckets(i={}){var r=()=>super.listBuckets,n=this;return r().call(n,i)}async deleteBucket(i){var r=()=>super.deleteBucket,n=this;return r().call(n,i)}},iy=class extends ty{constructor(i,r,n,o){super(i,r,o),this.vectorBucketName=n}async createIndex(i){var r=()=>super.createIndex,n=this;return r().call(n,be(be({},i),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(i={}){var r=()=>super.listIndexes,n=this;return r().call(n,be(be({},i),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(i){var r=()=>super.getIndex,n=this;return r().call(n,n.vectorBucketName,i)}async deleteIndex(i){var r=()=>super.deleteIndex,n=this;return r().call(n,n.vectorBucketName,i)}index(i){return new ay(this.url,this.headers,this.vectorBucketName,i,this.fetch)}},ay=class extends ry{constructor(i,r,n,o,c){super(i,r,c),this.vectorBucketName=n,this.indexName=o}async putVectors(i){var r=()=>super.putVectors,n=this;return r().call(n,be(be({},i),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(i){var r=()=>super.getVectors,n=this;return r().call(n,be(be({},i),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(i={}){var r=()=>super.listVectors,n=this;return r().call(n,be(be({},i),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(i){var r=()=>super.queryVectors,n=this;return r().call(n,be(be({},i),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(i){var r=()=>super.deleteVectors,n=this;return r().call(n,be(be({},i),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},oy=class extends Kx{constructor(i,r={},n,o){super(i,r,n,o)}from(i){return new Gx(this.url,this.headers,i,this.fetch)}get vectors(){return new sy(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Yx(this.url+"/iceberg",this.headers,this.fetch)}};const sf="2.89.0",js=30*1e3,pc=3,rc=pc*js,ly="http://localhost:9999",cy="supabase.auth.token",uy={"X-Client-Info":`gotrue-js/${sf}`},gc="X-Supabase-Api-Version",af={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,hy=600*1e3;class _i extends Error{constructor(r,n,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}}function de(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class fy extends _i{constructor(r,n,o){super(r,n,o),this.name="AuthApiError",this.status=n,this.code=o}}function my(i){return de(i)&&i.name==="AuthApiError"}class Ln extends _i{constructor(r,n){super(r),this.name="AuthUnknownError",this.originalError=n}}class zr extends _i{constructor(r,n,o,c){super(r,o,c),this.name=n,this.status=o}}class er extends zr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function py(i){return de(i)&&i.name==="AuthSessionMissingError"}class gs extends zr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ha extends zr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Va extends zr{constructor(r,n=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function gy(i){return de(i)&&i.name==="AuthImplicitGrantRedirectError"}class kh extends zr{constructor(r,n=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xy extends zr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class xc extends zr{constructor(r,n){super(r,"AuthRetryableFetchError",n,void 0)}}function nc(i){return de(i)&&i.name==="AuthRetryableFetchError"}class Sh extends zr{constructor(r,n,o){super(r,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}}class yc extends zr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ya="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Eh=` 	
\r=`.split(""),yy=(()=>{const i=new Array(128);for(let r=0;r<i.length;r+=1)i[r]=-1;for(let r=0;r<Eh.length;r+=1)i[Eh[r].charCodeAt(0)]=-2;for(let r=0;r<Ya.length;r+=1)i[Ya[r].charCodeAt(0)]=r;return i})();function Ch(i,r,n){if(i!==null)for(r.queue=r.queue<<8|i,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(Ya[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(Ya[o]),r.queuedBits-=6}}function of(i,r,n){const o=yy[i];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)n(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Th(i){const r=[],n=f=>{r.push(String.fromCodePoint(f))},o={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},d=f=>{by(f,o,n)};for(let f=0;f<i.length;f+=1)of(i.charCodeAt(f),c,d);return r.join("")}function vy(i,r){if(i<=127){r(i);return}else if(i<=2047){r(192|i>>6),r(128|i&63);return}else if(i<=65535){r(224|i>>12),r(128|i>>6&63),r(128|i&63);return}else if(i<=1114111){r(240|i>>18),r(128|i>>12&63),r(128|i>>6&63),r(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function wy(i,r){for(let n=0;n<i.length;n+=1){let o=i.charCodeAt(n);if(o>55295&&o<=56319){const c=(o-55296)*1024&65535;o=(i.charCodeAt(n+1)-56320&65535|c)+65536,n+=1}vy(o,r)}}function by(i,r,n){if(r.utf8seq===0){if(i<=127){n(i);return}for(let o=1;o<6;o+=1)if((i>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=i&31;else if(r.utf8seq===3)r.codepoint=i&15;else if(r.utf8seq===4)r.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|i&63,r.utf8seq-=1,r.utf8seq===0&&n(r.codepoint)}}function ks(i){const r=[],n={queue:0,queuedBits:0},o=c=>{r.push(c)};for(let c=0;c<i.length;c+=1)of(i.charCodeAt(c),n,o);return new Uint8Array(r)}function jy(i){const r=[];return wy(i,n=>r.push(n)),new Uint8Array(r)}function $n(i){const r=[],n={queue:0,queuedBits:0},o=c=>{r.push(c)};return i.forEach(c=>Ch(c,n,o)),Ch(null,n,o),r.join("")}function _y(i){return Math.round(Date.now()/1e3)+i}function Ny(){return Symbol("auth-callback")}const Rt=()=>typeof window<"u"&&typeof document<"u",In={tested:!1,writable:!1},lf=()=>{if(!Rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(In.tested)return In.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),In.tested=!0,In.writable=!0}catch{In.tested=!0,In.writable=!1}return In.writable};function ky(i){const r={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((c,d)=>{r[d]=c})}catch{}return n.searchParams.forEach((o,c)=>{r[c]=o}),r}const cf=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),Sy=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",_s=async(i,r,n)=>{await i.setItem(r,JSON.stringify(n))},An=async(i,r)=>{const n=await i.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Tt=async(i,r)=>{await i.removeItem(r)};class no{constructor(){this.promise=new no.promiseConstructor((r,n)=>{this.resolve=r,this.reject=n})}}no.promiseConstructor=Promise;function sc(i){const r=i.split(".");if(r.length!==3)throw new yc("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!dy.test(r[o]))throw new yc("JWT not in base64url format");return{header:JSON.parse(Th(r[0])),payload:JSON.parse(Th(r[1])),signature:ks(r[2]),raw:{header:r[0],payload:r[1]}}}async function Ey(i){return await new Promise(r=>{setTimeout(()=>r(null),i)})}function Cy(i,r){return new Promise((o,c)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await i(d);if(!r(d,null,f)){o(f);return}}catch(f){if(!r(d,f)){c(f);return}}})()})}function Ty(i){return("0"+i.toString(16)).substr(-2)}function Oy(){const r=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let c="";for(let d=0;d<56;d++)c+=n.charAt(Math.floor(Math.random()*o));return c}return crypto.getRandomValues(r),Array.from(r,Ty).join("")}async function Ry(i){const n=new TextEncoder().encode(i),o=await crypto.subtle.digest("SHA-256",n),c=new Uint8Array(o);return Array.from(c).map(d=>String.fromCharCode(d)).join("")}async function Iy(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await Ry(i);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xs(i,r,n=!1){const o=Oy();let c=o;n&&(c+="/PASSWORD_RECOVERY"),await _s(i,`${r}-code-verifier`,c);const d=await Iy(o);return[d,o===d?"plain":"s256"]}const Ay=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Py(i){const r=i.headers.get(gc);if(!r||!r.match(Ay))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function Dy(i){if(!i)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(i<=r)throw new Error("JWT has expired")}function Ly(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $y=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ys(i){if(!$y.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ic(){const i={};return new Proxy(i,{get:(r,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function My(i,r){return new Proxy(i,{get:(n,o,c)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const d=o.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,c)}return!r.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(n,o,c)}})}function Oh(i){return JSON.parse(JSON.stringify(i))}const Pn=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Uy=[502,503,504];async function Rh(i){var r;if(!Sy(i))throw new xc(Pn(i),0);if(Uy.includes(i.status))throw new xc(Pn(i),i.status);let n;try{n=await i.json()}catch(d){throw new Ln(Pn(d),d)}let o;const c=Py(i);if(c&&c.getTime()>=af["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new Sh(Pn(n),i.status,((r=n.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new er}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new Sh(Pn(n),i.status,n.weak_password.reasons);throw new fy(Pn(n),i.status||500,o)}const zy=(i,r,n,o)=>{const c={method:i,headers:(r==null?void 0:r.headers)||{}};return i==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r==null?void 0:r.headers),c.body=JSON.stringify(o),Object.assign(Object.assign({},c),n))};async function we(i,r,n,o){var c;const d=Object.assign({},o==null?void 0:o.headers);d[gc]||(d[gc]=af["2024-01-01"].name),o!=null&&o.jwt&&(d.Authorization=`Bearer ${o.jwt}`);const f=(c=o==null?void 0:o.query)!==null&&c!==void 0?c:{};o!=null&&o.redirectTo&&(f.redirect_to=o.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await Fy(i,r,n+m,{headers:d,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(p):{data:Object.assign({},p),error:null}}async function Fy(i,r,n,o,c,d){const f=zy(r,o,c,d);let m;try{m=await i(n,Object.assign({},f))}catch(p){throw console.error(p),new xc(Pn(p),0)}if(m.ok||await Rh(m),o!=null&&o.noResolveJson)return m;try{return await m.json()}catch(p){await Rh(p)}}function vr(i){var r;let n=null;Hy(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=_y(i.expires_in)));const o=(r=i.user)!==null&&r!==void 0?r:i;return{data:{session:n,user:o},error:null}}function Ih(i){const r=vr(i);return!r.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(r.data.weak_password=i.weak_password),r}function fn(i){var r;return{data:{user:(r=i.user)!==null&&r!==void 0?r:i},error:null}}function By(i){return{data:i,error:null}}function Wy(i){const{action_link:r,email_otp:n,hashed_token:o,redirect_to:c,verification_type:d}=i,f=to(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:r,email_otp:n,hashed_token:o,redirect_to:c,verification_type:d},p=Object.assign({},f);return{data:{properties:m,user:p},error:null}}function Ah(i){return i}function Hy(i){return i.access_token&&i.refresh_token&&i.expires_in}const ac=["global","local","others"];class Vy{constructor({url:r="",headers:n={},fetch:o}){this.url=r,this.headers=n,this.fetch=cf(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,n=ac[0]){if(ac.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ac.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(de(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,n={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:fn})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:n}=r,o=to(r,["options"]),c=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(c.new_email=o==null?void 0:o.newEmail,delete c.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Wy,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(de(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(r){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:fn})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async listUsers(r){var n,o,c,d,f,m,p;try{const x={nextPage:null,lastPage:0,total:0},b=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r==null?void 0:r.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(d=(c=r==null?void 0:r.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:Ah});if(b.error)throw b.error;const N=await b.json(),S=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,O=(p=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return O.length>0&&(O.forEach(j=>{const C=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(j.split(";")[1].split("=")[1]);x[`${P}Page`]=C}),x.total=parseInt(S)),{data:Object.assign(Object.assign({},N),x),error:null}}catch(x){if(de(x))return{data:{users:[]},error:x};throw x}}async getUserById(r){ys(r);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:fn})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async updateUserById(r,n){ys(r);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:n,headers:this.headers,xform:fn})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,n=!1){ys(r);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:n},xform:fn})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){ys(r.userId);try{const{data:n,error:o}=await we(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:n,error:o}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _deleteFactor(r){ys(r.userId),ys(r.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _listOAuthClients(r){var n,o,c,d,f,m,p;try{const x={nextPage:null,lastPage:0,total:0},b=await we(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r==null?void 0:r.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(d=(c=r==null?void 0:r.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:Ah});if(b.error)throw b.error;const N=await b.json(),S=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,O=(p=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return O.length>0&&(O.forEach(j=>{const C=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(j.split(";")[1].split("=")[1]);x[`${P}Page`]=C}),x.total=parseInt(S)),{data:Object.assign(Object.assign({},N),x),error:null}}catch(x){if(de(x))return{data:{clients:[]},error:x};throw x}}async _createOAuthClient(r){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _getOAuthClient(r){try{return await we(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _updateOAuthClient(r,n){try{return await we(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(de(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(r){try{return await we(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(r){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}}function Ph(i={}){return{getItem:r=>i[r]||null,setItem:(r,n)=>{i[r]=n},removeItem:r=>{delete i[r]}}}const vs={debug:!!(globalThis&&lf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uf extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class qy extends uf{}async function Gy(i,r,n){vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),vs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async c=>{if(c){vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,c.name);try{return await n()}finally{vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,c.name)}}else{if(r===0)throw vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new qy(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(vs.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Ky(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function df(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function Yy(i){return parseInt(i,16)}function Jy(i){const r=new TextEncoder().encode(i);return"0x"+Array.from(r,o=>o.toString(16).padStart(2,"0")).join("")}function Qy(i){var r;const{chainId:n,domain:o,expirationTime:c,issuedAt:d=new Date,nonce:f,notBefore:m,requestId:p,resources:x,scheme:b,uri:N,version:S}=i;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!N)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((r=i.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const O=df(i.address),j=b?`${b}://${o}`:o,C=i.statement?`${i.statement}
`:"",P=`${j} wants you to sign in with your Ethereum account:
${O}

${C}`;let F=`URI: ${N}
Version: ${S}
Chain ID: ${n}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(c&&(F+=`
Expiration Time: ${c.toISOString()}`),m&&(F+=`
Not Before: ${m.toISOString()}`),p&&(F+=`
Request ID: ${p}`),x){let H=`
Resources:`;for(const B of x){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);H+=`
- ${B}`}F+=H}return`${P}
${F}`}class gt extends Error{constructor({message:r,code:n,cause:o,name:c}){var d;super(r,{cause:o}),this.__isWebAuthnError=!0,this.name=(d=c??(o instanceof Error?o.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=n}}class Ja extends gt{constructor(r,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:r}),this.name="WebAuthnUnknownError",this.originalError=n}}function Xy({error:i,options:r}){var n,o,c;const{publicKey:d}=r;if(!d)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(r.signal instanceof AbortSignal)return new gt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((n=d.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new gt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(r.mediation==="conditional"&&((o=d.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new gt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((c=d.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new gt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new gt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new gt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return d.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new gt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new gt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const f=window.location.hostname;if(hf(f)){if(d.rp.id!==f)return new gt({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new gt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new gt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function Zy({error:i,options:r}){const{publicKey:n}=r;if(!n)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(r.signal instanceof AbortSignal)return new gt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new gt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const o=window.location.hostname;if(hf(o)){if(n.rpId!==o)return new gt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new gt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class ev{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const tv=new ev;function rv(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:r,user:n,excludeCredentials:o}=i,c=to(i,["challenge","user","excludeCredentials"]),d=ks(r).buffer,f=Object.assign(Object.assign({},n),{id:ks(n.id).buffer}),m=Object.assign(Object.assign({},c),{challenge:d,user:f});if(o&&o.length>0){m.excludeCredentials=new Array(o.length);for(let p=0;p<o.length;p++){const x=o[p];m.excludeCredentials[p]=Object.assign(Object.assign({},x),{id:ks(x.id).buffer,type:x.type||"public-key",transports:x.transports})}}return m}function nv(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:r,allowCredentials:n}=i,o=to(i,["challenge","allowCredentials"]),c=ks(r).buffer,d=Object.assign(Object.assign({},o),{challenge:c});if(n&&n.length>0){d.allowCredentials=new Array(n.length);for(let f=0;f<n.length;f++){const m=n[f];d.allowCredentials[f]=Object.assign(Object.assign({},m),{id:ks(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function sv(i){var r;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i;return{id:i.id,rawId:i.id,response:{attestationObject:$n(new Uint8Array(i.response.attestationObject)),clientDataJSON:$n(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function iv(i){var r;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i,o=i.getClientExtensionResults(),c=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:$n(new Uint8Array(c.authenticatorData)),clientDataJSON:$n(new Uint8Array(c.clientDataJSON)),signature:$n(new Uint8Array(c.signature)),userHandle:c.userHandle?$n(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function hf(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Dh(){var i,r;return!!(Rt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.get)=="function")}async function av(i){try{const r=await navigator.credentials.create(i);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Ja("Browser returned unexpected credential type",r)}:{data:null,error:new Ja("Empty credential response",r)}}catch(r){return{data:null,error:Xy({error:r,options:i})}}}async function ov(i){try{const r=await navigator.credentials.get(i);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Ja("Browser returned unexpected credential type",r)}:{data:null,error:new Ja("Empty credential response",r)}}catch(r){return{data:null,error:Zy({error:r,options:i})}}}const lv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},cv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Qa(...i){const r=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),n=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),o={};for(const c of i)if(c)for(const d in c){const f=c[d];if(f!==void 0)if(Array.isArray(f))o[d]=f;else if(n(f))o[d]=f;else if(r(f)){const m=o[d];r(m)?o[d]=Qa(m,f):o[d]=Qa(f)}else o[d]=f}return o}function uv(i,r){return Qa(lv,i,r||{})}function dv(i,r){return Qa(cv,i,r||{})}class hv{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:n,friendlyName:o,signal:c},d){try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:r,webauthn:n});if(!f)return{data:null,error:m};const p=c??tv.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:x}=f.webauthn.credential_options.publicKey;x.name||(x.name=`${x.id}:${o}`),x.displayName||(x.displayName=x.name)}switch(f.webauthn.type){case"create":{const x=uv(f.webauthn.credential_options.publicKey,d==null?void 0:d.create),{data:b,error:N}=await av({publicKey:x,signal:p});return b?{data:{factorId:r,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:N}}case"request":{const x=dv(f.webauthn.credential_options.publicKey,d==null?void 0:d.request),{data:b,error:N}=await ov(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:x,signal:p}));return b?{data:{factorId:r,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:N}}}}catch(f){return de(f)?{data:null,error:f}:{data:null,error:new Ln("Unexpected error in challenge",f)}}}async _verify({challengeId:r,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:r,webauthn:o})}async _authenticate({factorId:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},d){if(!n)return{data:null,error:new _i("rpId is required for WebAuthn authentication")};try{if(!Dh())return{data:null,error:new Ln("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:r,webauthn:{rpId:n,rpOrigins:o},signal:c},{request:d});if(!f)return{data:null,error:m};const{webauthn:p}=f;return this._verify({factorId:r,challengeId:f.challengeId,webauthn:{type:p.type,rpId:n,rpOrigins:o,credential_response:p.credential_response}})}catch(f){return de(f)?{data:null,error:f}:{data:null,error:new Ln("Unexpected error in authenticate",f)}}}async _register({friendlyName:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},d){if(!n)return{data:null,error:new _i("rpId is required for WebAuthn registration")};try{if(!Dh())return{data:null,error:new Ln("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:r});if(!f)return await this.client.mfa.listFactors().then(b=>{var N;return(N=b.data)===null||N===void 0?void 0:N.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===r&&S.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:m};const{data:p,error:x}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:c},{create:d});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:n,rpOrigins:o,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:x}}catch(f){return de(f)?{data:null,error:f}:{data:null,error:new Ln("Unexpected error in register",f)}}}}Ky();const fv={url:ly,storageKey:cy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:uy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Lh(i,r,n){return await n()}const ws={};class Ni{get jwks(){var r,n;return(n=(r=ws[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(r){ws[this.storageKey]=Object.assign(Object.assign({},ws[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,n;return(n=(r=ws[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){ws[this.storageKey]=Object.assign(Object.assign({},ws[this.storageKey]),{cachedAt:r})}constructor(r){var n,o,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},fv),r);if(this.storageKey=d.storageKey,this.instanceID=(n=Ni.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Ni.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&Rt()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new Vy({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=cf(d.fetch),this.lock=d.lock||Lh,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,d.lock?this.lock=d.lock:this.persistSession&&Rt()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=Gy:this.lock=Lh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new hv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:lf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ph(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=Ph(this.memoryStorage)),Rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${sf}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let n={},o="none";if(Rt()&&(n=ky(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),Rt()&&this.detectSessionInUrl&&o!=="none"){const{data:c,error:d}=await this._getSessionFromURL(n,o);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),gy(d)){const p=(r=d.details)===null||r===void 0?void 0:r.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:m}=c;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return de(n)?this._returnResult({error:n}):this._returnResult({error:new Ln("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var n,o,c;try{const d=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=r==null?void 0:r.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(c=r==null?void 0:r.options)===null||c===void 0?void 0:c.captchaToken}},xform:vr}),{data:f,error:m}=d;if(m||!f)return this._returnResult({data:{user:null,session:null},error:m});const p=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:x,session:p},error:null})}catch(d){if(de(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(r){var n,o,c;try{let d;if("email"in r){const{email:b,password:N,options:S}=r;let O=null,j=null;this.flowType==="pkce"&&([O,j]=await xs(this.storage,this.storageKey)),d=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:b,password:N,data:(n=S==null?void 0:S.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:O,code_challenge_method:j},xform:vr})}else if("phone"in r){const{phone:b,password:N,options:S}=r;d=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:N,data:(o=S==null?void 0:S.data)!==null&&o!==void 0?o:{},channel:(c=S==null?void 0:S.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:vr})}else throw new Ha("You must provide either an email or phone number and a password");const{data:f,error:m}=d;if(m||!f)return await Tt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const p=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:x,session:p},error:null})}catch(d){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),de(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(r){try{let n;if("email"in r){const{email:d,password:f,options:m}=r;n=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ih})}else if("phone"in r){const{phone:d,password:f,options:m}=r;n=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ih})}else throw new Ha("You must provide either an email or phone number and a password");const{data:o,error:c}=n;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o||!o.session||!o.user){const d=new gs;return this._returnResult({data:{user:null,session:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:c})}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(r){var n,o,c,d;return await this._handleProviderSignIn(r.provider,{redirectTo:(n=r.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=r.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(d=r.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:n}=r;switch(n){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(r){var n,o,c,d,f,m,p,x,b,N,S;let O,j;if("message"in r)O=r.message,j=r.signature;else{const{chain:C,wallet:P,statement:F,options:H}=r;let B;if(Rt())if(typeof P=="object")B=P;else{const ae=window;if("ethereum"in ae&&typeof ae.ethereum=="object"&&"request"in ae.ethereum&&typeof ae.ethereum.request=="function")B=ae.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!(H!=null&&H.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=P}const X=new URL((n=H==null?void 0:H.url)!==null&&n!==void 0?n:window.location.href),je=await B.request({method:"eth_requestAccounts"}).then(ae=>ae).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!je||je.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const he=df(je[0]);let ie=(o=H==null?void 0:H.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!ie){const ae=await B.request({method:"eth_chainId"});ie=Yy(ae)}const q={domain:X.host,address:he,statement:F,uri:X.href,version:"1",chainId:ie,nonce:(c=H==null?void 0:H.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(f=(d=H==null?void 0:H.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=H==null?void 0:H.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=H==null?void 0:H.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(x=H==null?void 0:H.signInWithEthereum)===null||x===void 0?void 0:x.requestId,resources:(b=H==null?void 0:H.signInWithEthereum)===null||b===void 0?void 0:b.resources};O=Qy(q),j=await B.request({method:"personal_sign",params:[Jy(O),he]})}try{const{data:C,error:P}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:O,signature:j},!((N=r.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(S=r.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:vr});if(P)throw P;if(!C||!C.session||!C.user){const F=new gs;return this._returnResult({data:{user:null,session:null},error:F})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:P})}catch(C){if(de(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(r){var n,o,c,d,f,m,p,x,b,N,S,O;let j,C;if("message"in r)j=r.message,C=r.signature;else{const{chain:P,wallet:F,statement:H,options:B}=r;let X;if(Rt())if(typeof F=="object")X=F;else{const he=window;if("solana"in he&&typeof he.solana=="object"&&("signIn"in he.solana&&typeof he.solana.signIn=="function"||"signMessage"in he.solana&&typeof he.solana.signMessage=="function"))X=he.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof F!="object"||!(B!=null&&B.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");X=F}const je=new URL((n=B==null?void 0:B.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in X&&X.signIn){const he=await X.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B==null?void 0:B.signInWithSolana),{version:"1",domain:je.host,uri:je.href}),H?{statement:H}:null));let ie;if(Array.isArray(he)&&he[0]&&typeof he[0]=="object")ie=he[0];else if(he&&typeof he=="object"&&"signedMessage"in he&&"signature"in he)ie=he;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ie&&"signature"in ie&&(typeof ie.signedMessage=="string"||ie.signedMessage instanceof Uint8Array)&&ie.signature instanceof Uint8Array)j=typeof ie.signedMessage=="string"?ie.signedMessage:new TextDecoder().decode(ie.signedMessage),C=ie.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in X)||typeof X.signMessage!="function"||!("publicKey"in X)||typeof X!="object"||!X.publicKey||!("toBase58"in X.publicKey)||typeof X.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${je.host} wants you to sign in with your Solana account:`,X.publicKey.toBase58(),...H?["",H,""]:[""],"Version: 1",`URI: ${je.href}`,`Issued At: ${(c=(o=B==null?void 0:B.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((d=B==null?void 0:B.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((f=B==null?void 0:B.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((m=B==null?void 0:B.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((p=B==null?void 0:B.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((x=B==null?void 0:B.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((N=(b=B==null?void 0:B.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||N===void 0)&&N.length?["Resources",...B.signInWithSolana.resources.map(ie=>`- ${ie}`)]:[]].join(`
`);const he=await X.signMessage(new TextEncoder().encode(j),"utf8");if(!he||!(he instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=he}}try{const{data:P,error:F}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:$n(C)},!((S=r.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(O=r.options)===null||O===void 0?void 0:O.captchaToken}}:null),xform:vr});if(F)throw F;if(!P||!P.session||!P.user){const H=new gs;return this._returnResult({data:{user:null,session:null},error:H})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:F})}catch(P){if(de(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async _exchangeCodeForSession(r){const n=await An(this.storage,`${this.storageKey}-code-verifier`),[o,c]=(n??"").split("/");try{if(!o&&this.flowType==="pkce")throw new xy;const{data:d,error:f}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:vr});if(await Tt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!d||!d.session||!d.user){const m=new gs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:c??null}),error:f})}catch(d){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),de(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(r){try{const{options:n,provider:o,token:c,access_token:d,nonce:f}=r,m=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:c,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:vr}),{data:p,error:x}=m;if(x)return this._returnResult({data:{user:null,session:null},error:x});if(!p||!p.session||!p.user){const b=new gs;return this._returnResult({data:{user:null,session:null},error:b})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:x})}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(r){var n,o,c,d,f;try{if("email"in r){const{email:m,options:p}=r;let x=null,b=null;this.flowType==="pkce"&&([x,b]=await xs(this.storage,this.storageKey));const{error:N}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},create_user:(o=p==null?void 0:p.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:x,code_challenge_method:b},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:N})}if("phone"in r){const{phone:m,options:p}=r,{data:x,error:b}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(c=p==null?void 0:p.data)!==null&&c!==void 0?c:{},create_user:(d=p==null?void 0:p.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(f=p==null?void 0:p.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:b})}throw new Ha("You must provide either an email or phone number.")}catch(m){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),de(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(r){var n,o;try{let c,d;"options"in r&&(c=(n=r.options)===null||n===void 0?void 0:n.redirectTo,d=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:f,error:m}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:d}}),redirectTo:c,xform:vr});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,x=f.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:x,session:p},error:null})}catch(c){if(de(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(r){var n,o,c,d,f;try{let m=null,p=null;this.flowType==="pkce"&&([m,p]=await xs(this.storage,this.storageKey));const x=await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(n=r.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((c=r==null?void 0:r.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:p}),headers:this.headers,xform:By});return!((d=x.data)===null||d===void 0)&&d.url&&Rt()&&!(!((f=r.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(x.data.url),this._returnResult(x)}catch(m){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),de(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;if(o)throw o;if(!n)throw new er;const{error:c}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(r){if(de(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const n=`${this.url}/resend`;if("email"in r){const{email:o,type:c,options:d}=r,{error:f}=await we(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in r){const{phone:o,type:c,options:d}=r,{data:f,error:m}=await we(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m})}throw new Ha("You must provide either an email or phone number and a type")}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(r,n){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await r(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const n=await An(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?r=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<rc:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const f=await An(this.userStorage,this.storageKey+"-user");f!=null&&f.user?r.user=f.user:r.user=ic()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};r.user=My(r.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:c,error:d}=await this._callRefreshToken(r.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(r){try{return r?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:fn}):await this._useSession(async n=>{var o,c,d;const{data:f,error:m}=n;if(m)throw m;return!(!((o=f.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new er}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0,xform:fn})})}catch(n){if(de(n))return py(n)&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(r,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,n))}async _updateUser(r,n={}){try{return await this._useSession(async o=>{const{data:c,error:d}=o;if(d)throw d;if(!c.session)throw new er;const f=c.session;let m=null,p=null;this.flowType==="pkce"&&r.email!=null&&([m,p]=await xs(this.storage,this.storageKey));const{data:x,error:b}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:m,code_challenge_method:p}),jwt:f.access_token,xform:fn});if(b)throw b;return f.user=x.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(o){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),de(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new er;const n=Date.now()/1e3;let o=n,c=!0,d=null;const{payload:f}=sc(r.access_token);if(f.exp&&(o=f.exp,c=o<=n),c){const{data:m,error:p}=await this._callRefreshToken(r.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m)return{data:{user:null,session:null},error:null};d=m}else{const{data:m,error:p}=await this._getUser(r.access_token);if(p)throw p;d={access_token:r.access_token,refresh_token:r.refresh_token,user:m.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(n){if(de(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async n=>{var o;if(!r){const{data:f,error:m}=n;if(m)throw m;r=(o=f.session)!==null&&o!==void 0?o:void 0}if(!(r!=null&&r.refresh_token))throw new er;const{data:c,error:d}=await this._callRefreshToken(r.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(r,n){try{if(!Rt())throw new Va("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Va(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new kh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Va("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new kh("No code detected.");const{data:H,error:B}=await this._exchangeCodeForSession(r.code);if(B)throw B;const X=new URL(window.location.href);return X.searchParams.delete("code"),window.history.replaceState(window.history.state,"",X.toString()),{data:{session:H.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:c,access_token:d,refresh_token:f,expires_in:m,expires_at:p,token_type:x}=r;if(!d||!m||!f||!x)throw new Va("No session defined in URL");const b=Math.round(Date.now()/1e3),N=parseInt(m);let S=b+N;p&&(S=parseInt(p));const O=S-b;O*1e3<=js&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${O}s, should have been closer to ${N}s`);const j=S-N;b-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,S,b):b-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,S,b);const{data:C,error:P}=await this._getUser(d);if(P)throw P;const F={provider_token:o,provider_refresh_token:c,access_token:d,expires_in:N,expires_at:S,refresh_token:f,token_type:x,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:F,redirectType:r.type},error:null})}catch(o){if(de(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const n=await An(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&n)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:c,error:d}=n;if(d)return this._returnResult({error:d});const f=(o=c.session)===null||o===void 0?void 0:o.access_token;if(f){const{error:m}=await this.admin.signOut(f,r);if(m&&!(my(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return r!=="others"&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const n=Ny(),o={id:n,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async n=>{var o,c;try{const{data:{session:d},error:f}=n;if(f)throw f;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",r,"session",d)}catch(d){await((c=this.stateChangeEmitters.get(r))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",d),console.error(d)}})}async resetPasswordForEmail(r,n={}){let o=null,c=null;this.flowType==="pkce"&&([o,c]=await xs(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:c,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(d){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),de(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var r;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(r=n.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var n;try{const{data:o,error:c}=await this._useSession(async d=>{var f,m,p,x,b;const{data:N,error:S}=d;if(S)throw S;const O=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(f=r.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=r.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=r.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",O,{headers:this.headers,jwt:(b=(x=N.session)===null||x===void 0?void 0:x.access_token)!==null&&b!==void 0?b:void 0})});if(c)throw c;return Rt()&&!(!((n=r.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:r.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(de(o))return this._returnResult({data:{provider:r.provider,url:null},error:o});throw o}}async linkIdentityIdToken(r){return await this._useSession(async n=>{var o;try{const{error:c,data:{session:d}}=n;if(c)throw c;const{options:f,provider:m,token:p,access_token:x,nonce:b}=r,N=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=d==null?void 0:d.access_token)!==null&&o!==void 0?o:void 0,body:{provider:m,id_token:p,access_token:x,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:vr}),{data:S,error:O}=N;return O?this._returnResult({data:{user:null,session:null},error:O}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new gs}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:O}))}catch(c){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),de(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(r){try{return await this._useSession(async n=>{var o,c;const{data:d,error:f}=n;if(f)throw f;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(c=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(r){const n=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await Cy(async c=>(c>0&&await Ey(200*Math.pow(2,c-1)),this._debug(n,"refreshing attempt",c),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:vr})),(c,d)=>{const f=200*Math.pow(2,c);return d&&nc(d)&&Date.now()+f-o<js})}catch(o){if(this._debug(n,"error",o),de(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",n,"url",o),Rt()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const c=await An(this.storage,this.storageKey);if(c&&this.userStorage){let f=await An(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:c.user},await _s(this.userStorage,this.storageKey+"-user",f)),c.user=(r=f==null?void 0:f.user)!==null&&r!==void 0?r:ic()}else if(c&&!c.user&&!c.user){const f=await An(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(c.user=f.user,await Tt(this.storage,this.storageKey+"-user"),await _s(this.storage,this.storageKey,c)):c.user=ic()}if(this._debug(o,"session from storage",c),!this._isValidSession(c)){this._debug(o,"session is not valid"),c!==null&&await this._removeSession();return}const d=((n=c.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<rc;if(this._debug(o,`session has${d?"":" not"} expired with margin of ${rc}s`),d){if(this.autoRefreshToken&&c.refresh_token){const{error:f}=await this._callRefreshToken(c.refresh_token);f&&(console.error(f),nc(f)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(c.access_token);!m&&(f!=null&&f.user)?(c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(o,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(o,"error",c),console.error(c);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var n,o;if(!r)throw new er;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new no;const{data:d,error:f}=await this._refreshAccessToken(r);if(f)throw f;if(!d.session)throw new er;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const m={data:d.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(d){if(this._debug(c,"error",d),de(d)){const f={data:null,error:d};return nc(d)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(f),f}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(d),d}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(r,n,o=!0){const c=`#_notifyAllSubscribers(${r})`;this._debug(c,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:n});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(r,n)}catch(p){d.push(p)}});if(await Promise.all(f),d.length>0){for(let m=0;m<d.length;m+=1)console.error(d[m]);throw d[0]}}finally{this._debug(c,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await Tt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},r),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await _s(this.userStorage,this.storageKey+"-user",{user:n.user});const c=Object.assign({},n);delete c.user;const d=Oh(c);await _s(this.storage,this.storageKey,d)}else{const c=Oh(n);await _s(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Tt(this.storage,this.storageKey),await Tt(this.storage,this.storageKey+"-code-verifier"),await Tt(this.storage,this.storageKey+"-user"),this.userStorage&&await Tt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",r)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),js);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((o.expires_at*1e3-r)/js);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${js}ms, refresh threshold is ${pc} ticks`),c<=pc&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof uf)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const n=`#_onVisibilityChanged(${r})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,n,o){const c=[`provider=${encodeURIComponent(n)}`];if(o!=null&&o.redirectTo&&c.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&c.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[d,f]=await xs(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});c.push(m.toString())}if(o!=null&&o.queryParams){const d=new URLSearchParams(o.queryParams);c.push(d.toString())}return o!=null&&o.skipBrowserRedirect&&c.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${c.join("&")}`}async _unenroll(r){try{return await this._useSession(async n=>{var o;const{data:c,error:d}=n;return d?this._returnResult({data:null,error:d}):await we(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(r){try{return await this._useSession(async n=>{var o,c;const{data:d,error:f}=n;if(f)return this._returnResult({data:null,error:f});const m=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:p,error:x}=await we(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(o=d==null?void 0:d.session)===null||o===void 0?void 0:o.access_token});return x?this._returnResult({data:null,error:x}):(r.factorType==="totp"&&p.type==="totp"&&(!((c=p==null?void 0:p.totp)===null||c===void 0)&&c.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:c,error:d}=n;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?sv(r.webauthn.credential_response):iv(r.webauthn.credential_response)})}:{code:r.code}),{data:m,error:p}=await we(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:f,headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:p}))})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:c,error:d}=n;if(d)return this._returnResult({data:null,error:d});const f=await we(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:rv(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:nv(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(r){const{data:n,error:o}=await this._challenge({factorId:r.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:r.factorId,challengeId:n.id,code:r.code})}async _listFactors(){var r;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const c={all:[],phone:[],totp:[],webauthn:[]};for(const d of(r=n==null?void 0:n.factors)!==null&&r!==void 0?r:[])c.all.push(d),d.status==="verified"&&c[d.factor_type].push(d);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var r,n;const{data:{session:o},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=sc(o.access_token);let f=null;d.aal&&(f=d.aal);let m=f;((n=(r=o.user.factors)===null||r===void 0?void 0:r.filter(b=>b.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(m="aal2");const x=d.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:x},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async n=>{const{data:{session:o},error:c}=n;return c?this._returnResult({data:null,error:c}):o?await we(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:o.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new er})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:c},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new er});const f=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&Rt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(o){if(de(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:c},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new er});const f=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&Rt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(o){if(de(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;return o?this._returnResult({data:null,error:o}):n?await we(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new er})})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async n=>{const{data:{session:o},error:c}=n;return c?this._returnResult({data:null,error:c}):o?(await we(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new er})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(r,n={keys:[]}){let o=n.keys.find(m=>m.kid===r);if(o)return o;const c=Date.now();if(o=this.jwks.keys.find(m=>m.kid===r),o&&this.jwks_cached_at+hy>c)return o;const{data:d,error:f}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=c,o=d.keys.find(m=>m.kid===r),!o)?null:o}async getClaims(r,n={}){try{let o=r;if(!o){const{data:O,error:j}=await this.getSession();if(j||!O.session)return this._returnResult({data:null,error:j});o=O.session.access_token}const{header:c,payload:d,signature:f,raw:{header:m,payload:p}}=sc(o);n!=null&&n.allowExpired||Dy(d.exp);const x=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!x){const{error:O}=await this.getUser(o);if(O)throw O;return{data:{claims:d,header:c,signature:f},error:null}}const b=Ly(c.alg),N=await crypto.subtle.importKey("jwk",x,b,!0,["verify"]);if(!await crypto.subtle.verify(b,N,f,jy(`${m}.${p}`)))throw new yc("Invalid JWT signature");return{data:{claims:d,header:c,signature:f},error:null}}catch(o){if(de(o))return this._returnResult({data:null,error:o});throw o}}}Ni.nextInstanceID={};const mv=Ni,pv="2.89.0";let pi="";typeof Deno<"u"?pi="deno":typeof document<"u"?pi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pi="react-native":pi="node";const gv={"X-Client-Info":`supabase-js-${pi}/${pv}`},xv={headers:gv},yv={schema:"public"},vv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wv={};function ki(i){"@babel/helpers - typeof";return ki=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ki(i)}function bv(i,r){if(ki(i)!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var o=n.call(i,r);if(ki(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)}function jv(i){var r=bv(i,"string");return ki(r)=="symbol"?r:r+""}function _v(i,r,n){return(r=jv(r))in i?Object.defineProperty(i,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[r]=n,i}function $h(i,r){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);r&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable})),n.push.apply(n,o)}return n}function ut(i){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?$h(Object(n),!0).forEach(function(o){_v(i,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):$h(Object(n)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(n,o))})}return i}const Nv=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),kv=()=>Headers,Sv=(i,r,n)=>{const o=Nv(n),c=kv();return async(d,f)=>{var m;const p=(m=await r())!==null&&m!==void 0?m:i;let x=new c(f==null?void 0:f.headers);return x.has("apikey")||x.set("apikey",i),x.has("Authorization")||x.set("Authorization",`Bearer ${p}`),o(d,ut(ut({},f),{},{headers:x}))}};function Ev(i){return i.endsWith("/")?i:i+"/"}function Cv(i,r){var n,o;const{db:c,auth:d,realtime:f,global:m}=i,{db:p,auth:x,realtime:b,global:N}=r,S={db:ut(ut({},p),c),auth:ut(ut({},x),d),realtime:ut(ut({},b),f),storage:{},global:ut(ut(ut({},N),m),{},{headers:ut(ut({},(n=N==null?void 0:N.headers)!==null&&n!==void 0?n:{}),(o=m==null?void 0:m.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return i.accessToken?S.accessToken=i.accessToken:delete S.accessToken,S}function Tv(i){const r=i==null?void 0:i.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ev(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Ov=class extends mv{constructor(i){super(i)}},Rv=class{constructor(i,r,n){var o,c;this.supabaseUrl=i,this.supabaseKey=r;const d=Tv(i);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:yv,realtime:wv,auth:ut(ut({},vv),{},{storageKey:f}),global:xv},p=Cv(n??{},m);if(this.storageKey=(o=p.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=p.global.headers)!==null&&c!==void 0?c:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(b,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}});else{var x;this.auth=this._initSupabaseAuthClient((x=p.auth)!==null&&x!==void 0?x:{},this.headers,p.global.fetch)}this.fetch=Sv(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(ut({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new ux(new URL("rest/v1",d).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new oy(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new ix(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,r,n)}channel(i,r={config:{}}){return this.realtime.channel(i,r)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i=this,r,n;if(i.accessToken)return await i.accessToken();const{data:o}=await i.auth.getSession();return(r=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:i.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:r,detectSessionInUrl:n,storage:o,userStorage:c,storageKey:d,flowType:f,lock:m,debug:p,throwOnError:x},b,N){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ov({url:this.authUrl.href,headers:ut(ut({},S),b),storageKey:d,autoRefreshToken:i,persistSession:r,detectSessionInUrl:n,storage:o,userStorage:c,flowType:f,lock:m,debug:p,throwOnError:x,fetch:N,hasCustomAuthorizationHeader:Object.keys(this.headers).some(O=>O.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new Ex(this.realtimeUrl.href,ut(ut({},i),{},{params:ut(ut({},{apikey:this.supabaseKey}),i==null?void 0:i.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,r)=>{this._handleTokenChanged(i,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(i,r,n){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Iv=(i,r,n)=>new Rv(i,r,n);function Av(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const r=i.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Av()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Pv="https://hmauyaletsnukwcgpbbb.supabase.co",Dv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhtYXV5YWxldHNudWt3Y2dwYmJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY4MjAyNTIsImV4cCI6MjA4MjM5NjI1Mn0.Geqf8Rjc_FOmlCL6BtxnuLuyi1MIqvxPyje1XMHGnqk",dr=Iv(Pv,Dv),Xa="flashcard-library-v3",ff="flashcard-folders-v1",mf="flashcard-settings-v2",Cs=async()=>{const{data:i}=await dr.auth.getUser();return i.user},Lv=async i=>{const r=await Cs();if(r){const{error:n}=await dr.from("profiles").upsert({id:r.id,library_sets:i,updated_at:new Date});n&&console.error("Supabase save failed:",n)}else try{await Kh(Xa,i)}catch(n){console.error("Failed to save library to IndexedDB:",n)}},$v=async()=>{const i=await Cs();if(i){const{data:r,error:n}=await dr.from("profiles").select("library_sets").eq("id",i.id).single();if(n&&n.code!=="PGRST116"){console.error("Supabase load failed:",n);return}return r==null?void 0:r.library_sets}else try{return await Gh(Xa)}catch(r){console.error("Failed to load library from IndexedDB:",r);return}},Mv=async i=>{const r=await Cs();r?await dr.from("profiles").upsert({id:r.id,folders:i,updated_at:new Date}):localStorage.setItem(ff,JSON.stringify(i))},Uv=async i=>{const r=await Cs();r?await dr.from("profiles").upsert({id:r.id,settings:i,updated_at:new Date}):localStorage.setItem(mf,JSON.stringify(i))},zv=async()=>{const i=await Cs();if(!i)return null;const{data:r}=await dr.from("profiles").select("library_sets, folders, settings").eq("id",i.id).single();return r},Fv=async()=>{try{const i=await Cs();if(i){const{error:r}=await dr.from("profiles").delete().eq("id",i.id);if(r)return console.error("Failed to delete cloud data:",r),{success:!1,error:"Failed to delete cloud data: "+r.message}}try{const{del:r}=await Zg(async()=>{const{del:n}=await Promise.resolve().then(()=>tx);return{del:n}},void 0);await r(Xa)}catch(r){console.error("Failed to clear IndexedDB:",r)}return localStorage.removeItem(Xa),localStorage.removeItem(ff),localStorage.removeItem(mf),localStorage.removeItem("flashcard-stats-v1"),{success:!0}}catch(i){return console.error("Error deleting user data:",i),{success:!1,error:"An unexpected error occurred"}}},Bv="flashcard-library-v3",Wv="flashcard-folders-v1",Hv="flashcard-settings-v2",Mh="flashcard-stats-v1",Vv=({isOpen:i,onClose:r,settings:n,onUpdate:o,user:c,onLogin:d,onLogout:f,onDeleteData:m,onExportData:p})=>{const[x,b]=I.useState(!1);if(!i)return null;const N=S=>{o({...n,[S]:!n[S]})};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",onClick:r,children:s.jsxs("div",{className:"bg-panel border border-outline rounded-2xl p-6 w-full max-w-md shadow-2xl animate-in zoom-in-95",onClick:S=>S.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-text",children:"Settings"}),s.jsx("button",{onClick:r,className:"text-muted hover:text-text",children:s.jsx(Ur,{size:24})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-panel-2 rounded-xl border border-outline/50",children:[s.jsxs("span",{className:"font-medium text-text block mb-3 flex items-center gap-2",children:[s.jsx(eo,{size:18,className:"text-accent"})," Cloud Sync"]}),c?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"text-muted",children:"Logged in as"}),s.jsx("div",{className:"font-bold text-text truncate max-w-[150px]",children:c.email})]}),s.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-3 py-1.5 bg-red/10 text-red rounded-lg text-sm font-bold hover:bg-red/20 transition-colors",children:[s.jsx(Xp,{size:14})," Log Out"]})]}):s.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center gap-2 py-2 bg-text text-bg rounded-lg font-bold hover:opacity-90 transition-opacity",children:[s.jsx(Wh,{size:16})," Log in with Google"]})]}),s.jsx("div",{className:"h-px bg-outline/50 my-2"}),s.jsxs("label",{className:"flex items-center justify-between p-3 bg-panel-2 rounded-xl cursor-pointer hover:border-accent border border-transparent transition-all",children:[s.jsx("span",{className:"font-medium text-text",children:"Strict Spelling"}),s.jsx("div",{onClick:()=>N("strictSpelling"),className:G("w-12 h-6 rounded-full p-1 transition-colors",n.strictSpelling?"bg-accent":"bg-outline"),children:s.jsx("div",{className:G("bg-bg w-4 h-4 rounded-full shadow-sm transition-transform",n.strictSpelling?"translate-x-6":"translate-x-0")})})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 bg-panel-2 rounded-xl cursor-pointer hover:border-accent border border-transparent transition-all",children:[s.jsx("span",{className:"font-medium text-text",children:"Retype Mistakes"}),s.jsx("div",{onClick:()=>N("retypeOnMistake"),className:G("w-12 h-6 rounded-full p-1 transition-colors",n.retypeOnMistake?"bg-accent":"bg-outline"),children:s.jsx("div",{className:G("bg-bg w-4 h-4 rounded-full shadow-sm transition-transform",n.retypeOnMistake?"translate-x-6":"translate-x-0")})})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 bg-panel-2 rounded-xl cursor-pointer hover:border-accent border border-transparent transition-all",children:[s.jsx("span",{className:"font-medium text-text",children:"Dark Mode"}),s.jsx("div",{onClick:()=>N("darkMode"),className:G("w-12 h-6 rounded-full p-1 transition-colors",n.darkMode?"bg-accent":"bg-outline"),children:s.jsx("div",{className:G("bg-bg w-4 h-4 rounded-full shadow-sm transition-transform",n.darkMode?"translate-x-6":"translate-x-0")})})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 bg-panel-2 rounded-xl cursor-pointer hover:border-accent border border-transparent transition-all",children:[s.jsx("span",{className:"font-medium text-text",children:"Study Starred Only"}),s.jsx("div",{onClick:()=>N("starredOnly"),className:G("w-12 h-6 rounded-full p-1 transition-colors",n.starredOnly?"bg-accent":"bg-outline"),children:s.jsx("div",{className:G("bg-bg w-4 h-4 rounded-full shadow-sm transition-transform",n.starredOnly?"translate-x-6":"translate-x-0")})})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 bg-panel-2 rounded-xl cursor-pointer hover:border-accent border border-transparent transition-all",children:[s.jsx("span",{className:"font-medium text-text",children:"Answer with Definition"}),s.jsx("div",{onClick:()=>N("answerWithDefinition"),className:G("w-12 h-6 rounded-full p-1 transition-colors",n.answerWithDefinition?"bg-accent":"bg-outline"),children:s.jsx("div",{className:G("bg-bg w-4 h-4 rounded-full shadow-sm transition-transform",n.answerWithDefinition?"translate-x-6":"translate-x-0")})})]}),s.jsxs("div",{className:"p-3 bg-panel-2 rounded-xl border border-transparent",children:[s.jsx("span",{className:"font-medium text-text block mb-3",children:"Game Mode"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("button",{onClick:()=>o({...n,mode:"standard"}),className:G("flex items-center justify-center gap-2 py-2 rounded-lg text-sm font-bold transition-all border",n.mode==="standard"?"bg-accent text-bg border-accent":"bg-panel border-outline text-muted hover:text-text hover:border-accent/50"),children:[s.jsx(_g,{size:16})," Standard"]}),s.jsxs("button",{onClick:()=>o({...n,mode:"multiple_choice"}),className:G("flex items-center justify-center gap-2 py-2 rounded-lg text-sm font-bold transition-all border",n.mode==="multiple_choice"?"bg-accent text-bg border-accent":"bg-panel border-outline text-muted hover:text-text hover:border-accent/50"),children:[s.jsx(Gp,{size:16})," Multiple Choice"]})]})]}),s.jsx("div",{className:"h-px bg-outline/50 my-2"}),s.jsxs("div",{className:"p-4 bg-blue/5 rounded-xl border border-blue/20",children:[s.jsxs("span",{className:"font-medium text-blue block mb-3 flex items-center gap-2",children:[s.jsx(mn,{size:18})," Your Data"]}),s.jsx("button",{onClick:p,className:"w-full flex items-center justify-center gap-2 py-2 text-blue border border-blue/30 rounded-lg font-bold hover:bg-blue/10 transition-colors text-sm",children:"Export All My Data (JSON)"}),s.jsx("p",{className:"text-xs text-muted mt-2",children:"Download a copy of all your flashcard sets, folders, and settings."})]}),s.jsx("div",{className:"h-px bg-outline/50 my-2"}),s.jsxs("div",{className:"p-4 bg-red/5 rounded-xl border border-red/20",children:[s.jsxs("span",{className:"font-medium text-red block mb-3 flex items-center gap-2",children:[s.jsx(pn,{size:18})," Danger Zone"]}),x?s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-muted",children:"This will permanently delete all your flashcard sets, folders, and settings from both this device and the cloud. This action cannot be undone."}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>b(!1),className:"flex-1 py-2 text-muted border border-outline rounded-lg font-bold hover:bg-panel-2 transition-colors text-sm",children:"Cancel"}),s.jsx("button",{onClick:()=>{m(),b(!1)},className:"flex-1 py-2 bg-red text-white rounded-lg font-bold hover:bg-red/90 transition-colors text-sm",children:"Yes, Delete Everything"})]})]}):s.jsx("button",{onClick:()=>b(!0),className:"w-full flex items-center justify-center gap-2 py-2 text-red border border-red/30 rounded-lg font-bold hover:bg-red/10 transition-colors text-sm",children:"Delete All My Data"})]})]})]})})},qv=()=>{var Qe,He,rt,ht;const[i,r]=I.useState(ct.MENU),[n,o]=I.useState(ct.MENU),[c,d]=I.useState(null),[f,m]=I.useState([]),[p,x]=I.useState(!1),[b,N]=I.useState([]),[S,O]=I.useState(null),j=f.find(V=>V.id===S)||null,[C,P]=I.useState({strictSpelling:!1,retypeOnMistake:!1,darkMode:!0,starredOnly:!1,mode:"standard",answerWithDefinition:!1}),[F,H]=I.useState(!1),[B,X]=I.useState(!1),[je,he]=I.useState(!1),[ie,q]=I.useState(null),ae=f.find(V=>V.id===ie)||null,[Ae,We]=I.useState(null),[Le,Re]=I.useState(0),[dt,et]=I.useState(0),[ze,De]=I.useState(!1),[J,fe]=I.useState(0),[Y,y]=I.useState(!1),[L,ge]=I.useState(0),_e=async()=>{await dr.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}})},Ce=async()=>{await dr.auth.signOut(),d(null),window.location.reload()},oe=async()=>{const V=await Fv();V.success?(await dr.auth.signOut(),d(null),window.location.reload()):alert("Failed to delete data: "+(V.error||"Unknown error"))},Te=()=>{const V={exportedAt:new Date().toISOString(),version:"flashcardsish-export-v1",librarySets:f,folders:b,settings:C,stats:{lifetimeCorrect:L}},le=new Blob([JSON.stringify(V,null,2)],{type:"application/json"}),te=URL.createObjectURL(le),Ee=document.createElement("a");Ee.href=te,Ee.download=`flashcardsish-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee),URL.revokeObjectURL(te)};I.useEffect(()=>{dr.auth.getSession().then(({data:{session:le}})=>{d((le==null?void 0:le.user)??null)});const{data:{subscription:V}}=dr.auth.onAuthStateChange((le,te)=>{d((te==null?void 0:te.user)??null),te!=null&&te.user&&zv().then(Ee=>{Ee&&(Ee.library_sets&&Ee.library_sets.length>0&&m(Ee.library_sets),Ee.folders&&Ee.folders.length>0&&N(Ee.folders),Ee.settings&&Object.keys(Ee.settings).length>0&&P(Ee.settings))})});return()=>V.unsubscribe()},[]),I.useEffect(()=>{(async()=>{let te=await $v();if(!te||te.length===0){const mt=localStorage.getItem(Bv);if(mt)try{const ot=JSON.parse(mt);Array.isArray(ot)&&ot.length>0&&(te=ot)}catch(ot){console.error("Error parsing local library:",ot)}}te&&m(te),x(!0);const Ee=localStorage.getItem(Wv);if(Ee)try{N(JSON.parse(Ee))}catch{}const qe=localStorage.getItem(Hv);if(qe)try{const mt=JSON.parse(qe);P({...C,...mt})}catch{}const Gt=localStorage.getItem(Mh);if(Gt)try{ge(JSON.parse(Gt).lifetimeCorrect||0)}catch{}})()},[]),I.useEffect(()=>{p&&Lv(f)},[f,p]),I.useEffect(()=>{p&&Mv(b)},[b,p]),I.useEffect(()=>{p&&Uv(C)},[C,p]),I.useEffect(()=>{localStorage.setItem(Mh,JSON.stringify({lifetimeCorrect:L}))},[L]),I.useEffect(()=>{C.darkMode?document.body.classList.remove("light-mode"):document.body.classList.add("light-mode")},[C.darkMode]);const Oe=V=>{P(V)};I.useEffect(()=>{let V;return i===ct.PLAYING&&!ze&&(Le===0&&Re(Date.now()),V=window.setInterval(()=>{et(Date.now())},500)),()=>clearInterval(V)},[i,ze,Le]);const Pe=()=>{if(ze){const V=Date.now()-J;Re(le=>le+V),De(!1)}else fe(Date.now()),De(!0)},Ve=V=>{q(V.id),r(ct.SET_DETAIL)},bt=()=>{q(null),r(ct.MENU)},jr=()=>{ae&&xt(ae)},xt=V=>{const le={...V,isSessionActive:!0,lastPlayed:Date.now()};m(te=>te.some(qe=>qe.id===V.id)?te.map(qe=>qe.id===V.id?le:qe):[le,...te]),O(V.id),Re(Date.now()),et(Date.now()),De(!1),r(ct.PLAYING)},nr=V=>{O(V.id),Re(Date.now()),et(Date.now()),De(!1),r(ct.PLAYING)},hr=V=>{const le=f.findIndex(te=>te.id===V.id);m(le!==-1?te=>te.map(Ee=>Ee.id===V.id?V:Ee):te=>[V,...te])},M=V=>{m(le=>le.map(te=>te.id===V.id?V:te))},Q=V=>{m(le=>le.filter(te=>te.id!==V))},Z=V=>{m(le=>le.map(te=>te.id===V?{...te,isSessionActive:!1}:te))},me=V=>{const le=f.find(te=>te.id===V);if(le){const te={...le,id:Ot(),name:`${le.name} (Copy)`,lastPlayed:Date.now(),elapsedTime:0,topStreak:0,cards:le.cards.map(Ee=>({...Ee,mastery:0}))};m(Ee=>[te,...Ee])}},ke=V=>{const le=Date.now();let te=V.elapsedTime;if(!ze){const qe=le-Le;Re(le),te+=qe}const Ee={...V,elapsedTime:te,lastPlayed:le};m(qe=>{let Gt=qe.map(mt=>mt.id===V.id?Ee:mt);if(V.isMultistudy){const mt=new Map(V.cards.map(ot=>[ot.id,ot]));Gt=Gt.map(ot=>ot.id===V.id||!ot.cards.some(Ut=>mt.has(Ut.id))?ot:{...ot,cards:ot.cards.map(Ut=>{const Fr=mt.get(Ut.id);return Fr?{...Ut,...Fr}:Ut})})}return Gt})},pe=V=>{if(j){const le={...j,name:V};m(te=>te.map(Ee=>Ee.id===j.id?le:Ee))}y(!1)},Fe=()=>{if(j){const V=Date.now(),le=ze?0:V-Le,te={...j,elapsedTime:j.elapsedTime+le,lastPlayed:V};m(Ee=>Ee.map(qe=>qe.id===te.id?te:qe))}r(ct.WIN)},Ge=()=>{if(j&&i===ct.PLAYING){const V=Date.now(),le=ze?0:V-Le,te={...j,elapsedTime:j.elapsedTime+le,lastPlayed:V};m(Ee=>Ee.map(qe=>qe.id===te.id?te:qe))}r(ct.MENU),O(null),y(!1)},Je=()=>{if(!j)return;const V={...j,elapsedTime:0,topStreak:0,cards:j.cards.map(le=>({...le,mastery:0}))};m(le=>le.map(te=>te.id===V.id?V:te)),Re(Date.now()),et(Date.now()),De(!1),r(ct.PLAYING)},qt=()=>{if(!j)return;const V=j.cards.filter(te=>te.star);if(V.length===0)return;const le={id:Ot(),name:`${j.name} (Starred)`,cards:V.map(te=>({...te,mastery:0})),lastPlayed:Date.now(),elapsedTime:0,topStreak:0};hr(le),alert("Saved starred cards as a new set in Library!")};return s.jsxs("div",{className:"min-h-screen flex flex-col bg-bg text-text font-sans selection:bg-accent selection:text-bg transition-colors duration-300",children:[i===ct.WIN&&s.jsx(Ug,{}),s.jsx(Vv,{isOpen:F,onClose:()=>H(!1),settings:C,onUpdate:Oe,user:c,onLogin:_e,onLogout:Ce,onDeleteData:oe,onExportData:Te}),s.jsx(zg,{isOpen:B,onClose:()=>X(!1)}),s.jsx(Fg,{isOpen:je,onClose:()=>he(!1)}),s.jsx("header",{className:"sticky top-0 z-30 bg-bg/95 backdrop-blur border-b border-outline px-6 py-4",children:s.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-4 w-1/3",children:s.jsx("button",{onClick:()=>{i!==ct.DOCUMENTATION&&o(i),r(ct.DOCUMENTATION)},className:"p-2 text-muted hover:text-text transition-colors",title:"Documentation",children:s.jsx(Fh,{size:20})})}),s.jsx("div",{className:"w-1/3 flex justify-center",children:i===ct.PLAYING&&j?Y?s.jsx("input",{autoFocus:!0,defaultValue:j.name,onBlur:V=>pe(V.target.value),onKeyDown:V=>V.key==="Enter"&&pe(V.currentTarget.value),className:"bg-transparent border-b border-accent text-center font-bold text-text focus:outline-none pb-1 min-w-[200px]"}):s.jsx("span",{onClick:()=>y(!0),className:"font-bold text-text opacity-50 hover:opacity-100 cursor-pointer hover:text-accent transition-all truncate max-w-[250px]",title:"Click to rename",children:j.name}):s.jsx("div",{className:"font-bold text-lg tracking-tight text-text opacity-80",children:"Flashcardsish"})}),s.jsxs("div",{className:"flex justify-end w-1/3 items-center gap-4",children:[i===ct.PLAYING&&j&&s.jsxs("button",{onClick:Pe,className:G("flex items-center gap-2 font-mono transition-all mr-2",ze?"text-muted opacity-30":"text-accent"),children:[s.jsx(Sp,{size:18}),s.jsx("span",{className:"hidden sm:inline",children:ze?"PAUSED":np(j.elapsedTime+(dt-Le))})]}),c?s.jsxs("button",{onClick:()=>H(!0),className:"flex items-center gap-2 px-2 py-1 rounded-lg bg-panel-2 border border-outline hover:border-accent transition-all",title:`Logged in as ${c.email}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:((Qe=c.user_metadata)==null?void 0:Qe.avatar_url)||`https://ui-avatars.com/api/?name=${encodeURIComponent(c.email||"U")}&background=random&size=32`,alt:"Profile",className:"w-6 h-6 rounded-full"}),s.jsx(eo,{size:10,className:"absolute -bottom-0.5 -right-0.5 text-green bg-panel rounded-full"})]}),s.jsx("span",{className:"text-xs text-muted hidden sm:block max-w-[80px] truncate",children:((rt=(He=c.user_metadata)==null?void 0:He.full_name)==null?void 0:rt.split(" ")[0])||((ht=c.email)==null?void 0:ht.split("@")[0])})]}):s.jsxs("button",{onClick:_e,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-bold text-muted hover:text-text border border-outline hover:border-accent rounded-lg transition-all",children:[s.jsx(Wh,{size:14})," Sign In"]}),s.jsx("button",{onClick:()=>H(!0),className:G("p-2 transition-colors",F?"text-accent":"text-muted hover:text-text"),children:s.jsx(hg,{size:20})})]})]})}),s.jsxs("main",{className:"flex-grow p-6 md:p-8 max-w-5xl mx-auto w-full",children:[i===ct.MENU&&s.jsx(Pg,{librarySets:f,setLibrarySets:m,folders:b,setFolders:N,onStartFromLibrary:xt,onResumeSession:nr,onDeleteLibrarySet:Q,onDuplicateLibrarySet:me,onOpenSet:Ve,onSaveToLibrary:hr,onDeleteSession:Z,settings:C,onUpdateSettings:Oe,lifetimeCorrect:L,initialEditSetId:Ae,onClearEditRequest:()=>We(null)}),i===ct.SET_DETAIL&&ae&&s.jsx(Mg,{set:ae,settings:C,onBack:bt,onStartLearn:jr,onUpdateSet:M,onEdit:()=>{We(ae.id),bt()},onDuplicate:()=>{me(ae.id);const V=f.find(le=>le.name===`${ae.name} (Copy)`);V&&q(V.id)},onDelete:()=>{Q(ae.id),bt()}}),i===ct.PLAYING&&j&&s.jsx(Dg,{set:j,onUpdateSet:ke,onFinish:Fe,settings:C,onExit:Ge,onCorrect:()=>ge(V=>V+1)}),i===ct.WIN&&s.jsxs("div",{className:"fixed inset-0 z-20 flex flex-col items-center justify-center bg-bg/95 backdrop-blur-xl animate-in fade-in duration-500",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("h2",{className:"text-5xl font-bold text-accent mb-4 drop-shadow-[0_0_35px_rgba(208,164,94,0.4)]",children:"Session Complete"}),s.jsx("p",{className:"text-xl text-muted",children:"Excellent work."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-lg px-6",children:[s.jsxs("button",{onClick:Je,className:"bg-panel-2 border border-outline text-text px-6 py-4 rounded-xl font-bold text-lg hover:border-accent transition-all shadow-sm flex items-center justify-center gap-2",children:[s.jsx(lg,{size:20})," Restart Session"]}),j&&j.cards.some(V=>V.star)&&s.jsxs("button",{onClick:qt,className:"bg-panel-2 border border-outline text-text px-6 py-4 rounded-xl font-bold text-lg hover:border-accent transition-colors shadow-sm flex items-center justify-center gap-2",children:[s.jsx("span",{className:"text-yellow text-xl",children:""})," Save Starred"]}),s.jsxs("button",{onClick:Ge,className:"bg-panel-2 border border-outline text-text px-6 py-4 rounded-xl font-bold text-lg hover:border-accent transition-colors shadow-sm flex items-center justify-center gap-2 md:col-span-2",children:[s.jsx(Mn,{size:20})," Save & Back to Menu"]}),s.jsxs("button",{onClick:()=>{j&&Z(j.id),Ge()},className:"bg-panel-2 border border-outline text-red px-6 py-4 rounded-xl font-bold text-lg hover:border-red hover:bg-red/10 transition-colors shadow-sm flex items-center justify-center gap-2 md:col-span-2",children:[s.jsx(pn,{size:20})," Finish & Remove Session"]})]})]}),i===ct.DOCUMENTATION&&s.jsx(Jg,{onBack:()=>r(n)})]}),s.jsxs("footer",{className:"py-6 text-center text-muted text-sm border-t border-outline bg-panel-2/50",children:[s.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-3",children:["Made with ",s.jsx(Fp,{size:14,className:"text-red fill-red"})," and vibe coding by Owen Whelan."]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs opacity-60",children:[s.jsx("button",{onClick:()=>X(!0),className:"hover:text-accent hover:opacity-100 transition-all underline-offset-2 hover:underline",children:"Privacy Policy"}),s.jsx("span",{className:"text-outline",children:""}),s.jsx("button",{onClick:()=>he(!0),className:"hover:text-accent hover:opacity-100 transition-all underline-offset-2 hover:underline",children:"Terms of Service"})]})]})]})},Gv=rp.createRoot(document.getElementById("root"));Gv.render(s.jsx(qv,{}));
